<!DOCTYPE html>
<html>
  <head>
    <!-- meta -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="icon" type="image/x-icon" href="/spvmdoc-public/images/spvm-logo.png">
<link rel="stylesheet" type="text/css" href="/spvmdoc-public/css/common.css">

<title>SPVM 1.0 Language Specification - SPVM Document</title>
<meta name="description" content="SPVM 1.0 Language Specification is described in this document.">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <!-- header -->
<div class="main">
  <h1>
    <a href="/spvmdoc-public/">SPVM Document</a>
  </h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    <!-- top -->

  </div>
  <div class="middle">
    <h2><a href="/spvmdoc-public/language.html">SPVM 1.0 Language Specification</a></h3>
<p>
  <b>SPVM 1.0 Language Specification</b> is described in this document.
</p>
<p>
  SPVM is in beta testing for the 1.0 release. Language Specification will be changed without warning.
</p>
<p>
  Last modified 2020-03-23
</p>
<ul>
  <li><a href="#language-c99">C99 compliant</a></li>
  <li><a href="#language-lex">Lexical Analysis</a></li>
  <li><a href="#language-parsing">Syntax Parsing</a></li>
  <li><a href="#language-comment">Comment</a></li>
  <li><a href="#language-pod">POD</a></li>
  <li><a href="#language-package">Package</a></li>
  <li><a href="#language-module">Module</a></li>
  <li><a href="#language-package-var">Package Variable</a></li>
  <li><a href="#language-field">Field</a></li>
  <li><a href="#language-sub">Subroutine</a></li>
  <li><a href="#language-enum">Enumeration</a></li>
  <li><a href="#language-begin-block">BEGIN Block</a></li>
  <li><a href="#language-lex-var">Lexical Variable</a></li>
  <li><a href="#language-scope">Scope</a></li>
  <li><a href="#language-literal">Literal</a></li>
  <li><a href="#language-string">String</a></li>
  <li><a href="#language-undef">Undefined Value</a></li>
  <li><a href="#language-array">Array</a></li>
  <li><a href="#language-mulnum">Multi Numeric Value</a></li>
  <li><a href="#language-mulnum-array">Multi Numeric Array</a></li>
  <li><a href="#language-ref">Reference</a></li>
  <li><a href="#language-expression">Expression</a></li>
  <li><a href="#language-operator">Operator</a></li>
  <li><a href="#language-expression-operator-precedence">Operator Precidence</a></li>
  <li><a href="#language-Statement">Statement</a></li>
  <li><a href="#language-type">Type</a></li>
  <li><a href="#language-type-inference">Type Inference</a></li>
  <li><a href="#language-type-compatible">Type Compatibility</a></li>
  <li><a href="#language-type-convertion">Type Convertion</a></li>
  <li><a href="#language-exception">Exception Handling</a></li>
  <li><a href="#language-garbage-collection">Garbage Collection</a></li>
  <li><a href="#language-callback">Callback</a></li>
  <li><a href="#language-weak-ref">Weaken Reference</a></li>
  <li><a href="#language-limitation">Limitation</a></li>
</ul>
<h3 id="language-c99">C99 compliant</h3><!-- 2019/2/27 almost ok -->
<ul class="list">
  <li><a href="#language-c99-spec">C99 compliant compiler and runtime</a>
  <li><a href="#language-c99-type">Type correspondence with C99</a>
</ul>
<h4 id="language-c99-spec">C99 compliant compiler and runtime</h4><!-- 2019/2/27 almost ok -->
<p>
  The source code of the SPVM compiler and SPVM runtime is written in C and conforms to C99.
</p>
<p>
  Note that this does not mean that users cannot call the functions of C versions other than C99 (C11, GNU extensions, etc.) or call the functions of C++ from SPVM.
</p>
<p>
  This means that the SPVM compiler and runtime must be C99 compliant.
</p>
<h4 id="language-c99-type">Type correspondence with C99</h4><!-- 2019/2/27 almost ok -->
<p>
  SPVM types are exactly the same as the following C99 types:
</p>
<table>
  <tr>
    <th>
      <b> SPVM type </ b>
    </ th>
    <th>
      <b> C99 type </ b>
    </ th>
    <th>
      <b> Description </ b>
    </ th>
  </ tr>
  <tr>
    <td>
      <b> byte </ b>
    </ td>
    <td>
      int8_t
    </ td>
    <td>
      SPVM <a href="#language-type-byte"> byte type</a> matches C99 int8_t type.
    </ td>
  </ tr>
  <tr>
    <td>
      <b> short </ b>
    </ td>
    <td>
      int16_t
    </ td>
    <td>
      SPVM <a href="#language-type-short"> short type</a> matches the C99 int16_t type.
    </ td>
  </ tr>
  <tr>
    <td>
      <b> int </ b>
    </ td>
    <td>
      int32_t
    </ td>
    <td>
      SPVM <a href="#language-type-int">int Type</a> matches the C99 int32_t type.
    </ td>
  </ tr>
  <tr>
    <td>
      <b> long </ b>
    </ td>
    <td>
      int64_t
    </ td>
    <td>
      SPVM <a href="#language-type-long"> long type</a> matches C99 int64_t type.
    </ td>
  </ tr>
<tr>
    <td>
      <b> float </ b>
    </ td>
    <td>
      float
    </ td>
    <td>
      SPVM <a href="#language-type-float"> float type</a> matches the C99 float type.
    </ td>
  <tr>
    <td>
      <b> double </ b>
    </ td>
    <td>
      double
    </ td>
    <td>
      SPVM <a href="#language-type-double"> double type</a> matches C99 double.
    </ td>
  </ tr>
  <tr>
    <td>
      <b> Object type </ b>
    </ td>
    <td>
      void*
    </ td>
    <td>
      SPVM <a href="#language-type-object"> Object Type</a> matches the C99 void* type.
    </ td>
  </ tr>        
  <tr>
    <td>
      <b> Multiple Numeric Type </ b>
    </ td>
    <td>
      Numeric Array Type that matches the type and length in SPVM multiple Numeric Type fields
    </ td>
    <td>
      <p>
        For example, if SPVM <a href="#language-type-multi-numeric">multiple Numeric Type</a>
      </ p>
      <p>
        <b>package Point_2i: mulnum_t {has x: int; has y: int;}</b>
      </ p>
      <p>
        matches the type declared in C99
      </ p>
      <p>
        <b>int32_t var[2];</b>
      </p>
    </ td>
  </ tr>
</table>
<h3 id="language-lex">Lexical Analysis</h3>
<p>
  This topic specifies the Lexical Analysis of the SPVM language.
</p>
<ul class="list">
  <li><a href="#language-lex-lalr">LALR(1)</a>
  <li><a href="#language-lex-charset">Character Set</a>
  <li><a href="#language-lex-component">Component</a>
  <li><a href="#language-lex-line-terminator">Line Terminater</a>
  <li><a href="#language-lex-space-character">Space Character</a>
  <li><a href="#language-lex-identifier">Identifiers</a>
  <li><a href="#language-lex-separator">Separator</a></li>
  <li><a href="#language-lex-separator-fat-comma">Fat Comma</a></li>
  <li><a href="#language-lex-operator">Operator</a>
  <li><a href="#language-lex-syntax-definition">Syntax Definition</a></li>
</ul>
<h4 id="language-lex-lalr">LALR(1)</h4><!-- 2019/2/27 almost ok -->
<p>
  SPVM language can be analyzed by the LALR(1). It can be parsed by the parser generator generated by yacc/bison.
</p>
<h4 id="language-lex-lalr">Character Set</h4>
<p>
  SPVM programs are written in UTF-8.
</p>
<h4 id="language-lex-component">Component</h4><!-- 2019/2/27 almost ok -->
<p>
  Component in SPVM is <a href="#language-lex-space-character">Space Character</a>,<a href="#language-comment">Comment</a>, <a href="#language-pod">POD</a>, <a href="#language-literal">Literal</a>, <a href="#language-lex-identifier">Identifier</a>, <a href="#language-lex-keyword">Keyword</a>, <a href="#language-lex-separator">Separator</a>, or <a href="#language-lex-operator">Operator</a>.
</p>
<h4 id="language-lex-line-terminator">Line Terminator</h4><!-- 2019/7/1 check -->
<p>
  Line Terminator in SPVM are ASCII Code "LF", "CR", "CRLF".
</p>
<p>
  When a line terminator appears, the line number is incremented.Line Terminator in a program is converted to ASCII Code "LF".
</p>
<h4 id="language-lex-space-character">Space Character</h4><!-- 2019/2/27 almost ok -->
<p>
  Space Character in SPVM is ASCII Code "SP", "HT", "FF" or <a href="#language-lex-line-terminator">Line Terminator</a>.
</p>
<p>
  Space Character has no meaning in the program execution.
</p>
<h4 id="language-lex-identifier">Identifiers</h4><!-- 2019/2/27 maybe ok -->
<p>
  Identifiers in SPVM are <a href="#language-lex-identifier-package-name">Package Name</a>, <a href="#language-lex-identifier-sub-name">Subroutine Name</a>, <a href="#language-lex-identifier-field-name">Field Name</a>, <a href="#language-lex-identifier-package-var-name">Package Variable Name</a>, and <a href="#language-lex-identifier-lex-var-name">Lexical Variable Name</a>.
</p>
<h4 id="language-lex-identifier-package-name">Package Name</h4><!-- 2019/2/27 almost ok -->
<p>
  Package Name is one or more alphabet(a-zA-Z), number(0-9), underscore(_) or "::" of ASCII Code.
</p>
<p>
  It is not necessary to include "::" in the Package Name.
</p>
<p>
  Package Name must start a uppercase letter in ASCII Code
</p>
<p>
  "::" cannot be continued twice. Last characters cannot end with "::".
</p>
<p>
  Underscore cannot be continued twice.
</p>
<pre>
# Valid Package Name
Foo
Foo::Bar
Foo::Bar::Baz3
Foo::bar
Foo_Bar::Baz_Baz

# Invalid Package Name
foo
_Foo
Foo::Bar::
Foo__Bar
</pre>
<p>
  If Package Name is invalid, a compile-time error occurs.
</p>
<h4 id="language-lex-identifier-sub-name">Subroutine Name</h4><!-- 2019/2/27 almost ok -->
<p>
  Subroutine Name is one or more alphabet(a-zA-Z), number(0-9), or underscore(_) of ASCII Code.
</p>
<p>
  First character must not number character.
</p>
<p>
  Underscore cannot be continued twice.
</p>
<pre>
# Valid Subroutine Name
FOO
FOO_BAR3
foo
foo_bar
_foo
_foo_bar_

# Invalid Subroutine Name
foo__bar
</pre>
<h4 id="language-lex-identifier-field-name">Field Name</h4><!-- 2019/2/27 almost ok -->
<p>
  Field Name is one or more alphabet(a-zA-Z), number(0-9), or underscore(_) of ASCII Code.
</p>
<p>
  First character must not number character.
</p>
  
<p>
  Underscore cannot be continued twice.
</p>
<pre>
# Valid Field Name
FOO
FOO_BAR3
foo
foo_bar
_foo
_foo_bar_

# Invalid Field Name
3foo
foo__bar
</pre>
<h4 id="language-lex-identifier-package-var-name">Package Variable Name</h4><!-- 2019/2/27 maybe ok -->
<p>
  Package Variable Name starts with "$", followed more alphabet(a-zA-Z), number(0-9), underscore(_) or "::" of ASCII Code.
</p>
<p>
  Followed character must not start with number.
</p>
<p>
  "::" cannot be continued twice. Last characters cannot end with "::".
</p>
<p>
  Underscore cannot be continued twice.
</p>
<pre>
# Valid Package Variable Name
$FOO::BAR
$Foo::Bar3
$FOO
$FOO_BAR
$foo

# Invalid Package Variable Name
$FOO__BAR
$3FOO
</pre>
<h4 id="language-lex-identifier-lex-var-name">Lexical Variable Name</h4><!-- 2019/2/27 maybe ok -->
<p>
  Lexical Variable Name starts with "$", followed more alphabet characters of ASCII Code.
</p>
<p>
  Followed character must not start with number.
</p>
<p>
  Underscore cannot be continued twice.
</p>
<pre>
# Valid Lexical Variable Name
$foo
$foo_bar3
$_foo
$FOO

# Invalid Lexical Variable Name
$foo__bar
$3foo
</pre>
<h4 id="language-lex-keyword">Keywords</h4><!-- 2019/2/27 maybe ok -->
<p>
  Keywords in SPVM are the followings.
</p>
<pre>
allow byte BEGIN case die warn print default double elsif else enum eq
eval for float gt ge has if callback_t isa int last break length
lt le long my native ne next new our object package private
public precompile pointer_t return require rw ro self switch
sub string short scalar undef unless use void mulnum_t while
weaken wo __END__ __PACKAGE__ __FILE__ __LINE__
</pre>
<h4 id="language-lex-separator">Separators</h4><!-- 2019/2/27 almost ok -->
<p>
  Separators in SPVM are the followings.
</p>
<pre>
( ) { } [ ] ; , -&gt; =&gt;
</pre>
<h4 id="language-lex-separator-fat-comma">Fat Comma</h4>
<p>
  Fat Comma is a <a href="#language-lex-separator">Separator</a> represented by "<b>=></b>".
</p>
<pre>
=&gt;
</pre>
<p>
  Fat Comma is an alias for Comma "<b>,</b>". Wherever you can use "<b>,</b>" you can use Fat Comma instead.
</p>
<pre>
# Comma
["a", "b", "c", "d"]

# Use Fat Comma instead of Comma
["a" =&gt; "b", "c" =&gt; "d"]
</pre>
<p>
  Identifiers other than <a href="#language-lex-identifier-package-var-name">Package Variable Name</a> and <a href="#language-lex-identifier-lex-var-name">Lexical Variable Name</a> placed on the left of Fat Comma are treated as <a href="#language-literal-string">String Literal</a>.
</p>
<pre>
# Identifiers placed on the left of Fat Comma are treated as String Literal
# a is "a", c is "c"
[a =&gt; "b", c =&gt; "d"]
</pre>
<h4 id="language-lex-operator">Operators</h4><!-- 2019/2/27 almost ok -->
<p>
  Operators in SPVM are the followings.
</p>
<pre>
=   &gt;   &lt;   !   ~
==  &lt;=  &gt;=  !=  &amp;&amp;  ||  ++  --
+   -   *   /   &amp;   |   ^   %   &lt;&lt;   &gt;&gt;   &gt;&gt;&gt;
+=  -=  *=  /=  &amp;=  |=  ^=  %=  &lt;&lt;=  &gt;&gt;=  &gt;&gt;&gt;=
\   $   @   .   .=
</pre>
<h3 id="language-parsing">Syntax Parsing</h3>
<h4 id="language-parsing-syntax-definition">Syntax Parsing Definition</h4><!-- 2019/2/27 not ok -->
<p>
  The following is Syntax Parsing Definition in SPVM, using the syntax in yacc/bison. 
</p>
<pre>
%token &lt;opval&gt; PACKAGE HAS SUB OUR ENUM MY SELF USE REQUIRE ALLOW
%token &lt;opval&gt; DESCRIPTOR
%token &lt;opval&gt; IF UNLESS ELSIF ELSE FOR WHILE LAST NEXT SWITCH CASE DEFAULT BREAK EVAL
%token &lt;opval&gt; NAME VAR_NAME CONSTANT EXCEPTION_VAR
%token &lt;opval&gt; UNDEF VOID BYTE SHORT INT LONG FLOAT DOUBLE STRING OBJECT
%token &lt;opval&gt; DOT3 FATCAMMA RW RO WO BEGIN NEW
%token &lt;opval&gt; RETURN WEAKEN DIE WARN CURRENT_PACKAGE UNWEAKEN '[' '{' '('

%type &lt;opval&gt; grammar
%type &lt;opval&gt; opt_packages packages package package_block refcnt
%type &lt;opval&gt; opt_declarations declarations declaration
%type &lt;opval&gt; enumeration enumeration_block opt_enumeration_values enumeration_values enumeration_value
%type &lt;opval&gt; sub cb_obj opt_args args arg invocant has use require our string_length
%type &lt;opval&gt; opt_descriptors descriptors sub_names opt_sub_names
%type &lt;opval&gt; opt_Statements Statements Statement if_Statement else_Statement 
%type &lt;opval&gt; for_Statement while_Statement switch_Statement case_Statement default_Statement
%type &lt;opval&gt; block eval_block begin_block switch_block if_require_Statement
%type &lt;opval&gt; unary_op binary_op num_comparison_op str_comparison_op isa logical_op
%type &lt;opval&gt; call_sub opt_vaarg
%type &lt;opval&gt; array_access field_access weaken_field unweaken_field isweak_field convert array_length
%type &lt;opval&gt; deref ref assign inc dec allow
%type &lt;opval&gt; new array_init
%type &lt;opval&gt; my_var var
%type &lt;opval&gt; expression opt_expressions expressions opt_expression case_Statements
%type &lt;opval&gt; field_name sub_name
%type &lt;opval&gt; type basic_type array_type array_type_with_length ref_type  type_or_void

%right &lt;opval&gt; ASSIGN SPECIAL_ASSIGN
%left &lt;opval&gt; LOGICAL_OR
%left &lt;opval&gt; LOGICAL_AND
%left &lt;opval&gt; BIT_OR BIT_XOR
%left &lt;opval&gt; '&amp;'
%nonassoc &lt;opval&gt; NUMEQ NUMNE STREQ STRNE
%nonassoc &lt;opval&gt; NUMGT NUMGE NUMLT NUMLE STRGT STRGE STRLT STRLE ISA
%left &lt;opval&gt; SHIFT
%left &lt;opval&gt; '+' '-' '.'
%left &lt;opval&gt; MULTIPLY DIVIDE REMAINDER
%right &lt;opval&gt; LOGICAL_NOT BIT_NOT '@' REF DEREF PLUS MINUS CONVERT SCALAR LENGTH ISWEAK REFCNT
%nonassoc &lt;opval&gt; INC DEC
%left &lt;opval&gt; ARROW

%%

grammar
: opt_packages

opt_packages
:	/* Empty */
|	packages

packages
: packages package
| package

package
: PACKAGE basic_type package_block
| PACKAGE basic_type ':' opt_descriptors package_block
| PACKAGE basic_type ';'
| PACKAGE basic_type ':' opt_descriptors ';'

package_block
: '{' opt_declarations '}'

opt_declarations
:	/* Empty */
|	declarations

declarations
: declarations declaration
| declaration

declaration
: has
| sub
| enumeration
| our ';'
| use
| allow
| begin_block

begin_block
: BEGIN block

use
: USE basic_type ';'
| USE basic_type '(' opt_sub_names ')' ';'

require
: REQUIRE basic_type

allow
: ALLOW basic_type ';'

enumeration
: opt_descriptors ENUM enumeration_block

enumeration_block 
: '{' opt_enumeration_values '}'

opt_enumeration_values
:	/* Empty */
|	enumeration_values

enumeration_values
: enumeration_values ',' enumeration_value 
| enumeration_values ','
| enumeration_value

enumeration_value
: sub_name
| sub_name ASSIGN CONSTANT

our
: OUR PACKAGE_VAR_NAME ':' opt_descriptors type

has
: HAS field_name ':' opt_descriptors type ';'

sub
: opt_descriptors SUB sub_name ':' type_or_void '(' opt_args opt_vaarg')' block
| opt_descriptors SUB sub_name ':' type_or_void '(' opt_args opt_vaarg')' ';'

cb_obj
: opt_descriptors SUB ':' type_or_void '(' opt_args opt_vaarg')' block
| '[' args ']' opt_descriptors SUB ':' type_or_void '(' opt_args opt_vaarg')' block

opt_args
:	/* Empty */
|	args
| invocant
| invocant ',' args

args
: args ',' arg
| args ','
| arg

arg
: var ':' type

opt_vaarg
: /* Empty */
| DOT3

invocant
: var ':' SELF

opt_descriptors
:	/* Empty */
|	descriptors

descriptors
: descriptors DESCRIPTOR
| DESCRIPTOR

opt_Statements
:	/* Empty */
|	Statements

Statements
: Statements Statement 
| Statement

Statement
: if_Statement
| for_Statement
| while_Statement
| block
| switch_Statement
| case_Statement
| default_Statement
| eval_block
| if_require_Statement
| expression ';'
| LAST ';'
| NEXT ';'
| RETURN ';'
| RETURN expression ';'
| DIE ';'
| DIE expression ';'
| WARN ';'
| WARN expression ';'
| PRINT expression ';'
| weaken_field ';'
| unweaken_field ';'
| ';'

for_Statement
: FOR '(' opt_expression ';' expression ';' opt_expression ')' block

while_Statement
: WHILE '(' expression ')' block

switch_Statement
: SWITCH '(' expression ')' switch_block

switch_block
: '{' case_Statements '}'
| '{' case_Statements default_Statement '}'

case_Statements
: case_Statements case_Statement
| case_Statement

case_Statement
: CASE expression ':' block
| CASE expression ':'

default_Statement
: DEFAULT ':' block
| DEFAULT ':'

if_require_Statement
: IF '(' require ')' block
| IF '(' require ')' block ELSE block

if_Statement
: IF '(' expression ')' block else_Statement
| UNLESS '(' expression ')' block else_Statement

else_Statement
: /* NULL */
| ELSE block
| ELSIF '(' expression ')' block else_Statement

block 
: '{' opt_Statements '}'

eval_block
: EVAL block ';'

opt_expressions
:	/* Empty */
|	expressions

opt_expression
: /* Empty */
| expression

expression
: var
| EXCEPTION_VAR
| package_var_access
| CONSTANT
| UNDEF
| call_sub
| field_access
| array_access
| convert
| new
| array_init
| array_length
| string_length
| refcnt
| my_var
| binary_op
| unary_op
| ref
| deref
| assign
| inc
| dec
| '(' expressions ')'
| CURRENT_PACKAGE
| isweak_field
| num_comparison_op
| str_comparison_op
| isa
| logical_op

refcnt
: REFCNT var
expressions
: expressions ',' expression
| expressions ','
| expression

unary_op
: '+' expression %prec PLUS
| '-' expression %prec MINUS
| BIT_NOT expression

inc
: INC expression
| expression INC

dec
: DEC expression
| expression DEC

binary_op
: expression '+' expression
| expression '-' expression
| expression MULTIPLY expression
| expression DIVIDE expression
| expression REMAINDER expression
| expression BIT_XOR expression
| expression '&amp;' expression
| expression BIT_OR expression
| expression SHIFT expression
| expression '.' expression

num_comparison_op
: expression NUMEQ expression
| expression NUMNE expression
| expression NUMGT expression
| expression NUMGE expression
| expression NUMLT expression
| expression NUMLE expression

str_comparison_op
: expression STREQ expression
| expression STRNE expression
| expression STRGT expression
| expression STRGE expression
| expression STRLT expression
| expression STRLE expression

isa
: expression ISA type

logical_op
: expression LOGICAL_OR expression
| expression LOGICAL_AND expression
| LOGICAL_NOT expression

assign
: expression ASSIGN expression
| expression SPECIAL_ASSIGN expression

new
: NEW basic_type
| NEW array_type_with_length
| cb_obj

array_init
: '[' opt_expressions ']'

convert
: '(' type ')' expression %prec CONVERT

array_access
: expression ARROW '[' expression ']'
| array_access '[' expression ']'
| field_access '[' expression ']'

call_sub
: NAME '(' opt_expressions  ')'
| basic_type ARROW sub_name '(' opt_expressions  ')'
| basic_type ARROW sub_name
| expression ARROW sub_name '(' opt_expressions ')'
| expression ARROW sub_name
| expression ARROW '(' opt_expressions ')'

field_access
: expression ARROW '{' field_name '}'
| field_access '{' field_name '}'
| array_access '{' field_name '}'

weaken_field
: WEAKEN var ARROW '{' field_name '}'

unweaken_field
: UNWEAKEN var ARROW '{' field_name '}'

isweak_field
: ISWEAK var ARROW '{' field_name '}'

array_length
: '@' expression
| '@' '{' expression '}'
| SCALAR '@' expression
| SCALAR '@' '{' expression '}'

string_length
: LENGTH expression

deref
: DEREF var

ref
: REF var

my_var
: MY var ':' type
| MY var

var
: VAR_NAME

package_var_access
: PACKAGE_VAR_NAME

type
: basic_type
| array_type
| ref_type

basic_type
: NAME
| BYTE
| SHORT
| INT
| LONG
| FLOAT
| DOUBLE
| OBJECT
| STRING

ref_type
: basic_type '&amp;'
array_type
: basic_type '[' ']'
| array_type '[' ']'

array_type_with_length
: basic_type '[' expression ']'
| array_type '[' expression ']'

type_or_void
: type
| VOID

field_name
: NAME

sub_name
: NAME

opt_sub_names
:	/* Empty */
|	sub_names

sub_names
: sub_names ',' sub_name
| sub_names ','
| sub_name
%%
</pre>
<p>
  The following is a correspondence table between tokens in yacc/bison and keywords and operators in SPVM.
</p>
<table>
  <tr>
    <th>Tokens in yacc/bison</th><th>Keywords and Operators in SPVM</th>
  </tr>
  <tr>
    <td>PACKAGE</td><td>package</td>
  </tr>
  <tr>
    <td>SUB</td><td>sub</td>
  </tr>
  <tr>
    <td>OUR</td><td>our</td>
  </tr>
  <tr>
    <td>ENUM</td><td>enum</td>
  </tr>
  <tr>
    <td>MY</td><td>my</td>
  </tr>
  <tr>
    <td>SELF</td><td>self</td>
  </tr>
  <tr>
    <td>USE</td><td>use</td>
  </tr>
  <tr>
    <td>REQUIRE</td><td>require</td>
  </tr>
  <tr>
    <td>ALLOW</td><td>allow</td>
  </tr>
  <tr>
    <td>DESCRIPTOR</td><td>descriptor</td>
  </tr>
  <tr>
    <td>IF</td><td>if</td>
  </tr>
  <tr>
    <td>UNLESS</td><td>unless</td>
  </tr>
  <tr>
    <td>ELSIF</td><td>elsif</td>
  </tr>
  <tr>
    <td>ELSE</td><td>else</td>
  </tr>
  <tr>
    <td>FOR</td><td>for</td>
  </tr>
  <tr>
    <td>WHILE</td><td>while</td>
  </tr>
  <tr>
    <td>LAST</td><td>last</td>
  </tr>
  <tr>
    <td>BREAK</td><td>break</td>
  </tr>
  <tr>
    <td>NEXT</td><td>next</td>
  </tr>
  <tr>
    <td>SWITCH</td><td>switch</td>
  </tr>
  <tr>
    <td>CASE</td><td>case</td>
  </tr>
  <tr>
    <td>DEFAULT</td><td>default</td>
  </tr>
  <tr>
    <td>EVAL</td><td>eval</td>
  </tr>
  <tr>
    <td>NAME</td><td>name</td>
  </tr>
  <tr>
    <td>VAR</td><td>var</td>
  </tr>
  <tr>
    <td>CONSTANT</td><td>Literal </td>
  </tr>
  <tr>
    <td>PACKAGE_VAR_NAME</td><td>Package Variable Name</td>
  </tr>
  <tr>
    <td>EXCEPTION_VAR</td><td>$@</td>
  </tr>
  <tr>
    <td>UNDEF</td><td>undef</td>
  </tr>
  <tr>
    <td>VOID</td><td>void</td>
  </tr>
  <tr>
    <td>BYTE</td><td>byte</td>
  </tr>
  <tr>
    <td>SHORT</td><td>short</td>
  </tr>
  <tr>
    <td>INT</td><td>int</td>
  </tr>
  <tr>
    <td>LONG</td><td>long</td>
  </tr>
  <tr>
    <td>FLOAT</td><td>float</td>
  </tr>
  <tr>
    <td>DOUBLE</td><td>double</td>
  </tr>
  <tr>
    <td>STRING</td><td>string</td>
  </tr>
  <tr>
    <td>OBJECT</td><td>object</td>
  </tr>
  <tr>
    <td>DOT3</td><td>...</td>
  </tr>
  <tr>
    <td>FATCAMMA</td><td>=></td>
  </tr>
  <tr>
    <td>RW</td><td>rw</td>
  </tr>
  <tr>
    <td>RO</td><td>ro</td>
  </tr>
  <tr>
    <td>WO</td><td>wo</td>
  </tr>
  <tr>
    <td>BEGIN</td><td>BEGIN</td>
  </tr>
  <tr>
    <td>NEW</td><td>new</td>
  </tr>
  <tr>
    <td>RETURN</td><td>return</td>
  </tr>
  <tr>
    <td>WEAKEN</td><td>weaken</td>
  </tr>
  <tr>
    <td>DIE</td><td>die</td>
  </tr>
  <tr>
    <td>WARN</td><td>warn</td>
  </tr>
  <tr>
    <td>PRINT</td><td>print</td>
  </tr>
  <tr>
    <td>CURRENT_PACKAGE</td><td>__PACKAGE__</td>
  </tr>
  <tr>
    <td>UNWEAKEN</td><td>unweaken</td>
  </tr>
  <tr>
    <td>ASSIGN</td><td>=</td>
  </tr>
  <tr>
    <td>SPECIAL_ASSIGN</td><td>+=  -=  *=  /=  &=  |=  ^=  %=  &lt;&lt;=  &gt;&gt;=  &gt;&gt;&gt;= .=</td>
  </tr>
  <tr>
    <td>LOGICAL_OR</td><td>||</td>
  </tr>
  <tr>
    <td>LOGICAL_AND</td><td>&&</td>
  </tr>
  <tr>
    <td>BIT_OR</td><td>|</td>
  </tr>
  <tr>
    <td>BIT_XOR</td><td>&</td>
  </tr>
  <tr>
    <td>NUMEQ</td><td>==</td>
  </tr>
  <tr>
    <td>NUMNE</td><td>!=</td>
  </tr>
  <tr>
    <td>STREQ</td><td>eq</td>
  </tr>
  <tr>
    <td>STRNE</td><td>ne</td>
  </tr>
  <tr>
    <td>NUMGT</td><td>&gt;</td>
  </tr>
  <tr>
    <td>NUMGE</td><td>&gt;=</td>
  </tr>
  <tr>
    <td>NUMLT</td><td>&lt;</td>
  </tr>
  <tr>
    <td>NUMLE</td><td>&lt;=</td>
  </tr>
  <tr>
    <td>STRGT</td><td>gt</td>
  </tr>
  <tr>
    <td>STRGE</td><td>ge</td>
  </tr>
  <tr>
    <td>STRLT</td><td>lt</td>
  </tr>
  <tr>
    <td>STRLE</td><td>le</td>
  </tr>
  <tr>
    <td>ISA</td><td>isa</td>
  </tr>
  <tr>
    <td>SHIFT</td><td>&lt;&lt;  &gt;&gt;  &gt;&gt;&gt;</td>
  </tr>
  <tr>
    <td>MULTIPLY</td><td>*</td>
  </tr>
  <tr>
    <td>DIVIDE</td><td>/</td>
  </tr>
  <tr>
    <td>REMAINDER</td><td>%</td>
  </tr>
  <tr>
    <td>LOGICAL_NOT</td><td>!</td>
  </tr>
  <tr>
    <td>BIT_NOT</td><td>~</td>
  </tr>
  <tr>
    <td>REF</td><td>\</td>
  </tr>
  <tr>
    <td>DEREF</td><td>$</td>
  </tr>
  <tr>
    <td>PLUS</td><td>+</td>
  </tr>
  <tr>
    <td>MINUS</td><td>-</td>
  </tr>
  <tr>
    <td>CONVERT</td><td>(TypeName)</td>
  </tr>
  <tr>
    <td>SCALAR</td><td>scalar</td>
  </tr>
  <tr>
    <td>LENGTH</td><td>length</td>
  </tr>
  <tr>
    <td>ISWEAK</td><td>isweak</td>
  </tr>
  <tr>
    <td>REFCNT</td><td>refcnt</td>
  </tr>
  <tr>
    <td>INC</td><td>++</td>
  </tr>
  <tr>
    <td>DEC</td><td>--</td>
  </tr>
  <tr>
    <td>ARROW</td><td>-></td>
  </tr>
</table>
<h3 id="language-comment">Comment</h3>
<p>
  Comment begins with "#" and ends with <a href="#language-lex-line-terminator">Line Terminator</a>.
</p>
<pre>
# Comment
</pre>
<p>
  Comment has no meaning in the program execution.
</p>
<h3 id="language-pod">POD</h3>
<p>
  POD(Plain Old Document) is a syntax to write documents easily.
</p>
<p>
  You can use POD as Multi-Line comments.
</p>
<p>
  POD starts from the line beginning with "=", followed by any character string of one or more characters, and ending with <a href="#language-lex-line-terminator">Line Terminator</a>.
</p>
<p>
  POD ends from the line beginning with "=cut", and ending with <a href="#language-lex-line-terminator">Line Terminator</a>.
</p>
<p>
  <b>POD Example:</b>
</p>
<pre>
=pod

Multi-Line
Comment

=cut
</pre>
<pre>
=head1

Multi-Line
Comment

=cut
</pre>
<p>
  POD has no meaning in the program execution.
</p>
<h3 id="language-package">Package</h3>
<ul class="list">
  <li><a href="#language-package-definition">Package Definition</a></li>
  <li><a href="#language-package-descriptor">Package Descriptor</a></li>
  <li><a href="#language-package-destructor">Destructor</a></li>
  <li><a href="#language-package-allow-package-access">Allow Package Access</a></li>
</ul>
<h4 id="language-package-definition"><a href="#language-package-definition">Package Definition</a></h4>
<p>
  <b>Package Definition</b> is the following syntax.
</p>
<pre>
package PACAKGE_NAME {

}
</pre>
<p>
  PACAKGE_NAME must follow the rule for <a href="#language-lex-identifier-package-name">Package Name</a>.
</p>
<p>
  <a href="#language-package-descriptor">Package Descriptor</a> can be specified by the following syntax.
</p>
<pre>
package PACAKGE_NAME : PACAKGE_DESCRIPTOR {

}

package PACAKGE_NAME : PACAKGE_DESCRIPTOR1 PACAKGE_DESCRIPTOR2 PACAKGE_DESCRIPTORN {

}
</pre>
<p>
  <b>Package Definition Example:</b>
</p>
<pre>
# Package Name
package Point {

}
</pre>
<pre>
# Package Name and Package Descriptor
package Point : public {

}
</pre>
<p>
  In direct children of the package block, <a href="#language-module-use">use</a>, <a href="#language-package-var-definition">our</a>, <a href="#language-field-definition">has</a>, <a href="#language-enum-definition">enum</a>, <a href="#language-sub-definition">sub</a> can be defined.
</p>
<pre>
package Foo {
  # use
  use Point;

  # Package Variable Definition
  our $VAR int;

  # Field Defintion
  has var : int;

  # Enumeration Definition
  enum {
    CONST_VAL1,
    CONST_VAL2,
  }

  # Subroutine Definition
  sub foo : int ($num : int) {

  }
}
</pre>
<p>
  If more than one package with the same name is defined, a compile-time error occurs.
</p>
<h4 id="language-package-descriptor">Package Descriptor</h4>
<p>
  The descriptions of Package Descriptors.
</p>
<table>
  <tr>
    <th>
      Descriptor
    </th>
    <th>
      Meaning
    </th>
  </tr>
  <tr>
    <td>
      <b>public</b>
    </td>
    <td>
      This package is public. Other packages can <a href="#language-expression-new">new</a> this package.
    </td>
  </tr>
  <tr>
    <td>
      <b>private</b>
    </td>
    <td>
      This package is private. Other packages can't <a href="#language-expression-new">new</a> this package. This is default setting.
    </td>
  </tr>
  <tr>
    <td>
      <b>callback_t</b>
    </td>
    <td>
      This package is <a href="#language-type-callback">Callback Type</a>.
    </td>
  </tr>
  <tr>
    <td>
      <b>mulnum_t</b>
    </td>
    <td>
      This package is <a href="#language-type-multi-numeric">Multi Numeric Type</a>.
    </td>
  </tr>
  <tr>
    <td>
      <b>pointer_t</b>
    </td>
    <td>
      This package is <a href="#language-type-pointer">Pointer Type</a>.
    </td>
  </tr>
</table>
<p>
  If both "public" and "private" are specifed, a compile-time error occurs.
</p>
<p>
  If more than one of "callback_t", "mulnum_t", "pointer_t" are specified, a compile-time error occurs.
</p>
<h4 id="language-package-destructor">Destructor</h4>
<p>
  If the package is <a href="#language-type-class">Class Type</a>, the package defined a destructor.
</p>
<p>
  Destructor is a special <a href="#language-sub">Subroutine</a> called when the object of this class is freed.
</p>
<p>
  Destructor name must be "DESTROY".
</p>
<p>
  Destructor Retrun Value must be <a href="#language-type-void">void Type</a>, otherwise a compile-time error occurs.
</p>
<p>
  Destructor arguments must be one and the type must be <a href="#language-type-self">self Type</a>, otherwise a compile-time error occurs.
</p>
<pre>
sub DESTROY : void ($self : self) {

}
</pre>
<p>
  If a <a href="#language-exception-occur">Exception</a> occurs in Destructor, the program don't exit, print the message of the exception to STDERR.
</p>
<p>
  <b>Destructor Example:</b>
</p>
<pre>
package Foo {
  sub new : Foo {
    return new Foo;
  }

  sub DESTROY : void ($self : self) {
    print "DESTROY";
  }
}
</pre>
<h4 id="language-package-allow-package-access">Allow Package Access</h4>
<p>
  By default, private Subroutines, Fields, and Package Variables cannot be accessed from outside the Package.
</p>
<p>
  Also, Private Package cannot <a href="#language-expression-new">Create Object</a> from outside of Package.
</p>
<p>
  If the package allow other package, the other package can access private Subroutines, Fields, and Package Variables, and can <a href="#language-expression-new">Create Object</a> of the package.
</p>
<pre>
allow PACKAGE_NAME;
</pre>
<p>
  allow must be defined directory under <a href="#language-package-definition">Package Definition</a>.
</p>
<pre>
package Foo {
  allow Bar;
}
</pre>
<p>
  In this example, Bar can access the private Subroutine, Field, and Package Variable of Foo can be accessed and can Create Object of Foo.
</p>
<p>
  Specifying the module of <b>allow</b> also loads the module by <a href="#language-module-use">use</a> at the same time.
</p>
<h3 id="language-module">Module</h3>
<ul class="list">
  <li><a href="#language-module-summary">Module Summary</a></li>
  <li><a href="#language-module-file-name">Module File Name</a></li>
  <li><a href="#language-module-use">Load Module</a></li>
  <li><a href="#language-module-auto-loaded-module">Automatically Loaded Module</a></li>
  <li><a href="#language-module-if-require">Selective Load Module</a></li>
</ul>
<h4 id="language-module-summary">Module Summary</h4>
<p>
  Module is a single file that can be read as SPVM source code.
</p>
<pre>
# lib/path/Foo/Bar.spvm
package Foo::Bar {

}
</pre>
<p>
  Module can contain multiple Packages.
</p>
<pre>
# lib/path/Foo/Bar.spvm
package Foo::Bar {

}

package Foo::Bar::Baz {

}
</pre>
<h4 id="language-module-file-name">Module File Name</h4>
<p>
  Modules must be placed in the module loading path with the following File Name.
</p>
<p>
  Change "::" to "/". Add ".spvm" at the end.
</p>
<pre>
Foo.spvm
Foo/Bar.spvm
Foo/Bar/Baz.spvm
</pre>
<h4 id="language-module-use">Load Module</h4>
<p>
  Use <b>use</b> keyword to load a Module.
</p>
<pre>
use Foo;
use Foo::Bar;
</pre>
<p>
  Modules are loaded at compile-time.
</p>
<p>
  If the Module does not exist, a compile-time error will occur.
</p>
<p>
  use Keyword must be defined directly under <a href="#language-package-definition">Package Definition</a>.
</p>
<pre>
package Foo {
  use Foo;
}
</pre>
<h4 id="language-module-auto-loaded-module">Automatically Loaded Module</h4>
<p>
  The followings are Automatically Loaded Modules. They can be used without <a href="#language-module-use">use</a>.
</p>
<ul class="list">
  <li>SPVM::Byte</li>
  <li>SPVM::Short</li>
  <li>SPVM::Int</li>
  <li>SPVM::Long</li>
  <li>SPVM::Float</li>
  <li>SPVM::Double</li>
</ul>
<h4 id="language-module-if-require">Load Module Selective</h4>
<p>
  In SPVM, there is an if require Statement that loads a Module only if it exists in the module path, and if it does not exist, the block does not exist.
</p>
<p>
  It was designed to implement a part of features of "#ifdef" in C language.
</p>
<pre>
if (require Foo) {

}
</pre>
<p>
  if require Statement can be followed by else Statement. 
</p>
<pre>
if (require Foo) {

}
else {

}
</pre>
<p>
  Note that elsif Statement cannot be followed.
</p>
<p>
  Let's look at an example. if Foo does not exist, no compile-time error occurs and it is assumed that there is no if block
</p>
<p>
  Therefore, "$foo = new Foo;" does not result in a compile-time error because it is assumed that there is no if block.
</p>
<p>
  In the other hand, the else block exists, so a warning is issued.
</p>
<pre>
my $foo : object;
if (require Foo) {
  $foo = new Foo;
}
else {
  warn "Warning: Can't load Foo";
}
</pre>
<h3 id="language-package-var">Package Variable</h3>
<ul class="list">
  <li><a href="#language-package-var-definition">Package Variable Definition</a></li>
  <li><a href="#language-package-var-descriptor">Package Variable Descriptor</a></li>
  <li><a href="#language-package-var-initial-value">Package Variable Initial Value</a></li>
  <li><a href="#language-package-var-access">Package Variable Access</a></li>
</ul>
<h4 id="language-package-var-definition">Package Variable Definition</h4>
<p>
  <b>Package Variable</b> is a global variable that belongs to <a href="#language-package">Package</a> and exists from the start to the end of the program execution.
</p>
<p>
  "our" Keyword defines a Package Variable.
</p>
<pre>
our PACKAGE_VARIABLE_NAME : TYPE;
</pre>
<p>
  Package Variable must be defined directly under <a href="#language-package-definition">Package Definition</a>.
</p>
<p>
  Package Variable Definition must specify <a href="#language-type">Type</a>. The Type must be <a href="#language-type-numeric">Numeric Type</a> or <a href="#language-type-object">Object Type</a>.
</p>
<p>
  Package Variable Name must follows the rule specified in <a href="#language-lex-identifier-package-var-name">Package Variable Name</a>, and must not contain "::". Otherwise a compile-time error occurs.
</p>
<p>
  If more than one Package Variable with the same name is defined, a compile-time error occurs.
</p>
<p>
  Package Variable Descriptor can be specified together in Package Variable definition.
</p>
<pre>
our PACKAGE_VARIABLE_NAME : DESCRIPTOR TYPE;
our PACKAGE_VARIABLE_NAME : DESCRIPTOR1 DESCRIPTOR2 DESCRIPTORN TYPE;
</pre>
<h4 id="language-package-var-descriptor">Package Variable Descriptor</h4>
<p>
  List of Package Variable Descriptors.
</p>
<table>
  <tr>
    <th>
      Descriptor
    </th>
    <th>
      Description
    </th>
  </tr>
  <tr>
    <td>
      <b>public</b>
    </td>
    <td>
      This Package Variable is public. This Package Variable can be accessed from other package.
    </td>
  </tr>
  <tr>
    <td>
      <b>private</b>
    </td>
    <td>
      This Package Variable is private. This Package Variable can't be accessed from other package. This is default setting of Package Variable.
    </td>
  </tr>
  <tr>
    <td>
      <b>ro</b>
    </td>
    <td>
      This Package Variable has Read Accessor. Read Accessor name is the same as Package Variable Name except removing "$". For example, If the Package Variable Name is "$FOO", Read Accessor name is "FOO".
    </td>
  </tr>
  <tr>
    <td>
      <b>wo</b>
    </td>
    <td>
      This Package Variable has Write Accessor. Write Accessor name is the same as Package Variable Name except removing "$" and adding "SET_" to top. For example, If the Package Variable Name is "$FOO", Read Accessor name is "SET_FOO".
    </td>
  </tr>
  <tr>
    <td>
      <b>rw</b>
    </td>
    <td>
      This Package Variable has Read accessor and Write Accessor.
    </td>
  </tr>
</table>
<p>
  If both "public" and "private" Descriptors are specified, a compile-time error occurs.
</p>
<p>
  If more than one of "ro", "wo", and "rw" are specified at the same time, a compile-time error occurs
</p>
<p>
  Read Accessor of Package Variable has no arguments and the return type is same as the type of Package Variable.
</p>
<p>
  Write Acessor of Package Variable has one argument and the type is same as the type of Package Variable. The type of return value is <a href="#language-type-void">void Type</a>.
</p>
<p>
  Inline Expansion optimization is performed to Read Accessor and Write Accessor. You don't have to worry about the performance penalty of using Package Variable Accessors.
</p>
<p>
  <b>Package Variable Definition Example:</b>
</p>
<pre>
package Foo {
  our $NUM1 : byte;
  our $NUM2 : short;
  our $NUM3 : int;
  our $NUM4 : long;
  our $NUM5 : float;
  our $NUM6 : double;

  our $NUM_PUBLIC : public int;
  our $NUM_RO : ro int;
  our $NUM_WO : wo int;
  our $NUM_RW : rw int;
}
</pre>
<h4 id="language-package-var-initial-value">Package Variable Initial Value</h4>
<p>
  Package Variable is initialized with <a href="#language-type-initial-value">Type Initial Value</a> after compilation and before execution.
</p>
<p>
  This initial value can be changed by using <a href="#language-begin-block">BEGIN Block</a>.
</p>
<pre>
package Foo {
  our $VAR : int;

  BEGIN {
    $VAR = 3;
  }
}
</pre>
<h4 id="language-package-var-access">Package Variable Access</h4>
<p>
  Package Variable Access is an operation to access Package Variable to get or set a value.
</p>
<p>
  See <a href="#language-expression-get-package-var">Get Package Variable Value</a> for how to get the value of Package Variable.
</p>
<p>
  See <a href="#language-expression-set-package-var">Set Package Variable Value</a> for the setting of the value of Package Variable.
</p>
<h3 id="language-field">Field</h3>
<ul class="list">
  <li><a href="#language-field-definition">Field Definition</a></li>
  <li><a href="#language-field-descriptor">Field Descriptor</a></li>
  <li><a href="#language-field-access">Field Access</a></li>
</ul>
<h4 id="language-field-definition">Field Definition</h4>
<p>
  Field is a data area in a <a href="#language-expression-new">object created using new keyword</a>
</p>
<p>
  "has" Keyword defines a Field.
</p>
<pre>
has FIELD_NAME : TYPE;
</pre>
<p>
  Field must be defined directly under <a href="#language-package-definition">Package Definition</a>.
</p>
<p>
  Field Definition must be specify <a href="#language-type">Type</a>. The Type must be <a href="#language-type-numeric">Numeric Type</a> or <a href="#language-type-object">Object Type</a>.
</p>
<p>
  Field Name must follows the rule specified in <a href="#language-lex-identifier-field-name">Field Name</a>.
</p>
<p>
  Field Name is allowed as same as <a href="#language-lex-keyword">Keyword</a>.
</p>
<p>
  Field Type must be <a href="#language-type-numeric">Numeric Type</a> or <a href="#language-type-object">Object Type</a>, otherwise a compile-time error occurs.
</p>
<p>
  If more than one Field Name Variable with the same name is defined, a compile-time error occurs.
</p>
<p>
  Field Descriptor can be specified together in Field Definition.
</p>
<pre>
has FIELD_NAME : DESCRIPTOR TYPE_NAME;
has FIELD_NAME : DESCRIPTOR1 DESCRIPTOR2 DESCRIPTORN TYPE_NAME;
</pre>
<h4 id="language-field-descriptor">Field Descriptor</h4>
<p>
  List of Field Descriptors.
</p>
<table>
  <tr>
    <th>
      Descriptor
    </th>
    <th>
      Description
    </th>
  </tr>
  <tr>
    <td>
      <b>public</b>
    </td>
    <td>
      This field is public. This field can be accessed from other package.
    </td>
  </tr>
  <tr>
    <td>
      <b>private</b>
    </td>
    <td>
      This field is private. This field can't be accessed from other package. This is default setting.
    </td>
  </tr>
  <tr>
    <td>
      <b>ro</b>
    </td>
    <td>
      This Field has Read Accessor. Read Accessor name is the same as Field Name. For example, If the Field Name is "foo", Read Accessor name is "foo".
    </td>
  </tr>
  <tr>
    <td>
      <b>wo</b>
    </td>
    <td>
      This Field has Write Accessor. Write Accessor name is the same as Field Name adding "set_" to top. For example, If the Field Name is "foo", Read Accessor name is "set_foo".
    </td>
  </tr>
  <tr>
    <td>
      <b>rw</b>
    </td>
    <td>
      This Field has Read Accessor and Write Accessor.
    </td>
  </tr>
</table>
<p>
  If both "public" and "private" Descriptors are specified, a compile-time error occurs.
</p>
<p>
  If more than one of "ro", "wo", and "rw" are specified at the same time, a compile-time error occurs
</p>
<p>
  Read Accessor of Field has one argument that is <a href="#language-type-self">self Type</a> and the Return Type is same as the type of Field.
</p>
<p>
  Write Acessor of Package Variable has two arguments. First argument is <a href="#language-type-self">self Type</a> and second argument is same as the type of Field. The type of return value is <a href="#language-type-void">void Type</a>.
</p>
<p>
  Inline Expansion optimization is performed to Read Accessor and Write Accessor. You don't have to worry about the performance penalty of using Field Accessors.
</p>
<p>
  <b>Field Definition Example:</b>
</p>
<pre>
package Foo {
  has num1 : byte;
  has num2 : short;
  has num3 : int;
  has num4 : long;
  has num5 : float;
  has num6 : double;

  has num_public : public int;
  has num_ro : ro int;
  has num_wo : wo int;
  has num_rw : rw int;
}
</pre>
<h4 id="language-field-access">Field Access</h4>
<p>
  Field Access is an operation to access Field to get or set a value.
</p>
<pre>
EXPRESSION-&gt;{FIELD_NAME}
</pre>
<p>
  Field Access has three different meanings.
</p>
<p>
  <b>1. Class Based Object Field Access</b>
</p>
<p>
  Class Based Object Field Access is Field Access from object which is create by <a href="#language-expression-new">new</a> keyword.
</p>
<pre>
my $point = new Point;
$point-&gt;{x} = 1;
</pre>
<p>
  See <a href="#language-expression-get-field-class-based-object">Get Class Based Object Field Value</a> to get field of Class Based Object.
</p>
<p>
  See <a href="#language-expression-set-field-class-based-object">Set Class Based Object Field Value</a> to set field of Class Based Object.
</p>
<p>
  <b>2. Multi Numeric Field Access</b>
</p>
<p>
  Multi Numeric Field Access is Field Access from the value of <a href="#language-type-multi-numeric">Multi Numeric Type</a>. The value of <a href="#language-type-multi-numeric">Multi Numeric Type</a> is allocated Callstack of Subroutine.
</p>
<pre>
my $z : SPVM::Complex_2d;
$z-&gt;{x} = 1;
$z-&gt;{y} = 3;
</pre>
<p>
  See <a href="#language-expression-get-field-multi-numeric">Get Multi Numeric Field Value</a> to get field of the value of <a href="#language-type-multi-numeric">Multi Numeric Type</a>.
</p>
<p>
  See <a href="#language-expression-set-field-multi-numeric">Set Multi Numeric Field Value</a> to set field of the value of <a href="#language-type-multi-numeric">Multi Numeric Type</a>.
</p>
<p>
  <b>3. Dereference Multi Numeric Field</b>
</p>
<p>
  Dereference Multi Numeric Field is Field access from Reference of the value of <a href="#language-type-multi-numeric">Multi Numeric Type</a>.
</p>
<pre>
my $z : SPVM::Complex_2d;
my $z_ref = \$z;
$z_ref-&gt;{x} = 1;
$z_ref-&gt;{y} = 3;
</pre>
<p>
  See <a href="#language-expression-get-field-multi-numeric-deref">Get Multi Numeric Field Value via Dereference</a> to get Multi Numeric Field via Dereference.
</p>
<p>
  See <a href="#language-expression-set-field-multi-numeric-deref">Set Multi Numeric Field Value via Dereference</a> to set Multi Numeric Field via Dereference.
</p>
<h3 id="language-sub">Subroutine</h3>
<ul class="list">
  <li><a href="#language-sub-definition">Subroutine Definition</a></li>
  <li><a href="#language-sub-descriptor">Subroutine Descriptor</a></li>
  <li><a href="#language-sub-native">Native Subroutine</a></li>
  <li><a href="#language-sub-precompiled">Precompiled Subroutine</a></li>
  <li><a href="#language-sub-constant">Constant Subroutine</a></li>
  <li><a href="#language-sub-method">Method</a></li>
  <li><a href="#language-sub-signature">Signature</a></li>
  <li><a href="#language-sub-stack">Subroutine Callstack</a></li>
</ul>
<h4 id="language-sub-definition">Subroutine Definition</h4>
<p>
  "sub" Keyword defines Subroutine.
</p>
<pre>
sub SUBROUTINE_NAME : RETURN_VALUE_TYPE_NAME () {

}
sub SUBROUTINE_NAME : RETURN_VALUE_TYPE_NAME (ARGUMENT_NAME1 : ARGUMENT_TYPE_NAME1, ARGUMENT_NAME2 : ARGUMENT_TYPE_NAME2, ARGUMENT_NAMEN : ARGUMENT_TYPE_NAMEN) {

}
</pre>
<p>
  Subroutine must be defined directly under <a href="#language-package-definition">Package Definition</a>.
</p>
<p>
  Subroutine name must be follow the rule of <a href="#language-lex-identifier-sub-name">Subroutine Name</a>.
</p>
<p>
  Subroutine Name is allowed as same as <a href="#language-lex-keyword">Keyword</a>. 
</p>
<p>
  Type of Return Value must be <a href="#language-type-void">void Type</a>, <a href="#language-type-numeric">Numeric Type</a>, or <a href="#language-type-object">Object Type</a>, otherwise a compile-time error occurs.
</p>
<p>
  Argument name must be follow the rule of <a href="#language-lex-identifier-lex-var-name">Lexical Variable Name</a>.
</p>
<p>
  Type of Argument must be <a href="#language-type-numeric">Numeric Type</a>, <a href="#language-type-object">Object Type</a>, or <a href="#language-type-reference">Reference Type</a>, otherwise a compile-time error occurs.
</p>
<p>
  The defined Subroutine can be called. See <a href="#language-expression-callsub">Subroutine Call</a> about calling Subroutine, .
</p>
<p>
  <a href="#language-scope-block-Statement-sub">Subroutine Block</a> can have zero or more Statements.
</p>
<p>
  Subroutine Definition can have <a href="#language-sub-descriptor">Subroutine Descriptor</a>.
</p>
<pre>
DESCRIPTOR1 DESCRIPTOR2 DESCRIPTORN sub SUBROUTINE_NAME : RETURN_VALUE_TYPE_NAME () {

}
DESCRIPTOR1 DESCRIPTOR2 DESCRIPTORN sub SUBROUTINE_NAME : RETURN_VALUE_TYPE_NAME (ARGUMENT_NAME1 : ARGUMENT_TYPE_NAME1, ARGUMENT_NAME2 : ARGUMENT_TYPE_NAME2, ARGUMENT_NAMEN : ARGUMENT_TYPE_NAMEN) {

}
</pre>
<p>
  If "..." follows Type of Argument, the Argument becomes Variable Length Argument. Only the last Argument can be Variable Length Argument.
</p>
<p>
  The Type must be <a href="#language-type-array">Array Type</a>.
</p>
<pre>
sub SUBROUTINE_NAME : RETURN_VALUE_TYPE_NAME (ARGUMENT_NAME1 : ARGUMENT_TYPE_NAME1, ARGUMENT_NAME2 : ARGUMENT_TYPE_NAME2...) {

}
</pre>
<p>
  Variable Length Argument can recieve multi values.
</p>
<pre>
# Variable Length Argument Definition
sub sprintf : string ($format : string, $values : object[]...) {

}

# Call Variable Length Argument Subroutine with multi values.
sprintf("Value %d %f", 1, 2.0);
</pre>
<p>
  Variable Length Argument can recieve Array.
</p>
<pre>
# Call Variable Length Argument Subroutine with Array.
sprintf("Value  %d %f", [(object)1, 2.0]);
</pre>
<p>
  If you want to treat the value of Array as an individual element of the variable length argument, cast it to Type other than Array Type.
</p>
<pre>
sprintf("aaa %p", (object)[(object)1, 2.0]);
</pre>
<h4 id="language-sub-descriptor">Subroutine Descriptor</h4>
<p>
  List of Subroutine Descriptor.
</p>
<table>
  <tr>
    <th>
      Descriptor
    </th>
    <th>
      Description
    </th>
  </tr>
  <tr>
    <td>
      <b>native</b>
    </td>
    <td>
      This Subroutine is <a href="#language-sub-native">Native Subroutine</a>. 
    </td>
  </tr>
  <tr>
    <td>
      <b>precompile</b>
    </td>
    <td>
      This Subroutine is <a href="#language-sub-precompiled">Precompiled Subroutine</a>. 
    </td>
  </tr>
</table>
<p>
  If both "native" and "precompile" Descriptors are specified, a compile-time error occurs
</p>
<h4 id="language-sub-native">Native Subroutine</h4>
<p>
  Native Subroutine is Subroutine that call function written in Native Language(C, C++, etc).
</p>
<p>
  See <a href="/spvmdoc-public/native-api.html">SPVM Native API</a> Native Subroutine.
</p>
<h4 id="language-sub-precompiled">Precompiled Subroutine</h4>
<p>
  Precompiled Subroutine is a subroutine translated into C language and converted into machine code.
</p>
<p>
  Precompiled Subroutine needs Build Directory described in <a href="/spvmdoc-public/native-api.html">SPVM Native API</a>
</p>
<h4 id="language-sub-constant">Constant Subroutine</h4>
<p>
  Constant Subroutine is a Subroutine that Return Type is <a href="#language-type-numeric">Numeric Type</a> and returns Constant Value.
</p>
<pre>
sub foo : int () { return 5; }
sub foo : long () { return 5L; }
sub foo : float () { return 5.0f; }
sub foo : double () { return 5.0; }
</pre>
<p>
  Inline Expansion optimization is performed to Constant Subroutine.
</p>
<p>
  Note that SPVM does not perform constant convolution optimization, so if a constant is calculated, it will not performe Inline Expansion.
</p>
<pre>
# This is not Constant Subroutine.  Inline Expansion is not performed
sub foo : int () { return 5 + 3; }
</pre>
<h4 id="language-sub-method">Method</h4>
<p>
  Method is Subroutine that has <a href="#language-type-self">self Type</a> as its first argument.
</p>
<pre>
sub SUB_NAME : TYPE  ($self : self, ARGUMENT2 : TYPE2, ARGUMENT3 : TYPE3, ARGUMENTN : TYPEN) {

}
</pre>
<p>
  <a href="#language-type-self">self Type</a> must be first argument.
</p>
<p>
  Method can be called from the object created by <a href="#language-expression-new">new</a>. See <a href="language-expression-callsub">Subroutine Call</a> for Method Call.
</p>
<p>
  $self is called Invocant.
</p>
<h4 id="language-sub-signature">Signature</h4>
<p>
  Signature is a string that follow the following rule sequence of Subroutine Retrun Value and arguments arranged according to the following rules. Arguments do not need to exist. There cannot be spaces between them.
</p>
<p>
  1. RETURN_VALUE_TYPE
</p>
<p>
  2. (
</p>
<p>
  3. ARGUMENT_TYPE1,ARGUMENT_TYPE2,ARGUMENT_TYPE3
</p>
<p>
  4. )
</p>
<p>
  <b>Signature Example:</b>
</p>
<pre>
# Subroutine Definition
sub foo : int ($num1 : double, $num2 : long[])

# Signature
int(double,long[])

# Subroutine Definition
sub foo : void ()

# Signature
void()
</pre>
<p>
  Signature is not used in SPVM programs. Signature is used when calling the SPVM Subroutine from <a href="/spvmdoc-public/native-api.html">SPVM Native API</a>.
</p>
<h4 id="language-sub-stack">Subroutine Callstack</h4>
<p>
  Subroutine Callstack is memory area allocated in each subroutine call.
</p>
<p>
  Subroutine Callstack,the following 
</p>
<p>
  1. <a href="#language-lex-var">Lexical Variable</a>
</p>
<p>
  2. Motal Lexical Variable
</p>
<h3 id="language-enum">Enumeration</h3>
<ul class="list">
  <li>
    <a href="#language-enum-definition">Enumeration Definition</a>
  </li>
  <li>
    <a href="#language-enum-descriptor">Enumeration Descriptor</a>
  </li>
  <li>
    <a href="#language-enum-call">Enumeration Call</a>
  </li>
</ul>
<h4 id="language-enum-definition">Enumeration Definition</h4>
<p>
  Enumeration Definition is a syntax to define multiple <a href="#language-sub-constant">Constant Subroutines</a> easily.
</p>
<pre>
# Enumeration Definition
enum {
  FLAG1,
  FLAG2,
  FLAG3
}
</pre>
<p>
  Enumeration must be defined directly under <a href="#language-package-definition">Package Definition</a>.
</p>
<pre>
package Foo {
  enum {
    FLAG1,
    FLAG2,
    FLAG3
  }
}
</pre>
<p>
  The first value starts with "0". The value is incremented by "1". In this example, "FLAG1" is "0", "FALG2" is "1", and "FLAG3" is "2".
</p>
<p>
  "," can be added after the last element of Enumeration.
</p>
<pre>
enum {
  FLAG1,
  FLAG2,
  FLAG3,
}
</pre>
<p>
  Enumeration is an alias for <a href="#language-sub-constant">Constant Subroutine</a> that Return Type is <a href="#language-type-int">int Type</a>. It is equivalent to the following Subroutine Definition:
</p>
<pre>
sub FLAG1 : int () { return 0; }
sub FLAG2 : int () { return 1; }
sub FLAG3 : int () { return 2; }
</pre>
<p>
  The value of <a href="#language-type-int">int Type</a> can be set in the enum element.
</p>
<pre>
enum {
  FLAG1,
  FLAG2 = 4,
  FLAG3,
}
</pre>
<p>
  In the above case, "FLAG1" is "0", "FALG2" is "4", and "FLAG3" is "5".
</p>
<p>
  If Enum Definition is invalid, a compile-time error occurs.
</p>
<h4 id="language-enum-descriptor">Enumeration Descriptor</h4>
<p>
  Descriptor can be specified for Enumeration.
</p>
<pre>
private enum {
  FLAG1,
  FLAG2 = 4,
  FLAG3,
}
</pre>
<p>
  List of Enumeration Descriptor
</p>
<table>
  <tr>
    <th>
      Descriptor
    </th>
    <th>
      Description
    </th>
  </tr>
  <tr>
    <td>
      <b>public</b>
    </td>
    <td>
      This Enumeration is public. This Enumeration can be accessed from other Package. This is default setting.
    </td>
  </tr>
  <tr>
    <td>
      <b>private</b>
    </td>
    <td>
      This Enumeration is private. This Enumeration can not be accessed from other Package.
    </td>
  </tr>
</table>
<p>
  If both "public" and "private" Descriptors are specified, a compile-time error occurs.
</p>
<h4 id="language-enum-call">Enumeration Call</h4>
<p>
  Enumeration is an alias for <a href="#language-sub-constant">Constant Subroutine</a>, so it can be called in exactly the same way as Subroutine call.
</p>
<pre>
my $flag1 = Foo-&gt;FLAG1;
my $flag2 = Foo-&gt;FLAG2;
my $flag3 = Foo-&gt;FLAG3;
</pre>
<p>
  In special case, Enumeration Call can be used in <a href="#language-Statement-case">case Statement</a> of <a href="#language-Statement-switch">switch Statement</a>.
</p>
<pre>
switch ($num) {
  case Foo-&gt;FLAG1: {

    break;
  }
  case Foo-&gt;FLAG2: {

    break:
  }
  case Foo-&gt;FLAG3: {

    break:
  }
  default: {

  }
}
</pre>
<h3 id="language-begin-block"><a href="#language-begin-block">BEGIN Block</a></h3>
<p>
  <b>BEGIN Block</b> is a block that is executed immediately after the compilation of program.
</p>
<p>
  BEGIN Keyword defines BEGIN Block.
</p>
<pre>
BEGIN {

}
</pre>
<p>
  BEGIN Block must be defined directly under <a href="#language-package-definition">Package Definition</a>.
</p>
<pre>
package Foo {
  BEGIN {

  }
}
</pre>
<p>
  Zero or more <a href="#language-Statement">Statements</a> can be written in BEGIN Block.
</p>
<pre>
BEGIN {
  my $foo = 1 + 1;
  my $bar;
}
</pre>
<p>
  <a href="#language-Statement-return">return Statement</a> cannot be written in BEGIN Block.
</p>
<p>
  Internally, BEGIN Block is a <a href="#language-sub">Subroutine</a> that Return Type is <a href="#language-type-void">void Type</a> and has no arguments.
</p>
<p>
  You can define multiple BEGIN Blocks.
</p>
<p>
  The execution order of BEGIN Block is not guaranteed. If ohter BEGIN Block is defined in ohter Package, do not assume that BEGIN Block of the current package will be executed first.
</p>
<p>
  A common use of BEGIN Block is to initialize <a href="#language-package-var">Package Variable</a>.
</p>
<pre>
package Foo {
  use Point;
  
  our $NUM : int;
  our $POINT : Point;
  BEGIN {
    $NUM = 3;
    $POINT = Point-&gt;new;
  }
}
</pre>
<h3 id="language-lex-var">Lexical Variable</h3>
<ul class="list">
  <li><a href="#language-lex-var-declaration">Lexical Variable Declaration</a></li>
  <li><a href="#language-lex-var-initial-value">Lexical Variable Initial Value</a></li>
  <li><a href="#language-lex-var-access">Lexical Variable Access</a></li>
</ul>
<h4 id="language-lex-var-declaration">Lexical Variable Declaration</h4>
<p>
  <b>Lexical Variable</b> is a variable that is declared in <a href="#language-scope-scope-block">Scope Block</a>.  Lexical Variable has <a href="#language-scope">Scope</a>. This is same as Local Variable in C Language.
</p>
<p>
  Lexical Variable is declared using <b>my</b> <a href="#language-lex-keyword">Keyword</a>.
</p>
<pre>
my LEXICAL_VARIABLE_NAME : TYPE;
</pre>
<p>
  Lexical variable name must be follow the rule of <a href="#language-lex-identifier-lex-var-name">Lexical Variable Name</a>.
</p>
<p>
  <a href="#language-type">Type</a> must be specified. Type must be <a href="#language-type-numeric">Numeric Type</a>, <a href="#language-type-object">Object Type</a>, <a href="#language-type-multi-numeric">Multi Numeric Type</a>, or <a href="#language-type-ref">Reference Type</a>.
</p>
<pre>
# Lexical Variable Declaration Examples
my $var : int;
my $var : Point;
my $var : SPVM::Complex_2d;
my $var : int&amp;;
</pre>
<p>
  Lexical Variable is initialized by <a href="#language-lex-var-initial-value">Lexical Variable Initial Value</a>.
</p>
<pre>
# Initialized by 0
my $num : int;

# Initialized by 0
my $num : double;

# Initialized by undef
my $point : Point;

# x is initialized by 0. y is initialized by 0.
my $z : SPVM::Complex_2d;
</pre>
<p>
  Initialization can be done at the same time as Lexical Variable Declaration.
</p>
<pre>
# Initialized by 1
my $num : int = 1;

# Initialized by 2.5
my $num : double = 2.5;

# Initialized by Point object
my $point : Point = new Point;
</pre>
<p>
  Using <a href="#language-type-inference">Type Inference</a>, you omit <a href="#language-type">Type</a> in Lexical Variable Declaration.
</p>
<pre>
# int
my $num = 1;

# double
my $num = 1.0;
</pre>
<p>
  Lexical Variable Declaration returns the value of Lexical Variable. This is a <a href="#language-expression">Expression</a>.
</p>
<pre>
my $ppp = my $bar = 4;

if (my $bar = 1) {

}

while (my $bar = 1) {

}
</pre>
<p>
  See <a href="#language-scope">Scope</a> about Lexical Variable Scope.
</p>
<h4 id="language-lex-var-initial-value">Lexical Variable Initial Value</h4>
<p>
  Lexical Variable is initialized by <a href="#language-type-initial-value">Type Initial Value</a>.
</p>
<h4 id="language-lex-var-access">Lexical Variable Access</h4>
<p>
  Lexical Variable Access is an operation to access Lexical Variable to get or set the value.
</p>
<p>
  See <a href="#language-expression-get-lex-var">Get Lexical Variable Value</a> to get Lexical Variable value.
</p>
<p>
  <a href="#language-expression-set-lex-var">Set Lexical Variable Value</a> to get Lexical Variable value.
</p>
<p>
  If <a href="#language-package-var">Package Variable</a> with the same name as the Lexical Variable exists, Program uses the variable as Lexical Variable, not <a href="#language-package-var">Package Variable</a>.
</p>
<h3 id="language-scope">Scope</h3>
<ul class="list">
  <li><a href="#language-scope-summary">Scope Summary</a>
  <li><a href="#language-scope-block">Block</a></li>
  <li><a href="#language-scope-scope-block">Scope Block</a>
</ul>
<h4 id="language-scope-summary">Scope Summary</h4>
<p>
  <b>Scope</b> is a range surrounded by <a href="#language-scope-scope-block">Scope Block</a>.
</p>
<pre>
# Scope Block 
{
  # Start of Scope
  
  # ...
  
  # End of Scope
}
</pre>
<p>
  Lexical Variable Declaration registers the Lexical Variable that is <a href="#language-type-object">Object Type</a> with Motal Variable in run-time. 
</p>
<p>
  If the object is not <a href="#language-undef">undef</a>, The Reference Count is added by 1.
</p>
<pre>
{
  # $num become Motal Variable in run-time
  my $num = new Foo;
}
</pre>
<p>
  At the end of Scope, the object that is registered as Motal Variable, Reference Count is reduced by 1 except the object is not <a href="#language-undef">undef</a>.
</p>
<p>
  If the Reference Count become 0, the object released.
</p>
<h4 id="language-scope-block">Block</h4>
<p>
  The part enclosed by "{" and "}" is called <b>Block</b>.
</p>
<pre>
# Block 
{

}
</pre>
<p>
  There are <a href="#language-scope-scope-block">Scope Block</a> that creates a scope and Non Scope Block that does not create a scope.
</p>
<h4 id="language-scope-scope-block">Scope Block </h4>
<p>
  <b>Scope Block</b> is a block that creates a Scope. Zero or more <a href="#language-Statement">Statement</a> can be written in Scope Block.
</p>
<p>
  <b>List of Scope Blocks</b>
</p>
<ul class="list">
  <li><a href="#language-scope-block-Statement-simple">Simple Block</a></li>
  <li><a href="#language-scope-block-Statement-sub">Subroutine Block</a></li>
  <li><a href="#language-scope-block-Statement-eval">eval Block</a></li>
  <li><a href="#language-scope-block-Statement-if">if Block</a></li>
  <li><a href="#language-scope-block-Statement-elsif">elsif Block</a></li>
  <li><a href="#language-scope-block-Statement-else">else Block</a></li>
  <li><a href="#language-scope-block-Statement-for">for Block</a></li>
  <li><a href="#language-scope-block-Statement-while">while Block</a></li>
  <li><a href="#language-scope-block-Statement-switch">switch Block</a></li>
</ul>
<h4 id="language-scope-block-Statement-simple">Simple Block</h4>
<p>
  Simple Block is a scope block.
</p>
<pre>
# Simple Block
{

}
</pre>
<h4 id="language-scope-block-Statement-sub">Subroutine Block</h4>
<p>
  Subroutine Block is a scope block.
</p>
<pre>
# Subroutine Block
sub foo : int () {

}
</pre>
<h4 id="language-scope-block-Statement-eval">eval Block</h4>
<p>
  eval Block is a scope block.
</p>
<pre>
# eval Block
eval {

}
</pre>
<h4 id="language-scope-block-Statement-if">if Block</h4>
<p>
  if Block is a scope block.
</p>
<pre>
# if Block
if (Expression) {

}
</pre>
<h4 id="language-scope-block-Statement-elsif">elsif Block</h4>
<p>
  elsif Block is a scope block.
</p>
<pre>
#elsif Block
elsif (Expression) {

}
</pre>
<h4 id="language-scope-block-Statement-else">else Block</h4>
<p>
  else Block is a scope block.
</p>
<pre>
# else Block
else {

}
</pre>
<h4 id="language-scope-block-Statement-for">for Block</h4>
<p>
  for Block is a scope block.
</p>
<pre>
# for Block 
for (my $i = 0; $i &lt; 3; $i++) {

}
</pre>
<h4 id="language-scope-block-Statement-while">while Block</h4>
<p>
  while Block is a scope block.
</p>
<pre>
# while Block
while (Expression) {

}
</pre>
<h4 id="language-scope-block-Statement-switch">switch Block</h4>
<p>
  switch Block is a scope block.
</p>
<pre>
switch (Expression) {

}
</pre>
<h3 id="language-literal">Literal</h3>
<ul class="list">
  <li><a href="#language-literal-summary">Literal Summary</a></li>
  <li><a href="#language-literal-integer">Integer Literal</a></li>
  <li><a href="#language-literal-floating-point">Floating Point Literal</a></li>
  <li><a href="#language-literal-character">Chracter Literal</a></li>
  <li><a href="#language-literal-string">String Literal</a></li>
  <li><a href="#language-literal-string-variable-expansion">Variable Expansion</a></li>
</ul>
<h4 id="language-literal-summary">Literal Summary</h4>
<p>
  <b>Literal</b> is a <a href="#language-expression">Expression</a> that represents Constant Value.
</p>
<h4 id="language-literal-integer">Integer Literal</h4>
<h5>Decimal Representation of Integer Literal</h5>
<p>
  The numeric part of Decimal Representation of Integer Literal is represented by one or more consecutive characters from "0" to "9".
</p>
<p>
  Can be prefixed with "+" or "-".
</p>
<p>
  <a href="#language-type">Type</a> of Integer Literal is <a href="#language-type-int">int Type</a> by default.
</p>
<p>
  If Integer Literal exceeds the range of numbers that can be represented by <a href="#language-type-int">int Type</a>, a compile-time error occurs.
</p>
<p>
  By suffixing "L" or "l" at the end, that represents <a href="#language-type-long">long Type</a> Integer Literal.
</p>
<p>
  If <a href="#language-type-long">long Type</a> Integer Literal  exceeds the range of numbers that can be represented by <a href="#language-type-long">long Type</a>,  If it exceeds the range, a compile-time error occurs.
</p>
<p>
  "_" can be used as a Separator. Separator has no meaning.
</p>
<p>
  If Integer Literal is assigned to a <a href="#language-type-byte">byte Type</a> variable or passed to <a href="#language-type-byte">byte Type</a> Subroutine Argument, and does not exceed the range of numbers that can be represented by <a href="#language-type-byte">byte Type</a>, <a href = "#language-type-convertion-numeric-narrowing">Numeric Narrowing Type Convertion</a> is applied and the value converted to <a href="#language-type-byte">byte Type</a> value. If it exceeds the range, a compile-time error will occur.
</p>
<p>
  If Integer Literal is assigned to a <a href="#language-type-short">short Type</a> variable or passed to <a href="#language-type-short">short Type</a> Subroutine Argument, and does not exceed the range of numbers that can be represented by <a href="#language-type-short">short Type</a>, <a href = "#language-type-convertion-numeric-narrowing">Numeric Narrowing Type Convertion</a> is applied and the value converted to <a href="#language-type-short">short Type</a> value. If it exceeds the range, a compile-time error will occur.
</p>
<p>
  <b>Integer Literal Example:</b>
</p>
<pre>
123
+123
-123
123L
123l
123_456_789
-123_456_789L
</pre>
<p>
  <b>16</b>
</p>
<p>
  Integer Literal  <b>16</b>
</p>
<p>
 16"0x"
</p>
<p>
  "09""af""AF"Character
</p>
<p>
  Invalid 16,a compile-time error occurs
</p>
<p>
  Integer Literal  16Example
</p>
<pre>
0x3b4f
-0x3F1A
0xDeL
0xFFFFFFFF_FFFFFFFF
</pre>
<p>
  <b>8</b>
</p>
<p>
  Integer Literal  <b>8</b>
</p>
<p>
 8"0"
</p>
<p>
  "07"Character
</p>
<p>
  Invalid 8,a compile-time error occurs
</p>
<p>
  Integer Literal  8Example
</p>
<pre>
0755
-0644
0666L
0655_755
</pre>
<p>
  <b>2</b>
</p>
<p>
  Integer Literal  <b>2</b>
</p>
<p>
 2"0b"
</p>
<p>
  "0""1"Character
</p>
<p>
  Invalid 2,a compile-time error occurs
</p>
<p>
  Integer Literal  2Example
</p>
<pre>
0b0101
-0b1010
0b110000L
0b10101010_10101010
</pre>
<h4 id="language-literal-floating-point">Floating Point Literal</h4>
<p>
  Floating Point Literal """"""""
<p>
<p>
  Floating Point Literal "10Floating Point Literal ""16Floating Point Literal "
</p>
<p>
  """+""-""","",
</p>
<p>
  "10Floating Point Literal ","10"
</p>
<p>
  "10""09"
</p>
<p>
  "10Floating Point Literal ","",""""
</p>
<p>
  """."
</p>
<p>
  "16Floating Point Literal ","0x""0X","16"
</p>
<p>
  16"09""af""AF"
</p>
<p>
  "16Floating Point Literal ",""""
</p>
<p>
  """_"Separator,
</p>
<p>
  "16Floating Point Literal ",""
</p>
<p>
  """""10"
</p>
<p>
  """10Floating Point Literal ""e""E","16Floating Point Literal ""p""P"
</p>
<p>
  """10Floating Point Literal ",10,"16Floating Point Literal ",2
</p>
<p>
  "f""F",Floating Point Literal Type"float Type"
</p>
<p>
  "d""D",Floating Point Literal Type"double Type"
</p>
<p>
  ,Floating Point Literal Type"double Type"
</p>
<p>
  Floating Point Literal "float Type"C"strtof",Stringfloat Type,a compile-time error occurs
</p>
<p>
  Floating Point Literal "double Type"C"strtod",Stringdouble Type,a compile-time error occurs
</p>
<p>
  Floating Point Literal <a href="#stdfunc-INFINITY">INFINITY</a><a href="#stdfunc-INFINITYF">INFINITYF</a>
</p>
<p>
  Floating Point Literal <a href="#stdfunc-NAN">NAN</a><a href="#stdfunc-NANF">NANF</a>
</p>
<p>
  Floating Point Literal Example
</p>
<pre>
1.32
-1.32
1.32f
1.32F
1.32e3
1.32e-3
1.32E+3
1.32E-3
0x3d3d.edp0
0x3d3d.edp3
0x3d3d.edP3
0x3d3d.edP-3f
</pre>
<h4 id="language-literal-character">Chracter Literal </h4>
<p>
  Chracter Literal ,"'"
</p>
<p>
  Chracter Literal "AsciiCharacter""Character"
</p>
<p>
  Chracter Literal Type"<a href="#language-type-byte">byte Type</a>"
</p>
<p>
  Invalid Chracter Literal ,a compile-time error occurs
</p>
<p>
  <b>Character</b>
</p>
<table class="toc">
  <tr>
    <th>
      Character
    </th>
    <th>
      Description
    </th>
  </tr>
  <tr>
    <td>
      <b>\0</b>
    </td>
    <td>
      Ascii Code0"NUL"
    </td>
  </tr>
  <tr>
    <td>
      <b>\a</b>
    </td>
    <td>
      Ascii Code7"BEL"
    </td>
  </tr>
  <tr>
    <td>
      <b>\b</b>
    </td>
    <td>
      Ascii Code8"BS"
    </td>
  </tr>
  <tr>
    <td>
      <b>\t</b>
    </td>
    <td>
      Ascii Code9"HT"
    </td>
  </tr>
  <tr>
    <td>
      <b>\n</b>
    </td>
    <td>
      Ascii Code10"LF"
    </td>
  </tr>
  <tr>
    <td>
      <b>\f</b>
    </td>
    <td>
      Ascii Code12"FF"
    </td>
  </tr>
  <tr>
    <td>
      <b>\r</b>
    </td>
    <td>
      Ascii Code13"CR"
    </td>
  </tr>
  <tr>
    <td>
      <b>\"</b>
    </td>
    <td>
      Ascii Code34"""
    </td>
  </tr>
  <tr>
    <td>
      <b>\'</b>
    </td>
    <td>
      Ascii Code39"'"
    </td>
  </tr>
  <tr>
    <td>
      <b>\\</b>
    </td>
    <td>
      Ascii Code92"\"
    </td>
  </tr>
  <tr>
    <td>
      <b>\x16</b>
    </td>
    <td>
      Ascii Code16"09""af""AF"
    </td>
  </tr>
</table>
<p>
  <b>Chracter Literal Example</b>
</p>
<p>
  Chracter Literal Example
</p>
<pre>
# Chracter Literal 
'a'
'x'

# CharacterChracter Literal 
'\a'
'\b'
'\t'
'\n'
'\f'
'\r'
'\"'
'\''
'\\'
'\x0D'
'\x0A'
</pre>
<h4 id="language-literal-string">String Literal </h4>
<p>
  String Literal ,"""
</p>
<p>
  String Literal "0AsciiCharacterCharacter"
</p>
<p>
  String Literal Type"stringType"
</p>
<p>
  Invalid String Literal ,a compile-time error occurs
</p>
<p>
  <b>Character</b>
</p>
<table class="toc">
  <tr>
    <th>
      Character
    </th>
    <th>
      Description
    </th>
  </tr>
  <tr>
    <td>
      <b>\0</b>
    </td>
    <td>
      Ascii Code0"NUL"
    </td>
  </tr>
  <tr>
    <td>
      <b>\a</b>
    </td>
    <td>
      Ascii Code7"BEL"
    </td>
  </tr>
  <tr>
    <td>
      <b>\b</b>
    </td>
    <td>
      Ascii Code8"BS"
    </td>
  </tr>
  <tr>
    <td>
      <b>\t</b>
    </td>
    <td>
      Ascii Code9"HT"
    </td>
  </tr>
  <tr>
    <td>
      <b>\n</b>
    </td>
    <td>
      Ascii Code10"LF"
    </td>
  </tr>
  <tr>
    <td>
      <b>\f</b>
    </td>
    <td>
      Ascii Code12"FF"
    </td>
  </tr>
  <tr>
    <td>
      <b>\r</b>
    </td>
    <td>
      Ascii Code13"CR"
    </td>
  </tr>
  <tr>
    <td>
      <b>\"</b>
    </td>
    <td>
      Ascii Code34"""
    </td>
  </tr>
  <tr>
    <td>
      <b>\'</b>
    </td>
    <td>
      Ascii Code39"'"
    </td>
  </tr>
  <tr>
    <td>
      <b>\\</b>
    </td>
    <td>
      Ascii Code92"\"
    </td>
  </tr>
  <tr>
    <td>
      <b>\x16</b>
    </td>
    <td>
      Ascii Code16"09""af""AF"
    </td>
  </tr>
  <tr>
    <td>
      <b>\N{}16</b>
    </td>
    <td>
      Unicode16UTF-816"09""af""AF"
    </td>
  </tr>
  <tr>
    <td>
      <b>\s</b>
    </td>
    <td>
      Ascii Code92,115"\s"
    </td>
  </tr>
  <tr>
    <td>
      <b>\S</b>
    </td>
    <td>
      Ascii Code92,83"\S"
    </td>
  </tr>
  <tr>
    <td>
      <b>\d</b>
    </td>
    <td>
      Ascii Code92,100"\d"
    </td>
  </tr>
  <tr>
    <td>
      <b>\D</b>
    </td>
    <td>
      Ascii Code92,68"\D"
    </td>
  </tr>
  <tr>
    <td>
      <b>\w</b>
    </td>
    <td>
      Ascii Code92,119"\w"
    </td>
  </tr>
  <tr>
    <td>
      <b>\W</b>
    </td>
    <td>
      Ascii Code92,87"\W"
    </td>
  </tr>
  <tr>
    <td>
      <b>\"az""AZ""0-9"""""'""\""$"Ascii Code</b>
    </td>
    <td>
      Ascii Code92,Character"\-""\-"
    </td>
  </tr>
</table>
<p>
  UnicodeCharacter,<a href="#language-literal-character">Chracter Literal</a>Character
</p>
<p>
  <b>String Literal Example</b>
</p>
<p>
  String Literal Example
</p>
<pre>
# String Literal 
"abc"
""

# CharacterString Literal 
"abc\tdef\n"
"\x0D\x0A"
"\N{U+3042}\N{U+3044}\N{U+3046}"
</pre>
<h4 id="language-literal-string-variable-expansion">Variable Expansion</h4>
<p>
  String Literal Lexical Variable ,Package Variable ,Dereference ,Field,Array,,Variable Expansion
</p>
<pre>
"AAA $foo BBB"
"AAA $FOO BBB"
"AAA $$foo BBB"
"AAA $foo-&gt;{x} BBB"
"AAA $foo-&gt;[3] BBB"
"AAA $foo-&gt;{x}[3] BBB"
"AAA $@ BBB"
</pre>
<p>
  ,the following 
</p>
<pre>
"AAA" . $foo . "BBB"
"AAA" . $FOO . "BBB"
"AAA" . $$foo . "BBB"
"AAA" . $foo-&gt;{x} . "BBB"
"AAA" . $foo-&gt;[3] . "BBB"
"AAA" . $foo-&gt;{x}[3] . "BBB"
"AAA" . $@ . "BBB"
</pre>
<p>
  "{""}"
</p>
<pre>
"AAA ${foo}_ccc BBB"
</pre>
<p>
  ,the following 
</p>
<pre>
"AAA " . ${foo} . "_ccc BBB"
</pre>
<p>
  "{""}",Valid StringDereference 
</p>
<p>
  "->",Field,,Array
</p>
<p>
  1. ,Character"a-z""A-Z""0-9""_""{""[",
</p>
<p>
  2. "1."Character"}""]",Character"->""{""[",,1otherwise 
</p>
<p>
  $Variable Expansion"$"
</p>
<pre>
"AAA$"
</pre>
<h3 id="language-string">String</h3>
<p>
  SPVMString,<a href="#language-type-byte">byte Type</a>Array,
</p>
<pre>
my $string = new byte[3];
$string-&gt;[0] = 'a';
$string-&gt;[1] = 'b';
$string-&gt;[2] = 'c';
</pre>
<p>
  <a href="#language-type-byte">byte Type</a>Array,<a href="#language-type-string">String Type</a>String Type,Type,<a href="#language-type-byte">byte Type</a>Array
</p>
<pre>
my $string_const : string = $string;
</pre>
<p>
  <a href="#language-literal-string">String Literal</a>,StringString Literal stringTypeString
</p>
<pre>
my $string_const = "abc";
</pre>
<p>
  byte[]C"char*",String TypeC"const char*"
</p>
<h3 id="language-undef">Undefined Value</h3>
<p>
  Definition"undef"
</p>
<pre>
undef
</pre>
<p>
  Undefined Value,Object Type 
</p>
<p>
  Undefined ValueObject Type "==""!="Operator ,Undefined Value,
</p>
<p>
  Definition,
</p>
<p>
  Undefined Value,C,0
</p>
<h3 id="language-array">Array</h3>
<ul class="list">
  <li><a href="#language-array-summary">Array Summary</a></li>
  <li><a href="#language-array-new">Create Array</a></li>
  <li><a href="#language-array-access">Array Access</a></li>
</ul>
<h4 id="language-array-summary">Array Summary</h4>
<p>
  Array,
</p>
<p>
  Array
</p>
<ul class="list">
  <li>
    <a href="#language-type-numeric">Numeric Type</a>Array
  </li>
  <li>
    Object Type Array
  </li>
  <li>
    Multi Numeric TypeArray
  </li>
</ul>
<p>
  <a href="#language-type-numeric">Numeric Type</a>Array,<a href="#language-type-numeric">Numeric Type</a>Array
</p>
<p>
  Object Type Array,<a href="#language-type-object">Object Type</a>Array
</p>
<p>
  Multi Numeric TypeArray,<a href="#language-type-multi-numeric">Multi Numeric Type</a>Array
</p>
<h4 id="language-array-summary">Create Array</h4>
<p>
  Array,<a href="#language-expression-new-array">Create Array</a>
</p>
<h4 id="language-array-access">Array Access</h4>
<p>
  Array Access,Array,,,the following 
</p>
<pre>
Array-&gt;[]
</pre>
<p>
  Array,<a href="#language-expression-get-array-element">Get Array Element Value</a>
</p>
<p>
  Array,<a href="#language-expression-set-set-array-element">Set Array Element Value</a>
</p>
<h3 id="language-mulnum">Multi Numeric Value</h3>
<ul class="list">
  <li><a href="#language-mulnum-definition">Multi Numeric TypeDefinition</a></li>
  <li><a href="#language-mulnum-usage">Multi Numeric Type</a></li>
  <li><a href="#language-mulnum-access">Multi Numeric TypeField Access</a></li>
</ul>
<h4 id="language-mulnum-definition">Multi Numeric TypeDefinition</h3>
<p>
  SPVM,
</p>
<p>
  ,,32bit3,23,,
</p>
<p>
  ,,Multi Numeric TypeDefinitionMulti Numeric Type,<a href="#language-package-definition">Package Definition</a>,mulnum_tDescriptorDefinition
</p>
<pre>
# 32bit3
package Point_3i : mulnum_t {
  has x : int;
  has y : int;
  has z : int;
}

2
package Complex_2d : mulnum_t {
  x : double;
  y : double;
}
</pre>
<p>
  Field<a href="#language-type-numeric">Numeric Type</a>
</p>
<p>
  Multi Numeric Type"_""Field""Multi Numeric Type"
</p>
<p>
  <b>Multi Numeric Type</b>
</p>
<table>
  <tr>
    <th>
      <b>Numeric Type</b>
    </th>
    <th>
      
    </th>
  </tr>
  <tr>
    <td>
      <b>byte</b>
    </td>
    <td>
      b
    </td>
  </tr>
  <tr>
    <td>
      <b>short</b>
    </td>
    <td>
      s
    </td>
  </tr>
  <tr>
    <td>
      <b>int</b>
    </td>
    <td>
      i
    </td>
  </tr>
  <tr>
    <td>
      <b>long</b>
    </td>
    <td>
      l
    </td>
  </tr>
  <tr>
    <td>
      <b>float</b>
    </td>
    <td>
      f
    </td>
  </tr>
  <tr>
    <td>
      <b>double</b>
    </td>
    <td>
      d
    </td>
  </tr>
</table>
<p>
  ,Definition<a href="#language-type-numeric">Numeric Type</a>
</p>
<p>
  Multi Numeric TypeDefinition,Field255
</p>
<p>
  Invalid Multi Numeric TypeDefinition,a compile-time error occurs
</p>
<p>
  Multi Numeric Type,<a href="#language-lex-var-declaration">Lexical Variable Declaration</a>Type
</p>
<p>
  Multi Numeric Type,<a href="#language-sub-definition">Subroutine Definition</a>Type
</p>
<p>
  Multi Numeric Type,<a href="#language-sub-definition">Subroutine Definition</a>Return ValueType
</p>
<p>
  Multi Numeric Type<a href="#language-type-array">Array Type</a><a href="#language-type-basic">Basic Type</a>
</p>
<pre>
my $points = new Point_3i[5];
</pre>
<p>
  Multi Numeric Type,FieldType
</p>
<p>
  Multi Numeric Type,Package Variable Type
</p>
<p>
  Multi Numeric Type,Reference
</p>
<pre>
my $point : Point_3i;
my $point_ref = \$point;
</pre>
<p>
  Multi Numeric Type,Undefined Value,a compile-time error occurs
</p>
<h3 id="language-mulnum-array">Multi Numeric Array</h3>
<ul class="list">
  <li><a href="language-array-summary">Multi Numeric Array Summary</a></li>
  <li><a href="language-array-access">Multi Numeric Array Access</a></li>
</ul>
<h4 id="language-array-summary">Multi Numeric Array Summary</h4>
<p>
  Multi Numeric Type,<a href="#language-array">Array</a>
</p>
<pre>
my $points = new Point_3i[5];

my $zs = new Complex_2d[5];
</pre>
<p>
  Multi Numeric Array,Multi Numeric Type,Array,,,
</p>
<p>
  ,Point_3iType5Array,Point_3iType,<a href="#language-type-int">int Type</a> 3Type,5,"5 * 3 = 15"<a href="#language-type-int">int Type</a> ,
</p>
<p>
  Multi Numeric ArrayType,<a href="#language-type-array">Array Type</a>
</p>
<p>
  Multi Numeric ArrayType,<a href="#language-type-multi-numeric">Multi Numeric Type</a>
</p>
<h4 id="language-array-access">Multi Numeric Array Access</h4>
<p>
  Multi Numeric Array Access,Multi Numeric Array,,,the following 
</p>
<pre>
Array-&gt;[]
</pre>
<p>
  Multi Numeric Array Access,Arraysyntax 
</p>
<p>
  Array,<a href="#language-expression-get-array-element">Get Array Element Value</a>
</p>
<p>
  Array,<a href="#language-expression-set-set-array-element">Set Array Element Value</a>
</p>
<h4 id="language-mulnum-usage">Multi Numeric Type</h3>
<p>
  Multi Numeric TypeuseStatement,Module
</p>
<pre>
use Point_3i;
use Complex_2d;
</pre>
<p>
  ,Lexical Variable Declaration Lexical Variable Declaration ,,<a href="#language-sub-stack">Subroutine Callstack</a>Field,<a href="language-type-initial-value">Type Initial Value</a>
</p>
<pre>
my $point : Point_3i;
my $z : Complex_2d;
</pre>
<p>
  Multi Numeric Type,,<a href="#language-expression-new">Create Object</a>syntax 
</p>
<h4 id="language-mulnum-access">Multi Numeric TypeField Access</h3>
<p>
  Multi Numeric TypeField Access,Multi Numeric TypeField,,,the following 
</p>
<pre>
Invocant -&gt;{Field Name}
</pre>
<p>
  Multi Numeric TypeField,<a href="#language-expression-get-field-multi-numeric">Get Multi Numeric Field Value</a>
</p>
<p>
  Multi Numeric TypeField,<a href="#language-expression-set-field-multi-numeric">Set Multi Numeric Field Value</a>
</p>
<p>
  <b>Get Multi Numeric Field ValueExample</b>
</p>
<p>
  Get Multi Numeric Field ValueExample
</p>
<pre>
$ival2-&gt;{x} = 1;
my $y = $ival2-&gt;{y};

$dval4-&gt;{t} = 2.5;
my $z = $dval4-&gt;{z};
</pre>
<h3 id="language-ref">Reference</h3>
<ul>
  <li><a href="language-ref-summary">Reference</a></li>
  <li><a href="language-ref-deref">Dereference</a></li>
</ul>
<h4 id="language-ref">Reference</h4>
<p>
  Reference,Lexical Variable Reference,C,
</p>
<p>
  Lexical Variable ,<a href="#language-expression-operator-ref">Reference Operator</a><a href="#language-type-ref">Reference Type</a>,<a href="#language-type-numeric">Numeric Type</a><a href="#language-type-multi-numeric">Multi Numeric Type</a>"&"
</p>
<pre>
# Numeric TypeReference
my $num : int;
my $num_ref : int&amp; = \$num;

# Multi Numeric TypeReference
my $point : Point_3d;
my $point_ref : Point_3d&amp; = \$point;
</pre>
<p>
  $num_ref,Lexical Variable "$num"$point_ref,Lexical Variable "$point"
</p>
<p>
  Reference Operator  ,<a href="#language-type-numeric">Numeric Type</a><a href="#language-type-multi-numeric">Multi Numeric Type</a>Object Type ,
</p>
<p>
  <a href="#language-type-ref">Reference Type</a>,Subroutine Arguments
</p>
<pre>
# Subroutine Definition
sub sum : void ($out_ref : int&amp;, $in1 : int, $in2 : int) {
  $$out_ref = $in1 + $in2;
}

# Subroutine 
my $num1 = 1;
my $num2 = 2;
my $out : int;
my $out_ref = \$out;
sum($out_ref, $num1, $num2);
</pre>
<h4 id="language-ref-deref">Dereference </h4>
<p>
  Dereference ,Lexical Variable 
</p>
<p>
  Dereference ,,
</p>
<pre>
# Numeric Type
my $num2 = $$num_ref;

# Numeric Type
$$num_ref = 3;

# Multi Numeric Type
my $point2 = $$point_ref;

# Multi Numeric Type
$$point_ref = $point2;
</pre>
<p>
  Reference Type Multi Numeric Type,Multi Numeric TypeField,Arrow Operator 
</p>
<pre>
# Reference Type Multi Numeric Type,Multi Numeric TypeField
my $x = $point_ref-&gt;{x};

# Reference Type Multi Numeric Type,Multi Numeric TypeField
$point_ref-&gt;{x} = 1;
</pre>
<h4 id="language-type-ref-numeric">Numeric Reference Type </h4>
<p>
  Numeric Reference Type ,<a href="#language-type-numeric">Numeric Type</a><a href="#language-type-ref">Reference Type</a>
</p>
<h4 id="language-type-ref-multi-numeric">Multi Numeric Reference Type </h4>
<p>
  Multi Numeric Reference Type ,<a href="#language-type-multi-numeric">Multi Numeric Type</a><a href="#language-type-ref">Reference Type</a>
</p>
</p>
<h3 id="language-expression"><a href="#language-expression">Expression</a></h3>
<p>
  Expression is a syntax component that can be evaluated as a value.
</p>
<ul class="list">
  <li><a href="#language-expression-get-lex-var">Get Lexical Variable Value</a></li>
  <li><a href="#language-expression-set-lex-var">Set Lexical Variable Value</a></li>
  <li><a href="#language-expression-set-package-var">Get Package Variable Value</a></li>
  <li><a href="#language-expression-get-package-var">Set Package Variable Value</a></li>
  <li><a href="#language-expression-get-exception-var">Get Exception Variable Value</a></li>
  <li><a href="#language-expression-set-exception-var">Set Exception Variable Value</a></li>
  <li><a href="#language-literal">Literal</a></li>
  <li><a href="#language-undef">Undefined Value</a></li>
  <li><a href="#language-expression-callsub">Subroutine Call</a></li>
  <li><a href="#language-expression-get-field-class-based-object">Get Class Based Object Field Value</a></li>
  <li><a href="#language-expression-set-field-class-based-object">Set Class Based Object Field Value</a></li>
  <li><a href="#language-expression-get-field-multi-numeric">Get Multi Numeric Field Value</a></li>
  <li><a href="#language-expression-set-field-multi-numeric">Set Multi Numeric Field Value</a></li>
  <li><a href="#language-expression-get-field-multi-numeric-deref">Get Multi Numeric Field Value via Dereference</a></li>
  <li><a href="#language-expression-set-field-multi-numeric-deref">Set Multi Numeric Field Value via Dereference</a></li>
  <li><a href="#language-expression-get-array-element">Get Array Element Value</a></li>
  <li><a href="#language-expression-set-array-element">Set Array Element Value</a></li>
  <li><a href="#language-expression-typecast">Type Cast</a></li>
  <li><a href="#language-expression-new">Create Object</a></li>
  <li><a href="#language-expression-new-array">Create Array</a></li>
  <li><a href="#language-garbage-collection">Garbage Collection</a></li>
  <li><a href="#language-expression-array-init">Array Initialization</a></li>
  <li><a href="#language-expression-operator-array-length">Array Length Operator</a></li>
  <li><a href="#language-expression-operator-string-length">String Length Operator</a></li>
  <li><a href="#language-expression-operator-arithmetic">Arithmetic Operator</a></li>
  <li><a href="#language-expression-operator-bit">Bit Operator</a></li>
  <li><a href="#language-expression-operator-shift">Shift Operator</a></li>
  <li><a href="#language-expression-operator-concat">StringOperator</a></li>
  <li><a href="#language-expression-operator-ref">Reference Operator</a></li>
  <li><a href="#language-expression-operator-assign">Assignment Operator</a></li>
  <li><a href="#language-expression-operator-array-length">Array Length Operator</a></li>
  <li><a href="#language-expression-operator-string-length">String Length Operator</a></li>
  <li><a href="#language-expression-operator-scalar">Scalar Operator</a></li>
  <li><a href="#language-expression-current-package">Get Current Package Name</a></li>
  <li><a href="#language-expression-current-file">Get Current File Name</a></li>
  <li><a href="#language-expression-current-line">Get Current Line Number</a></li>
  <li>(Expression)</li>
</ul>
<h4 id="language-expression-get-lex-var">Get Lexical Variable Value</h4>
<p>
  Get Lexical Variable Value,Lexical Variable 
</p>
<pre>
$var
</pre>
<p>
  Get Lexical Variable Value,<a href="#language-expression">Expression</a>
</p>
<h4 id="language-expression-set-lex-var">Set Lexical Variable Value</h4>
<p>
  Set Lexical Variable Value,<a href="#language-expression-operator-assign">Assignment Operator</a>
</p>
<pre>
$var = Right Expression
</pre>
<p>
  <a href="#language-type-compatible">Type Compatibility</a>,a compile-time error occurs
</p>
<p>
  Set Lexical Variable Value,
</p>
<p>
  Set Lexical Variable Value,<a href="#language-expression">Expression</a>
</p>
<p>
  Right Expression,Object Type ,Reference Count1
</p>
<p>
  ,$var,Reference Count1
</p>
<h4 id="language-expression-get-package-var">Get Package Variable Value</h4>
<p>
  Use the following syntax to get the value of Package Variable.
</p>
<p>
  Package Variable the following syntax 
</p>
<pre>
$PACKAGE_NAME::PACKAGE_VARIABLE_NAME
</pre>
<p>
  Package Package Variable "PACKAGE_NAME::"
</p>
<pre>
$PACKAGE_VARIABLE_NAME
</pre>
<p>
 Get Package Variable Value,<a href="#language-expression">Expression</a>
</p>
<p>
  DefinitionPackage Variable ,a compile-time error occurs
</p>
<p>
  Package Package Variable ,a compile-time error occurs
</p>
<p>
  <b>Get Package Variable Value Example:</b>
</p>
<pre>
package Foo {
  our $VAR : int;

  sub bar : int () {
    my $var1 = $Foo::VAR;
    my $var2 = $VAR;
  }
}
</pre>
<h4 id="language-expression-set-package-var">Set Package Variable Value</h4>
<p>
  Package Variable the following syntax 
</p>
<pre>
$Class::Package Variable Name = Right Expression
</pre>
  Package Package Variable "Class::"
</p>
<pre>
$Package Variable Name = Right Expression
</pre>
<p>
  Package Variable ,<a href="#language-expression">Expression</a>,Package Variable 
</p>
<p>
  DefinitionPackage Variable ,
</p>
<p>
  Package Package Variable ,a compile-time error occurs
</p>
<p>
  <b>Set Package Variable Value Example:</b>
</p>
<pre>
package Foo {
  our $VAR : int;

  sub bar : int () {
    $Foo::VAR = 1;
    $VAR = 3;
  }
}
</pre>
<h4 id="language-expression-get-exception-var">Get Exception Variable Value</h4>
<p>
  the following syntax 
</p>
<pre>
$@
</pre>
<p>
 Get Exception Variable Value,<a href="#language-expression">Expression</a>
</p>
<p>
 Get Exception Variable Value,<a href="#language-type-string">String Type</a>
</p>
<p>
  <b>Get Exception Variable ValueExample</b>
</p>
<p>
  Get Exception Variable ValueExample
</p>
<pre>
eval {
  foo();
};

if (my $message = $@) {

}
</pre>
<h4 id="language-expression-set-exception-var">Set Exception Variable Value</h4>
<p>
  the following syntax 
</p>
<pre>
$@ = Right Expression
</pre>
<p>
  Right Expression<a href="#language-type-string-compatible">String Compatible Type</a>
</p>
<p>
 Set Exception Variable Value,<a href="#language-expression">Expression</a>
</p>
<p>
 Set Exception Variable Value,,<a href="#language-type-string">String Type</a>
</p>
<p>
  <b>Set Exception Variable ValueExample</b>
</p>
<p>
  Set Exception Variable ValueExample
</p>
<pre>
$@ = "Error";
</pre>
<h4 id="language-expression-get-field-class-based-object">Get Class Based Object Field Value</h4>
<p>
  Get Class Based Object Field Value,
</p>
<pre>
Invocant Expression-&gt;{Field Name}
</pre>
<p>
  Invocant Expression,<a href="#language-type-class">Class Type</a>Invocant Expression,<a href="#language-type-multi-numeric">Multi Numeric Type</a>,<a href="#language-expression-get-field-multi-numeric">Get Multi Numeric Field Value</a>,<a href="#language-type-ref-multi-numeric">Multi Numeric Reference Type</a>,<a href="#language-expression-get-field-multi-numeric-deref">Get Multi Numeric Field Value via Dereference</a>,,a compile-time error occurs
</p>
<p>
  Field Name,,a compile-time error occurs
</p>
<p>
  Get Class Based Object Field Value,Field<a href="#language-expression">Expression</a>
</p>
<p>
  Type,FieldType
</p>
<p>
  <b>Get Class Based Object Field ValueExample</b>
</p>
<p>
  Get Class Based Object Field ValueExample
</p>
<pre>
my $point = Point-&gt;new;
my $x = $point-&gt;{x};
</pre>
<h4 id="language-expression-set-field-class-based-object">Set Class Based Object Field Value</h4>
<p>
  Set Class Based Object Field Value,
</p>
<pre>
Invocant Expression-&gt;{Field Name} = Right Expression
</pre>
<p>
  Invocant Expression,<a href="#language-type-class">Class Type</a>Invocant Expression,<a href="#language-type-multi-numeric">Multi Numeric Type</a>,<a href="#language-expression-get-field-multi-numeric">Set Multi Numeric Field Value</a>,<a href="#language-type-ref-multi-numeric">Multi Numeric Reference Type</a>,<a href="#language-expression-get-field-multi-numeric-deref">Set Multi Numeric Field Value via Dereference</a>,,a compile-time error occurs
</p>
<p>
  Field Name,,a compile-time error occurs
</p>
<p>
  Right ExpressionType,FieldTypeotherwise a compile-time error occurs.
</p>
<p>
  Set Class Based Object Field Value,Field<a href="#language-expression">Expression</a>
</p>
<p>
  Type,FieldType
</p>
<p>
  Right Expression,Object Type ,Reference Count1
</p>
<p>
  ,Field,Reference Count1
</p>
<p>
  <b>Set Class Based Object Field ValueExample</b>
</p>
<p>
  Set Class Based Object Field ValueExample
</p>
<pre>
my $point = Point-&gt;new;
$point-&gt;{x} = 1;
</pre>
<h4 id="language-expression-get-field-multi-numeric">Get Multi Numeric Field Value</h4>
<p>
  Get Multi Numeric Field Value,
</p>
<pre>
Invocant Expression-&gt;{Field Name}
</pre>
<p>
  Invocant Expression,<a href="#language-type-class">Multi Numeric Type</a>Invocant Expression,<a href="#language-type-class">Class Type</a>,<a href="#language-expression-get-field-class-based-object">Get Class Based Object Field Value</a>,<a href="#language-type-ref-multi-numeric">Multi Numeric Reference Type</a>,<a href="#language-expression-get-field-multi-numeric-deref">Get Multi Numeric Field Value via Dereference</a>,,a compile-time error occurs
</p>
<p>
  Field Name,,a compile-time error occurs
</p>
<p>
  Get Multi Numeric Field Value,<a href="#language-sub-stack">Subroutine Callstack</a>Field<a href="#language-expression">Expression</a>
</p>
<p>
  Type,FieldType
</p>
<p>
  <b>Get Multi Numeric Field ValueExample</b>
</p>
<p>
  Get Multi Numeric Field ValueExample
</p>
<pre>
my $z : SPVM::Complex_2d;
my $re = $z-&gt;{x};
</pre>
<h4 id="language-expression-set-field-multi-numeric">Set Multi Numeric Field Value</h4>
<p>
  Set Multi Numeric Field Value,
</p>
<pre>
Invocant Expression-&gt;{Field Name} = Right Expression
</pre>
<p>
  Invocant Expression,<a href="#language-type-class">Multi Numeric Type</a>Invocant Expression,<a href="#language-type-class">Class Type</a>,<a href="#language-expression-set-field-class-based-object">Set Class Based Object Field Value</a>,<a href="#language-type-ref-multi-numeric">Multi Numeric Reference Type</a>,<a href="#language-expression-set-field-multi-numeric-deref">Set Multi Numeric Field Value via Dereference</a>,,a compile-time error occurs
</p>
<p>
  Field Name,,a compile-time error occurs
</p>
<p>
  Right ExpressionType,FieldTypeotherwise a compile-time error occurs.
</p>
<p>
  Set Multi Numeric Field Value,<a href="#language-sub-stack">Subroutine Callstack</a>Field<a href="#language-expression">Expression</a>
</p>
<p>
  Type,FieldType
</p>
<p>
  <b>Set Multi Numeric Field ValueExample</b>
</p>
<p>
  Set Multi Numeric Field ValueExample
</p>
<pre>
my $z : SPVM::Complex_2d;
$z-&gt;{x} = 2.5;
</pre>
<h4 id="language-expression-get-field-multi-numeric-deref">Dereference Get Multi Numeric Field Value</h4>
<p>
  Dereference Get Multi Numeric Field Value,
</p>
<pre>
Invocant Expression-&gt;{Field Name}
</pre>
<p>
  Invocant Expression,<a href="#language-type-ref-multi-numeric">Multi Numeric Reference Type</a>Invocant Expression,<a href="#language-type-class">Class Type</a>,<a href="#language-expression-get-field-class-based-object">Get Class Based Object Field Value</a>,<a href="#language-type-multi-numeric">Multi Numeric Type</a>,<a href="#language-expression-get-field-multi-numeric">Get Multi Numeric Field Value</a>,,a compile-time error occurs
</p>
<p>
  Field Name,,a compile-time error occurs
</p>
<p>
  Dereference Get Multi Numeric Field Value,<a href="#language-sub-stack">Subroutine Callstack</a>Field<a href="#language-expression">Expression</a>
</p>
<p>
  Type,FieldType
</p>
<p>
  <b>Dereference Get Multi Numeric Field ValueExample</b>
</p>
<p>
  Dereference Get Multi Numeric Field ValueExample
</p>
<pre>
my $z : SPVM::Complex_2d;
my $z_ref = \$z;
my $re = $z_ref-&gt;{x};
</pre>
<h4 id="language-expression-set-field-multi-numeric-deref">Dereference Set Multi Numeric Field Value</h4>
<p>
  Dereference Set Multi Numeric Field Value,
</p>
<pre>
Invocant Expression-&gt;{Field Name} = Right Expression
</pre>
<p>
  Invocant Expression,<a href="#language-type-ref-multi-numeric">Multi Numeric Reference Type</a>Invocant Expression,<a href="#language-type-class">Class Type</a>,<a href="#language-expression-set-field-class-based-object">Set Class Based Object Field Value</a>,<a href="#language-type-multi-numeric">Multi Numeric Type</a>,<a href="#language-expression-set-field-multi-numeric">Set Multi Numeric Field Value</a>,,a compile-time error occurs
</p>
<p>
  Field Name,,a compile-time error occurs
</p>
<p>
  Right ExpressionType,FieldTypeotherwise a compile-time error occurs.
</p>
<p>
  Dereference Set Multi Numeric Field Value,<a href="#language-sub-stack">Subroutine Callstack</a>Field<a href="#language-expression">Expression</a>
</p>
<p>
  Type,FieldType
</p>
<p>
  <b>Dereference Set Multi Numeric Field ValueExample</b>
</p>
<p>
  Dereference Set Multi Numeric Field ValueExample
</p>
<pre>
my $z : SPVM::Complex_2d;
my $z_ref = \$z;
$z_ref-&gt;{x} = 2.5;
</pre>
<h4 id="language-expression-get-array-element">Get Array Element Value</h4>
<p>
  Array,
</p>
<p>
<p>
  ArrayExpression->[Expression]
</p>
</p>
<p>
  ArrayExpression,<a href="#language-type-array">Array Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Expression,<a href="#language-type-int">int Type</a> otherwise a compile-time error occurs.
</p>
<p>
  Array,,Expression
</p>
<p>
  ,ArrayExpression,Undefined Value,
</p>
<p>
  ,,0,,Array,
</p>
<p>
  <b>Get Array Element ValueExample</b>
</p>
<p>
  Get Array Element ValueExample
</p>
<pre>
my $nums = new int[3];
my $num = $nums-&gt;[1];

my $points = new Point[3];
my $point = $points-&gt;[1];

my $objects : oarray = $points;
my $object = (Point)$objects-&gt;[1];
</pre>
<h4 id="language-expression-set-array-element">Set Array Element Value</h4>
<p>
  Array,
</p>
<p>
<p>
  ArrayExpression->[Expression] = Right Expression
</p>
</p>
<p>
  ArrayExpression,<a href="#language-type-array">Array Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Expression,<a href="#language-type-int">int Type</a> otherwise a compile-time error occurs.
</p>
<p>
  Right ExpressionType,ArrayType<a href="#language-type-compatible">Type Compatibility</a>otherwise a compile-time error occurs.
</p>
<p>
  Array,,Expression
</p>
<p>
  ,ArrayExpression,Undefined Value,
</p>
<p>
  ,,0,,Array,
</p>
<p>
  Right Expression,Object Type ,Reference Count1
</p>
<p>
  ,Array,Reference Count1
</p>
<p>
  <b>Set Array Element ValueExample</b>
</p>
<p>
  Set Array Element ValueExample
</p>
<pre>
my $nums = new int[3];
$nums-&gt;[1] = 3;

my $points = new Point[3];
$points-&gt;[1] = Point-&gt;new(1, 2);

my $objects : oarray = $points;
$objects-&gt;[2] = Point-&gt;new(3, 5);;
</pre>
<h4 id="language-expression-new">Create Object</h4>
<p>
  ,new  Keyword the following syntax 
</p>
<pre>
my $object = new PACKAGE_NAME;
</pre>
<p>
  Package ,<a href="#language-type-class">Class Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Field,<a href="language-type-initial-value">Type Initial Value</a>
</p>
<p>
  Create Object,<a href="#language-expression">Expression</a>
</p>
<p>
  Reference Count,0,Reference Count1,,
</p>
<p>
  <b>Create ObjectExample</b>
</p>
<pre>
my $object = new Foo;
</pre>
<p>
  
</p>
<ul class="list">
  <li>Reference Count</li>
  <li>Back references of Weaken Reference</li>
  <li>Basic Type ID</li>
  <li>Type Dimension(Always 0)</li>
</ul>
<h4 id="language-expression-new-array">Create Array</h4>
<p>
  Array,new  Keyword the following syntax 
</p>
<pre>
my $object = new Type[Expression];
</pre>
<p>
  Type,<a href="#language-type-numeric">Numeric Type</a>,<a href="#language-type-object">Object Type</a>,<a href="#language-type-multi-numeric">Multi Numeric Type</a>Type,a compile-time error occurs
</p>
<p>
  Expression,<a href="#language-type-int">int Type</a> the following <a href="#language-type-numeric">Numeric Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Expression,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>
</p>
<p>
  ExpressionArray
</p>
<p>
  Array,<a href="language-type-initial-value">Type Initial Value</a>
</p>
<p>
  Array,,
</p>
<p>
  Create Array,<a href="#language-expression">Expression</a>
</p>
<p>
  Array,<a href="#language-type-object">Object Type</a>
</p>
<p>
  <b>Create ArrayExample</b>
</p>
<pre>
my $nums = new int[3];
my $objects = new Foo[3];
my $objects = new object[3];
my $values = new Complex_2d[3]
</pre>
<p>
  Array,
</p>
<ul class="list">
  <li>Reference Count</li>
  <li>Basic Type ID</li>
  <li>Type Dimension(1)</li>
  <li>Array Length</li>
</ul>
<p>
  Array,syntax ,,<a href="#language-type-initial-value">Type Initial Value</a>
</p>
<pre>
my $nums = new int[][3];
my $nums = new int[][][3];
</pre>
<p>
  Array,255
</p>
<h4 id="language-expression-array-init">Array Initialization</h4>
<p>
  SPVM,Create ArrayArray Initializationsyntax Expression
</p>
<pre>
[]
[Expression1, Expression2, Expression3]
</pre>
<p>
  Array Initialization,ExpressionArray
</p>
<p>
  ArrayType,Expression1TypeArray Type,<a href="#language-type-any-object">Any Object Type</a>Array Type
</p>
<p>
  Expression2,<a href="#language-type-compatible">Type Compatibility</a>,
</p>
<h4 id="language-expression-callsub">Subroutine Call</h4>
<p>
  <a href="#language-sub-definition">Subroutine Definition</a>DefinitionSubroutine ,2,<b></b><b>Method Call </b>
</p>
<h4 id="language-expression-callsub-func"></h4>
<p>
  ,<a href="#language-sub-method">Method</a>Subroutine Method,<a href="#language-sub-definition">Subroutine Definition</a>,<a href="#language-type-self">self Type</a>,Method
</p>
<p>
  the following ,255
</p>
<pre>
Package Name-&gt;Subroutine Name(1, 2, 3, ..., n);
</pre>
<p>
  PerlClassMethod Call ,SPVM,
</p>
<p>
  ,Package Name
</p>
<pre>
Subroutine Name(1, 2, 3, ..., n);
</pre>
<p>
  Package Subroutine ,the following 
</p>
<p>
  Current Package DefinitionSubroutine ,Current Package Subroutine 
</p>
<p>
  ,,Subroutine DefinitionDefinition,a compile-time error occursType,Subroutine DefinitionDefinitionType<a href="#language-type-compatible">Type Compatibility</a>,a compile-time error occurs
</p>
<p>
  ,Return Value<a href="#language-type-void">void Type</a>,Return Value
</p>
<p>
  ,<a href="#language-expression">Expression</a>
<p>
<p>
  <b>Subroutine Example</b>
</p>
<p>
  Subroutine Example
</p>
<pre>
my $ret = Foo-&gt;bar(1, 2, 3);
my $ret = bar(1, 2, 3);
</pre>
<h4 id="language-expression-callsub-method">Method Call </h4>
<p>
  Method Call ,<a href="#language-sub-method">Method</a>Subroutine Method,<a href="#language-sub-definition">Subroutine Definition</a>,<a href="#language-type-self">self Type</a>,Method
</p>
<p>
  Method Call ,<a href="#language-expression-new">Create Object</a>the following syntax 
</p>
<pre>
-&gt;Subroutine Name(1, 2, 3, ..., n);
</pre>
<p>
  Method Call ,,Subroutine DefinitionDefinition,a compile-time error occursType,Subroutine DefinitionDefinitionType<a href="#language-type-compatible">Type Compatibility</a>,a compile-time error occurs
</p>
<p>
  Method Call ,Return Value<a href="#language-type-void">void Type</a>,Return Value
</p>
<p>
  Method Call ,<a href="#language-expression">Expression</a>
<p>
<p>
  <b>Method Call Example</b>
</p>
<p>
  Method Call Example
</p>
<pre>
my $point = new Point;
$point-&gt;set_x(3);
</pre>
<p>
  <a href="#language-sub-new-callback-object">Create Callback Object</a>,Method
</p>
<pre>
-&gt;(1, 2, 3, ..., n);
</pre>
<p>
  <b>Create Callback ObjectMethodExample</b>
</p>
<p>
  Create Callback ObjectMethodExample
</p>
<pre>
my $cb_obj = sub : int ($self: self, $num1 : int, $num2 : int) {
  return $num1 + $num2;
};

my $ret = $cb_obj-&gt;(1, 2);
</pre>
<h4 id="language-expression-operator-deref-get">Dereference </h4>
<p>
  Dereference ,ReferenceCOperator "*"
</p>
<pre>
$
</pre>
<p>
  Type,Reference Type otherwise a compile-time error occurs.
</p>
<p>
  Dereference ,<a href="#language-expression">Expression</a>
</p>
<pre>
  &lt;b&gt;Dereference Example&lt;/b&gt;
</pre>
<pre>
my $num : int;
my $num_ref : int&amp; = \$num;
my $num_deref : int = $$num_ref;

my $z : SPVM::Complex_2d;
my $z_ref : SPVM::Complex_2d&amp; = \$z;
my $z_deref : SPVM::Complex_2d = $$z_ref;
</pre>
<h4 id="language-expression-operator-deref-set">Dereference </h4>
<p>
  Dereference ,ReferenceCOperator "*"
</p>
<pre>
$ = Expression
</pre>
<p>
  Type,Reference Type otherwise a compile-time error occurs.
</p>
<p>
  ExpressionType,Dereference Typeotherwise a compile-time error occurs.
</p>
<p>
  Dereference ,<a href="#language-expression">Expression</a>
</p>
<pre>
  &lt;b&gt;Dereference Example&lt;/b&gt;
</pre>
<pre>
my $num : int;
my $num_ref : int&amp; = \$num;
$$num_ref = 1;

my $z : SPVM::Complex_2d;
my $z_ref : SPVM::Complex_2d&amp; = \$z;

my $z2 : SPVM::Complex_2d;

$$z_ref = $z2;
</pre>
<h4 id="language-expression-current-package">Get Current Package Name</h4>
<p>
  <b>Get Current Package Name</b> is a Expression to get the current package name by __PACKAGE__ <a href="#language-lex-keyword">Keyword</a>.
</p>
<pre>
__PACKAGE__
</pre>
<p>
  <b>Get Current Package Name Example:</b>
</p>
<pre>
package Foo::Bar {
  sub baz : void () {
    # Foo::Bar
    my $package_name == __PACKAGE__;
  }
}
</pre>
<h4 id="language-expression-current-package">Get Current File Name</h4>
<p>
  <b>Get Current File Name</b> is a Expression to get the current file name by __LINE__ <a href="#language-lex-keyword">Keyword</a>.
</p>
<pre>
__FILE__
</pre>
<p>
  Current File Name means the relative path from the base path of the module file. For example, if the Module Loaded Path is "/mypath" and the Module name is "Foo::Bar", the absolute path is "/mypath/Foo/Bar.spvm" and the relative path is "Foo/Bar.spvm". "Foo/Bar.spvm" is Current File Name.
</p>
<p>
  <b>Get Current File Name Example:</b>
</p>
<pre>
# Foo/Bar.spvm
package Foo::Bar {
  sub baz : void () {
    # Foo/Bar.spvm
    my $file_name == __FILE__;
  }
}
package Foo::Bar2 {
  sub baz : void () {
    # Foo/Bar.spvm
    my $file_name == __FILE__;
  }
}
</pre>
<h4 id="language-expression-current-package">Get Current Line Number</h4>
<p>
  <b>Get Current Line Number</b> is a Expression to get the current line number of the current file by __LINE__ <a href="#language-lex-keyword">Keyword</a>.
</p>
<pre>
__LINE__
</pre>
<p>
  <b>Get Current Line Number Example:</b>
</p>
<pre>
package Foo::Bar {
  sub baz : void () {
    # 4
    my $line = __LINE__;
  }
}
</pre>
<h3 id="language-operator">Operator</h3>
<ul class="list">
  <li><a href="#language-expression-operator-summary">Operator Summary</a></li>
  <li><a href="#language-expression-operator-unary">Unary Operator</a></li>
  <li><a href="#language-expression-operator-binary">Binary Operator</a></li>
  <li><a href="#language-expression-operator-sequential">Sequential Operator</a></li>
  <li><a href="#language-expression-operator-arithmetic">Arithmetic Operator</a></li>
  <li><a href="#language-expression-operator-unary-plus">Unary Plus Operator</a></li>
  <li><a href="#language-expression-operator-unary-minus">Unary Minus Operator</a></li>
  <li><a href="#language-expression-operator-add">Addition Operator</a></li>
  <li><a href="#language-expression-operator-subtract">Subtraction Operator</a></li>
  <li><a href="#language-expression-operator-multiply">Multiplication Operator</a></li>
  <li><a href="#language-expression-operator-divide">Division Operator</a></li>
  <li><a href="#language-expression-operator-remainder">Remainder Operator</a></li>
  <li><a href="#language-expression-operator-inc">Increment Operator</a></li>
  <li><a href="#language-expression-operator-dec">Decrement Operator</a></li>
  <li><a href="#language-expression-operator-bit">Bit Operator</a></li>
  <li><a href="#language-expression-operator-bit-and">Bit AND Operator</a></li>
  <li><a href="#language-expression-operator-bit-or">Bit OR Operator</a></li>
  <li><a href="#language-expression-operator-bit-not">Bit NOT Operator</a></li>
  <li><a href="#language-expression-operator-shift">Shift Operator</a></li>
  <li><a href="#language-expression-operator-left-shift">Left Shift Operator</a></li>
  <li><a href="#language-expression-operator-arithmetic-right-shift">Arithmetic Right Shift Operator</a></li>
  <li><a href="#language-expression-operator-logical-right-shift">Logical Right Shift Operator</a></li>
  <li><a href="#language-expression-operator-comparison">Operator</a></li>
  <li><a href="#language-expression-operator-comparison-numeric">Operator</a></li>
  <li><a href="#language-expression-operator-comparison-string">StringOperator</a></li>
  <li><a href="#language-expression-operator-isa">isa Operator</a></li>
  <li><a href="#language-expression-operator-logical">Operator</a></li>
  <li><a href="#language-expression-operator-logical-and">Logical AND Operator</a></li>
  <li><a href="#language-expression-operator-logical-or">Logical OR Operator</a></li>
  <li><a href="#language-expression-operator-logical-not">Logical NOT Operator</a></li>
  <li><a href="#language-expression-operator-concat">StringOperator</a></li>
  <li><a href="#language-expression-operator-assign">Assignment Operator</a></li>
  <li><a href="#language-expression-operator-assign-special">Special Assignment Operator</a></li>
  <li><a href="#language-expression-operator-ref">Reference Operator</a></li>
  <li><a href="#language-expression-operator-array-length">Array Length Operator</a></li>
  <li><a href="#language-expression-operator-string-length">String Length Operator</a></li>
  <li><a href="#language-expression-operator-scalar">Scalar Operator</a></li>
  <li><a href="#language-expression-operator-isweak">isweakOperator</a></li>
</ul>
<h4 id="language-expression-operator-summary">Operator Summary </h4>
<p>
  Operator ,<a href="#language-expression-operator-unary">Unary Operator</a>,<a href="#language-expression-operator-binary">Binary Operator</a>,<a href="#language-expression-operator-inc">Increment Operator</a>,<a href="#language-expression-operator-dec">Decrement Operator</a>,<a href="#language-expression-operator-comparison">Operator</a>,<a href="#language-expression-operator-logical">Operator</a>,<a href="#language-expression-operator-assign">Assignment Operator</a>
</p>
<h4 id="language-expression-operator-unary">Unary Operator  </h4>
<p>
  Unary Operator  ,<a href="#language-expresssion">Expression</a>Operator 
</p>
<pre>
UNARY_OPERATOR Expression
</pre>
<p>
  Unary Operator  ,<a href="#language-expression-operator-unary-plus">Unary Plus Operator</a>,<a href="#language-expression-operator-unary-minus">Unary Minus Operator</a>,<a href="#language-expression-operator-bit-not">Bit NOT Operator</a>,<a href="#language-expression-operator-logical-not">Logical NOT Operator</a>,<a href="#language-expression-operator-array-legnth">Array Length Operator</a>,<a href="#language-expression-operator-string-legnth">String Length Operator</a>
</p>
<p>
  Increment Operator Decrement Operator ,Unary Operator  
</p>
<h4 id="language-expression-operator-binary">Binary Operator  </h4>
<p>
  Binary Operator  ,Left ExpressionRight ExpressionOperator ,<a href="#language-expresssion">Expression</a>
</p>
<pre>
Left Expression Binary Operator   Right Expression
</pre>
<p>
  Binary Operator  ,<a href="#language-expression-operator-add">Addition Operator</a>,<a href="#language-expression-operator-subtract">Subtraction Operator</a>,<a href="#language-expression-operator-multiply">Multiplication Operator</a>,<a href="#language-expression-operator-divide">Division Operator</a>,<a href="#language-expression-operator-remainder">Remainder Operator</a>,<a href="#language-expression-operator-bit-and">Bit AND Operator</a>,<a href="#language-expression-operator-bit-or">Bit OR Operator</a>,<a href="#language-expression-operator-logical-and">Logical AND Operator</a>,<a href="#language-expression-operator-logical-or">Logical OR Operator</a>,<a href="#language-expression-operator-shift">Shift Operator</a>,<a href="#language-expression-operator-concat">StringOperator</a>
</p>
<h4 id="language-expression-operator-sequential">Sequential Operator </h4>
<p>
  Sequential Operator ,<a href="#language-expression">Expression</a>,Operator 
</p>
<pre>
(Expression1, Expression2, Expression3)
</pre>
<p>
  Expression
<p>
<p>
  Sequential Operator <a href="#language-expression">Expression</a>
</p>
<p>
  <b>Sequential Operator Example</b>
</p>
<p>
  Sequential Operator Example
</p>
<pre>
# $foo3
my $foo = (1, 2, 3);

# $x3,$ret5
my $x = 1;
my $y = 2;
my $ret = ($x += 2, $x + $y);
</pre>
<li><a href="#language-expression-operator-sequential">Sequential Operator</a></li>
<h4 id="language-expression-operator-arithmetic">Arithmetic Operator </h4>
<p>
  Arithmetic Operator ,Operator ,<a href="#language-expression-operator-add">Addition Operator</a>,<a href="#language-expression-operator-subtract">Subtraction Operator</a>,<a href="#language-expression-operator-multiply">Multiplication Operator</a>,<a href="#language-expression-operator-divide">Division Operator</a>,<a href="#language-expression-operator-remainder">Remainder Operator</a>,<a href="#language-expression-operator-unary-plus">Unary Plus Operator</a>,<a href="#language-expression-operator-unary-minus">Unary Minus Operator</a>,<a href="#language-expression-operator-inc">Increment Operator</a>,<a href="#language-expression-operator-dec">Decrement Operator</a>
</p>
<h4 id="language-expression-operator-unary-plus">Unary Plus Operator </h4>
<p>
  Unary Plus Operator "+"<a href="#language-expression-operator-unary">Unary Operator</a>
</p>
<pre>
+Expression
</pre>
<p>
  Expression<a href="#language-type-numeric">Numeric Type</a>otherwise a compile-time error occurs.
</p>
<p>
  <a href="#language-expression">Expression</a>,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Unary Plus Operator ,
</p>
<p>
  Unary Plus Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Unary Plus Operator Return ValueType,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Unary Plus Operator 
</p>
<p>
  <b>Unary Plus Operator Example</b>
</p>
<pre>
my $num = +10;
</pre>
<h4 id="language-expression-operator-unary-minus">Unary Minus Operator </h4>
<p>
  Unary Minus Operator "-"<a href="#language-expression-operator-unary">Unary Operator</a>
</p>
<pre>
-Expression
</pre>
<p>
  Expression<a href="#language-type-numeric">Numeric Type</a>otherwise a compile-time error occurs.
</p>
<p>
  <a href="#language-expression">Expression</a>,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Unary Minus Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>,float Type,double TypeDefinition
</p>
<pre>
-x
</pre>
<p>
  Unary Minus Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Unary Minus Operator Return ValueType,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Unary Minus Operator 
</p>
<p>
  <b>Unary Minus Operator Example</b>
</p>
<pre>
my $num = -10;
</pre>
<h4 id="language-expression-operator-add">Addition Operator </h4>
<p>
  Addition Operator "+",<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression + Right Expression
</pre>
<p>
  Left ExpressionRight Expression,<a href="#language-type-numeric">Numeric Type</a>otherwise a compile-time error occurs.
<p>
<p>
  Left ExpressionRight Expression,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Addition Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>,float Type,double TypeDefinition
</p>
<pre>
x + y;
</pre>
<p>
  Addition Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Addition Operator Return ValueType,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Addition Operator ,
</p>
<h4 id="language-expression-operator-subtract">Subtraction Operator </h4>
<p>
  Subtraction Operator "-"<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression - Right Expression
</pre>
<p>
  Left ExpressionRight Expression,<a href="#language-type-numeric">Numeric Type</a>otherwise a compile-time error occurs.
<p>
<p>
  Left ExpressionRight Expression,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Subtraction Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>,float Type,double TypeDefinition
</p>
<pre>
x - y;
</pre>
<p>
  Subtraction Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Subtraction Operator Return ValueType,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Subtraction Operator ,
</p>
<h4 id="language-expression-operator-multiply">Multiplication Operator </h4>
<p>
  Multiplication Operator "*"<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression * Right Expression
</pre>
<p>
  Left ExpressionRight Expression,<a href="#language-type-numeric">Numeric Type</a>otherwise a compile-time error occurs.
<p>
<p>
  Left ExpressionRight Expression,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Multiplication Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>,float Type,double TypeDefinition
</p>
<pre>
x * y;
</pre>
<p>
  Multiplication Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Multiplication Operator Return ValueType,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Multiplication Operator ,
</p>
<h4 id="language-expression-operator-divide">Division Operator </h4>
<p>
  Division Operator "/"<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression / Right Expression
</pre>
<p>
  Left ExpressionRight Expression,<a href="#language-type-numeric">Numeric Type</a>otherwise a compile-time error occurs.
<p>
<p>
  Left ExpressionRight Expression,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Division Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>,float Type,double TypeDefinition
</p>
<pre>
x / y;
</pre>
<p>
  Division Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Division Operator Return ValueType,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Integral Type,Division Operator ,0,
</p>
<p>
  Floating Point Type,Division Operator ,
</p>
<h4 id="language-expression-operator-remainder">Remainder Operator </h4>
<p>
  Remainder Operator "%"<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression % Right Expression
</pre>
<p>
  Left ExpressionRight Expression,<a href="#language-type-integral">Integral Type</a>otherwise a compile-time error occurs.
<p>
<p>
  Left ExpressionRight Expression,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Remainder Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>Definition
</p>
<pre>
x % y;
</pre>
<p>
  Remainder Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Remainder Operator Return ValueType,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Remainder Operator ,0,
</p>
<h4 id="language-expression-operator-inc">Increment Operator </h4>
<p>
  Increment Operator ,1Operator Increment Operator ,,
</p>
<pre>
# 
++Lexical Variable 
++Package Variable 
++Field Access
++Array Access
++Dereference 

# 
Lexical Variable ++
Package Variable ++
Field Access++
Array Access++
Dereference ++
</pre>
<p>
  Increment Operator ,<a href="#language-lex-var">Lexical Variable</a>,<a href="#language-package-var">Package Variable</a>,<a href="#language-field-access">Field Access</a>,<a href="#language-array-access">Array Access</a>,<a href="#language-deref">Dereference</a>otherwise a compile-time error occurs.
</p>
<p>
  Increment Operator Type,<a href="#language-type-numeric">Numeric Type</a>otherwise 
</p>
<p>
  <b>Increment Operator </b>
</p>
<p>
  Increment Operator ,,
</p>
<p>
  Increment Operator ,Expression1,TypeType Cast,
</p>
<pre>
( = (Type Cast)( + 1))
</pre>
<p>
  ,<a href="#language-type-byte">byte Type</a>,Expression
</p>
<pre>
($num = (byte)($num + 1))
</pre>
<p>
  <b>Increment Operator </b>
</p>
<p>
  Increment Operator ,,
</p>
<p>
  Increment Operator ,Sequential Operator ,Expression,1,TypeType Cast,,
</p>
<pre>
(my  = ,  = (Type Cast)( + 1), )
</pre>
<p>
  ,<a href="#language-type-byte">byte Type</a>,Expression
</p>
<pre>
(my $tmp = $num, $num = (byte)($num + 1), $tmp)
</pre>
<h4 id="language-expression-operator-dec">Decrement Operator </h4>
<p>
  Decrement Operator ,1Operator Decrement Operator ,,
</p>
<pre>
# 
--Lexical Variable 
--Package Variable 
--Field Access
--Array Access
--Dereference 

# 
Lexical Variable --
Package Variable --
Field Access--
Array Access--
Dereference --
</pre>
<p>
  Decrement Operator ,<a href="#language-lex-var">Lexical Variable</a>,<a href="#language-package-var">Package Variable</a>,<a href="#language-field-access">Field Access</a>,<a href="#language-array-access">Array Access</a>,<a href="#language-deref">Dereference</a>otherwise a compile-time error occurs.
</p>
<p>
  Decrement Operator Type,<a href="#language-type-numeric">Numeric Type</a>otherwise 
</p>
<p>
  <b>Pre Decrement Operator </b>
</p>
<p>
  Pre Decrement Operator ,,
</p>
<p>
  Pre Decrement Operator ,Expression1,TypeType Cast,
</p>
<pre>
( = (Type Cast)( - 1))
</pre>
<p>
  ,<a href="#language-type-byte">byte Type</a>,Expression
</p>
<pre>
($num = (byte)($num - 1))
</pre>
<p>
  <b>Post Decrement Operator </b>
</p>
<p>
  Post Decrement Operator ,,
</p>
<p>
  Post Decrement Operator ,Sequential Operator ,Expression,1,TypeType Cast,,
</p>
<pre>
(my  = ,  = (Type Cast)( - 1), )
</pre>
<p>
  ,<a href="#language-type-byte">byte Type</a>,Expression
</p>
<pre>
(my $tmp = $num, $num = (byte)($num - 1), $tmp)
</pre>
<h4 id="language-expression-operator-bit">Bit Operator </h4>
<p>
  Bit Operator ,Bit Operator ,><a href="#language-expression-operator-bit-and">Bit AND Operator</a>,<a href="#language-expression-operator-bit-or">Bit OR Operator</a>,<a href="#language-expression-operator-bit-not">Bit NOT Operator</a>
</p>
<h4 id="language-expression-operator-bit-and">Bit AND Operator </h4>
<p>
  Bit AND"&"<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression &amp; Right Expression
</pre>
<p>
  Left ExpressionRight Expression,<a href="#language-type-integral">Integral Type</a>otherwise a compile-time error occurs.
<p>
<p>
  Left ExpressionRight Expression,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Bit AND Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>Definition
</p>
<pre>
x &amp; y;
</pre>
<p>
  Bit AND Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Bit AND Operator Return ValueType,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Bit AND Operator ,
</p>
<h4 id="language-expression-operator-bit-or">Bit OR Operator </h4>
<p>
  Bit OR"|"<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression | Right Expression
</pre>
<p>
  Left ExpressionRight Expression,<a href="#language-type-integral">Integral Type</a>otherwise a compile-time error occurs.
<p>
<p>
  Left ExpressionRight Expression,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Bit OR Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>Definition
</p>
<pre>
x | y;
</pre>
<p>
  Bit OR Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Bit OR Operator Return ValueType,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Bit OR Operator ,
</p>
<h4 id="language-expression-operator-bit-not">Bit NOT Operator </h4>
<p>
  Bit NOT Operator "~"<a href="#language-expression-operator-unary">Unary Operator</a>
</p>
<pre>
~Expression
</pre>
<p>
  Expression<a href="#language-type-integral">Integral Type</a>otherwise a compile-time error occurs.
</p>
<p>
  <a href="#language-expression">Expression</a>,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Bit NOT Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>Definition
</p>
<pre>
~x
</pre>
<p>
  Bit NOT Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Bit NOT Operator Return ValueType,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>Type
</p>
<p>
  Bit NOT Operator 
</p>
<p>
  <b>Bit NOT Operator Example</b>
</p>
<pre>
my $num = ~0xFF0A;
</pre>
<h4 id="language-expression-operator-shift">Shift Operator </h4>
<p>
  Shift Operator ,Bit Operator ,<a href="#language-expression-operator-left-shift">Left Shift Operator</a>,<a href="#language-expression-operator-arithmetic-right-shift">Arithmetic Right Shift Operator</a>,<a href="#language-expression-operator-logical-right-shift">Logical Right Shift Operator</a>
</p>
<h4 id="language-expression-operator-left-shift">Left Shift Operator </h4>
<p>
  "<<"<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression &lt;&lt; Right Expression
</pre>
<p>
  Left Expression,<a href="#language-type-integral">Integral Type</a>otherwise a compile-time error occurs.
<p>
<p>
  <a href="#language-expression">Left Expression</a>,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>
</p>
<p>
  Right Expression,<a href="#language-type-int">int Type</a> otherwise a compile-time error occurs.
<p>
<p>
  Left Shift Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>Definition
</p>
<pre>
x &lt;&lt; y;
</pre>
<p>
  Left Shift Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Left Shift Operator ,
</p>
<h4 id="language-expression-operator-arithmetic-right-shift">Arithmetic Right Shift Operator </h4>
<p>
  ">>"<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression &gt;&gt; Right Expression
</pre>
<p>
  Left Expression,<a href="#language-type-integral">Integral Type</a>otherwise a compile-time error occurs.
<p>
<p>
  <a href="#language-expression">Left Expression</a>,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>
</p>
<p>
  Right Expression,<a href="#language-type-int">int Type</a> otherwise a compile-time error occurs.
<p>
<p>
  Arithmetic Right Shift Operator ,C99the following x,<a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>Definition
</p>
<pre>
x &gt;&gt; y;
</pre>
<p>
  Arithmetic Right Shift Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Arithmetic Right Shift Operator ,
</p>
<h4 id="language-expression-operator-logical-right-shift">Logical Right Shift Operator </h4>
<p>
  ">>>"<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression &gt;&gt;&gt; Right Expression
</pre>
<p>
  Left Expression,<a href="#language-type-integral">Integral Type</a>otherwise a compile-time error occurs.
<p>
<p>
  <a href="#language-expression">Left Expression</a>,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>
</p>
<p>
  Right Expression,<a href="#language-type-int">int Type</a> otherwise a compile-time error occurs.
<p>
<p>
  Logical Right Shift Operator ,C99the following x,<a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>Definition
</p>
<pre>
(Integral Type Cast)((Integral Type Cast)x &gt;&gt; y);
</pre>
<p>
  Logical Right Shift Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Logical Right Shift Operator ,
</p>
<h4 id="language-expression-operator-comparison">Operator </h4>
<p>
  Operator ,Left ExpressionRight ExpressionOperator ,<a href="#language-expression">Expression</a>Operator 
</p>
<pre>
Left Expression Operator  Right Expression
</pre>
<p>
  Operator ,<a href="#language-expression-operator-comparison-numeric">Operator</a>,<a href="#language-expression-operator-comparison-string">StringOperator</a>,isa Operator 
</p>
<h4 id="language-expression-operator-comparison-numeric">Operator </h4>
<p>
  Operator ,,Left ExpressionRight ExpressionOperator ,<a href="#language-expression">Expression</a>Operator 
</p>
<pre>
Left Expression Operator  Right Expression
</pre>
<p>
  Operator 
</p>
<table>
  <tr>
    <th>Operator </th>
    <th>Type</th>
    <th></th>
  </tr>
  <tr>
    <td>
      Left Expression == Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionNumeric Type,Left ExpressionRight ExpressionObject Type (Undefined Value)
    </td>
    <td>
      Left ExpressionRight Expression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression != Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionNumeric Type,Left ExpressionRight ExpressionObject Type (Undefined Value)
    </td>
    <td>
      Left ExpressionRight Expression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression > Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionNumeric Type
    </td>
    <td>
      Left ExpressionRight Expression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression >= Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionNumeric Type
    </td>
    <td>
      Left ExpressionRight Expression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression < Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionNumeric Type
    </td>
    <td>
      Left ExpressionRight Expression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression <= Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionNumeric Type
    </td>
    <td>
      Left ExpressionRight Expression
    </td>
  </tr>
</table>
<p>
  Type,Typeotherwise a compile-time error occurs.
</p>
<p>
  Numeric Type,Left ExpressionRight Expression,<a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a>
</p>
<p>
  ,Operator ,C99the following <a href="#language-c99-type">C99Type</a>,<a href="#language-type-int">int Type</a> ,<a href="#language-type-long">long Type</a>,float Type,double Type,Object Type Definition
</p>
<pre>
# Numeric Type,Object Type 
(int32_t)(x == y);
(int32_t)(x != y);

# Numeric Type
(int32_t)(x &gt; y);
(int32_t)(x &gt;= y);
(int32_t)(x &lt; y);
(int32_t)(x &lt;= y);
</pre>
<p>
  Operator Return ValueType,<a href="#language-type-int">int Type</a> 
</p>
<p>
  Operator ,
</p>
<h4 id="language-expression-operator-comparison-string">StringOperator </h4>
<p>
  StringOperator ,String,Left ExpressionRight ExpressionOperator ,<a href="#language-expression">Expression</a>Operator 
</p>
<pre>
Left Expression StringOperator  Right Expression
</pre>
<p>
  Left ExpressionRight Expression,<a href="#language-type-string-compatible">String Compatible Type</a>
</p>
<p>
  StringOperator 
</p>
<table>
  <tr>
    <th>Operator </th>
    <th></th>
  </tr>
  <tr>
    <td>
      Left Expression eq Right Expression
    </td>
    <td>
      Left ExpressionRight Expression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression ne Right Expression
    </td>
    <td>
      Left ExpressionRight Expression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression gt Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionExpression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression ge Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionExpression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression lt Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionExpression
    </td>
  </tr>
  <tr>
    <td>
      Left Expression le Right Expression
    </td>
    <td>
      Left ExpressionRight ExpressionExpression
    </td>
  </tr>
</table>
<p>
  StringOperator Return ValueType,<a href="#language-type-int">int Type</a> 1,0
</p>
<h4 id="language-expression-operator-isa">isa Operator </h4>
<p>
  Operator ,,Left ExpressionRight ExpressionOperator ,<a href="#language-expression">Expression</a>Operator 
</p>
<p>
  isa Operator ,TypeOperator ,<a href="#language-expression">Expression</a>
</p>
<pre>
Left Expression isa Type
</pre>
<p>
  isa Operator ,Type,3
</p>
<p>
  1. Type,<a href="#language-type-numeric">Numeric Type</a>,<a href="#language-type-multi-numeric">Multi Numeric Type</a>,<a href="#language-type-any-object">Any Object Type</a>,<a href="#language-type-ref">Reference Type</a>,Left ExpressionTypeType<a href="#language-type-int">int Type</a> 1,0
</p>
<p>
  2. Type,<a href="#language-type-class">Class Type</a>,Left ExpressionType,Class Type<a href="#language-type-int">int Type</a> 1,0Left ExpressionType,Object Type otherwise a compile-time error occurs.
</p>
<p>
  3. Type,<a href="#language-type-callback">Callback Type</a>,Left ExpressionTypeClass Type,ClassCallback Type<a href="#language-type-int">int Type</a> 1,0Left ExpressionType,Object Type otherwise a compile-time error occurs.
</p>
<h4 id="language-expression-operator-logical">Operator </h4>
<p>
  Operator ,Operator ,><a href="#language-expression-operator-logical-and">Logical AND Operator</a>,<a href="#language-expression-operator-logical-or">Logical OR Operator</a>,<a href="#language-expression-operator-logical-not">Logical NOT Operator</a>
</p>
<p>
  Operator ,<a href="#language-expression">Expression</a>
</p>
<h4 id="language-expression-operator-logical-and">Logical AND Operator </h4>
<p>
  Logical AND Operator ,Logical AND,"&&",<a href="#language-expresssion">Expression</a><a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression &amp;&amp; Right Expression
</pre>
<p>
  Logical AND Operator Return ValueType,<a href="#language-type-int">int Type</a> 
</p>
<p>
  Logical AND Operator 
</p>
<p>
  1. Left Expression<a href="#language-type-convertion-bool">Bool Type Convertion</a>
</p>
<p>
  2. Left Expression0,Right Expression,<a href="#language-type-convertion-bool">Bool Type Convertion</a>,
</p>
<p>
  3. Left Expression0,
</p>
<p>
  Logical AND Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Logical AND Operator ,
</p>
<h4 id="language-expression-operator-logical-and">Logical OR Operator </h4>
<p>
  Logical OR Operator ,Logical OR,"||",<a href="#language-expresssion">Expression</a><a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression || Right Expression
</pre>
<p>
  Logical OR Operator 
</p>
<p>
  Logical OR Operator Return ValueType,<a href="#language-type-int">int Type</a> 
</p>
<p>
  1. Left Expression<a href="#language-type-convertion-bool">Bool Type Convertion</a>
</p>
<p>
  2. Left Expression0,Right Expression,<a href="#language-type-convertion-bool">Bool Type Convertion</a>,
</p>
<p>
  3. Left Expression0,
</p>
<p>
  Logical OR Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Logical OR Operator ,
</p>
<h4 id="language-expression-operator-logical-and">Logical NOT Operator </h4>
<p>
  Logical NOT Operator ,NOT,ExpressionOperator ,"!"<a href="#language-expression">Expression</a><a href="#language-expression-operator-binary">Unary Operator</a>Expression,<a href="#language-expresssion">Expression</a>
</p>
<pre>
!Expression
</pre>
<p>
  Logical NOT Operator Return ValueType,<a href="#language-type-int">int Type</a> 
</p>
<p>
  Logical NOT Operator ,Expression<a href="#language-type-convertion-bool">Bool Type Convertion</a>,01,0,0
</p>
<p>
  Logical NOT Operator <a href="#language-expression">Expression</a>
</p>
<p>
  Logical NOT Operator ,
</p>
<h4 id="language-expression-operator-concat">StringOperator </h4>
<p>
  StringOperator "."<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression . Right Expression
</pre>
<p>
  Left ExpressionRight Expression,<a href="#language-type-numeric">Numeric Type</a>,<a href="#language-type-convertion-numeric-to-string">Numeric-to-String Type Convertion</a>String
</p>
<p>
  Left ExpressionRight Expression<a href="#language-type-string-compatible">String Compatible Type</a>otherwise 
</p>
<p>
  StringOperator ,Left ExpressionRight Expression<a href="#language-string">String</a>,String
</p>
<p>
  StringOperator <a href="#language-expression">Expression</a>,Type<a href="#language-type-string">String Type</a>
</p>
<p>
  Left ExpressionRight Expression,<a href="#language-literal-string">String Literal</a>,String Literal ,StringOperator ,String Literal 
</p>
<p>
  ,Left ExpressionRight Expression<a href="#language-undef">Undefined Value</a>,
</p>
<p>
  <b>StringOperator Example</b>
</p>
<pre>
my $str = "abc" . "def";
my $str = "def" . 34;
my $str = 123 . 456;
</pre>
<h4 id="language-expression-operator-assign">Assignment Operator </h4>
<p>
  Assignment Operator "=",<a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
LEFT_EXPRESSION = RIGHTH_EXPRESSION
</pre>
<p>
  Assignment Operator ,,
</p>
<p>
  Assignment Operator ,Right Expression,Left Expression,,Expression
</p>
<ul>
  <li><a href="#language-expression-set-lex-var">Set Lexical Variable Value</a></li>
</ul>
<h4 id="language-expression-operator-assign-special">Special Assignment Operator </h4>
<p>
  Special Assignment Operator ,<a href="#language-expression-operator-binary">Binary Operator</a><a href="#language-expression-operator-assign">Assignment Operator</a><a href="#language-expression-operator-binary">Binary Operator</a>
</p>
<pre>
Left Expression Special Assignment Operator  Right Expression
</pre>
<p>
  Left ExpressionRight Expression<a href="#language-type-compatible">Type Compatibility</a>,a compile-time error occurs
</p>
<p>
  <b>Special Assignment Operator </b>
</p>
<p>
  Special Assignment Operator 
</p>
<table>
  <tr>
    <td>Assignment Operator </td>
    <td>+=</td>
  </tr>
  <tr>
    <td>Assignment Operator </td>
    <td>-=</td>
  </tr>
  <tr>
    <td>Assignment Operator </td>
    <td>*=</td>
  </tr>
  <tr>
    <td>Assignment Operator </td>
    <td>/=</td>
  </tr>
  <tr>
    <td>Assignment Operator </td>
    <td>%=</td>
  </tr>
  <tr>
    <td>Bit ANDAssignment Operator </td>
    <td>&=</td>
  </tr>
  <tr>
    <td>Bit ORAssignment Operator </td>
    <td>|=</td>
  </tr>
  <tr>
    <td>Assignment Operator </td>
    <td><<=</td>
  </tr>
  <tr>
    <td>Assignment Operator </td>
    <td>>>=</td>
  </tr>
  <tr>
    <td>Assignment Operator </td>
    <td>>>>=</td>
  </tr>
</table>
<p>
  Special Assignment Operator ,
</p>
<pre>
# 
Left Expression Special Assignment Operator  Right Expression

# 
Left Expression Assignment Operator  (Left ExpressionType)(Left Expression Operator  Right Expression)
</pre>
<p>
  ,Assignment Operator ,
</p>
<pre>
#  x&lt;a href="#language-type-byte"&gt;byte Type&lt;/a&gt;
$x += 1;

# 
$x = (byte)($x + 1)
</pre>
<p>
  <b>Special Assignment Operator Example</b>
</p>
<p>
  Special Assignment Operator Example
</p>
<pre>
$x += 1;
$x -= 1;
$x *= 1;
$x /= 1;
$x &amp;= 1;
$x |= 1;
$x ^= 1;
$x %= 1;
$x &lt;&lt;= 1;
$x &gt;&gt;= 1;
$x &gt;&gt;&gt;= 1;
</pre>
<h4 id="language-expression-operator-ref">Reference Operator  </h4>
<p>
  Reference Operator  ,<a href="#language-type-numeric">Numeric Type</a><a href="#language-type-multi-numeric">Multi Numeric Type</a>Operator COperator "&"
</p>
<pre>
\
</pre>
<p>
  Numeric TypeMulti Numeric Type,a compile-time error occurs
</p>
<p>
  Reference Operator  ExpressionType,<a href="#language-type-ref">Reference Type</a>
</p>
<pre>
  &lt;b&gt;Reference Operator  Example&lt;/b&gt;
</pre>
<pre>
my $num : int;
my $num_ref : int&amp; = \$num;

my $z : SPVM::Complex_2d;
my $z_ref : SPVM::Complex_2d&amp; = \$z;
</pre>
<p>
  Reference,<a href="#language-ref">Reference</a>
</p>
<h4 id="language-expression-operator-array-length">Array Length Operator </h4>
<p>
  Array Length Operator ,<a href="#language-array">Array</a>"@"<a href="#language-expression-operator-binary">Unary Operator</a>
</p>
<pre>
@Right Expression
</pre>
<p>
  Right Expression,Array Typeotherwise a compile-time error occurs.
</p>
<p>
  Array Length Operator ,Array Length<a href="#language-type-int">int Type</a> 
</p>
<p>
  Array Length Operator ,<a href="#language-expression">Expression</a>
</p>
<p>
  <b>Array Length Operator Example</b>
</p>
<p>
  Array Length Operator Example
</p>
<pre>
my $nums = new byte[10];
my $length = @$nums;
</pre>
<p>
  SPVMPerl,Array Length Operator ,Array Length
</p>
<h4 id="language-expression-operator-string-length">String Length Operator </h4>
<p>
  String Length Operator ,<a href="#language-string">String</a>"length"<a href="#language-expression-operator-binary">Unary Operator</a>
</p>
<pre>
length Right Expression
</pre>
<p>
  Right Expression,<a href="#language-type-string-compatible">String Compatible Type</a>otherwise a compile-time error occurs.
</p>
<p>
  String Length Operator ,String<a href="#language-type-int">int Type</a> String Length Operator String,
</p>
<p>
  String Length Operator ,<a href="#language-expression">Expression</a>
</p>
<p>
  <b>String Length Operator Example</b>
</p>
<p>
  String Length Operator Example
</p>
<pre>
my $nums = "abcde";
my $length = length $nums;
</pre>
<h4 id="language-expression-operator-scalar">Scalar Operator </h4>
<p>
  Scalar Operator ,,Operator <a href="language-expression-operator-array-length">Array Length Operator</a>
</p>
<pre>
scalar Right Expression
</pre>
<p>
  Right Expression<a href="language-expression-operator-array-length">Array Length Operator</a>otherwise a compile-time error occurs.
</p>
<p>
  Scalar Operator returns Expression.
</p>
<p>
  <b>Scalar Operator Example</b>
</p>
<p>
  Scalar Operator Example
</p>
<pre>
my $nums = new int[3];
foo(scalar @$nums);
</pre>
<h4 id="language-expression-operator-isweak">isweakOperator</h4>
<p>
  isweakOperator ,Field,<a href="#language-weak-ref">Weaken Reference</a>Operator 
</p>
<pre>
isweak -&gt;{Field Name};
</pre>
<p>
  ExpressionType,<a href="#language-type-class">Class Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Field Name,Field Nameotherwise a compile-time error occurs.
</p>
<p>
  FieldType,<a href="#language-type-object">Object Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Field,<a href="#language-undef">Undefined Value</a>,,<a href="#language-expression">Expression</a>
</p>
<p>
  isweakOperator ,FieldWeaken Reference,<a href="#language-type-int">int Type</a> 1,0,<a href="#language-expression">Expression</a>
</p>
<h3 id="language-expression-operator-precedence">Operator Precidence</h3>
<p>
  Operator Precidence,the following ,
</p>
<table>
  <tr>
    <th></th>
    <th>Operator </th>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      <ul>
      Assignment Operator "="<br>
      Assignment Operator "+="<br>
      Assignment Operator "-="<br>
      Assignment Operator "*="<br>
      Assignment Operator "/="<br>
      Assignment Operator "%="<br>
      Bit ANDAssignment Operator "&="<br>
      Bit ORAssignment Operator "|="<br>
      Bit ORAssignment Operator "^="<br>
      Assignment Operator "<<="<br>
      Assignment Operator ">>="<br>
      Logical Right Shift Operator ">>>="<br>
      StringAssignment Operator ".="
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Logical OR Operator "||"
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Logical AND Operator  "&&"
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Bit OR Operator "|"<br>
      Bit XOR Operator  "^"
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Bit AND Operator "&"
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Operator "=="<br>
      Operator "!="<br>
      StringOperator "eq"<br>
      StringOperator "ne"<br>
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Operator ">"<br>
      Operator "<"<br>
      Operator ">="<br>
      Operator "<="<br>
      StringOperator "gt"<br>
      StringOperator "ge"<br>
      StringOperator "lt"<br>
      StringOperator "le"<br>
      isa Operator "isa"
    </td>
  </tr>
  <tr>
    <td>
       
    </td>
    <td>
      Left Shift Operator  "<<"<br>
      Shift Operator ">>"<br>
      Shift Operator ">>>"
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Addition Operator "+"<br>
      Subtraction Operator "-"<br>
      StringOperator "."
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Multiplication Operator "*"<br>
      Division Operator "/"<br>
      Remainder Operator "%"
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Logical NOT Operator "!"<br>
      Bit NOT Operator "~"<br>
      Reference Operator  "\"<br>
      Unary Plus Operator "+"<br>
      Unary Minus Operator "-"<br>
      Array Length Operator "@"<br>
      Dereference Operator "$"<br>
      Type Cast"(TypeName)"
      Scalar Operator "scalar"<br>
      String Length Operator "length"<br>
      require keyword "require"<br>
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Pre Increment Operator "++"<br>
      Post Increment Operator "++"<br>
      Pre Decrement Operator "--"<br>
      Post Decrement Operator "--"
    </td>
  </tr>
  <tr>
    <td>
      
    </td>
    <td>
      Arrow Operator "->"<br>
    </td>
  </tr>
</table>
<p>
  Operator Precidence"()",
</p>
<pre>
# a * b 
a * b + c

# b + c 
a * (b + c)
</pre>
<h3 id="language-Statement">Statement</h3>
<p>
  Statement,<a href="#language-scope-scope-block">Scope Block</a><a href="#language-expression">Expression</a>
</p>
<p>
  <b>Statement</b>
</p>
<p>
  Statement
</p>
<ul class="list">
  <li><a href="#language-Statement-if">if Statement</a></li>
  <li><a href="#language-Statement-switch">switch Statement</a></li>
  <li><a href="#language-Statement-case">case Statement</a></li>
  <li><a href="#language-Statement-while">while Statement</a></li>
  <li><a href="#language-Statement-for">for Statement</a></li>
  <li><a href="#language-Statement-default">default Statement</a></li>
  <li><a href="#language-Statement-block-simple">Simple Block</a></li>
  <li><a href="#language-Statement-eval">eval Statement</a></li>
  <li><a href="#language-Statement-ifrequire">if requireStatement</a></li>
  <li><a href="#language-Statement-next">next Statement</a></li>
  <li><a href="#language-Statement-last">last Statement</a></li>
  <li><a href="#language-Statement-break">break Statement</a></li>
  <li><a href="#language-Statement-return">return Statement</a></li>
  <li><a href="#language-Statement-die">die Statement</a></li>
  <li><a href="#language-Statement-weaken">weaken Statement</a></li>
  <li><a href="#language-Statement-unweaken">unweaken Statement</a></li>
  <li><a href="#language-Statement-expression">expression Statement</a></li>
  <li><a href="#language-Statement-print">print Statement</a></li>
  <li><a href="#language-Statement-warn">warn Statement</a></li>
  <li><a href="#language-Statement-empty">empty Statement</a></li>
</ul>
<h4 id="language-Statement-if">if Statement</h4>
<p>
  if Statement,Statement
</p>
<pre>
if (Expression) {

}
</pre>
<p>
  Expression<a href="#language-type-convertion-bool">Bool Type Convertion</a>,0,Block 
</p>
<p>
  "elsif Statement" ,Expression<a href="#language-type-convertion-bool">Bool Type Convertion</a>,0Block 
</p>
<pre>
if (Expression) {

}
elsif(Expression) {

}
</pre>
<p>
  "elseStatement",if Statement,elsif Statementif Statementelsif StatementelseBlock Statementelsif Statement,
</p>
<pre>
if (Expression) {

}
elsif(Expression) {

}
else {

}
</pre>
<p>
  <b>if StatementExample</b>
</p>
<p>
  if StatementExample
</p>
<pre>
my $flag = 1;

if ($flag == 1) {
print "One\n";
}
elsif ($flag == 2) {
print "Tow\n";
}
else {
print "Other";
}
</pre>
<p>
  if Statement,,Simple Block
</p>
<pre>
{
if (Expression) {

}
}
</pre>
<p>
  elsif,,if StatementelseStatement
</p>
<pre>
# 
if (Expression1) {

}
elsif (Expression2) {

}
else {

}

# 
if (Expression1) {
}
else {
if (Expression2) {

}
else {

}
}
</pre>
<p>
  if Statement,,<a href="#language-scope-block-Statement-simple">Simple Block</a>,elsif,,if StatementelseStatement,
</p>
<pre>
# 
my $num = 1;
if (my $num = 2) {

}
elsif (my $num = 3) {

}
else {

}

# 
my $num = 1;
{
  if (my $num = 2) {

  }
  else {
    {
      if (my $num = 3) {
        
      }
      else {
        
      }
    }
  }
}
</pre>
<h4 id="language-Statement-switch">switch Statement</h4>
<p>
  switch Statement,<a href="#language-type-int">int Type</a> ,Statement<a href="#language-type-int">int Type</a> ,,if Statement
</p>
<pre>
switch (Expression) {
  case 1: {

    break;
  }
  case 2: {

    break;
  }
  case n: {
    break;
  }
  default: {

  }
}
</pre>
<p>
  Expression,<a href="#language-expression">Expression</a>Expression,<a href="#language-type-convertion-bool">Bool Type Convertion</a>
</p>
<p>
  case Statement,<a href="#language-type-byte">byte Type</a><a href="#language-type-int">int Type</a> <a href="#language-type-byte">byte Type</a>,,<a href="#language-type-int">int Type</a> Type ConvertionenumType,<a href="#language-type-int">int Type</a> Constant Subroutine ,<a href="#language-type-int">int Type</a> ,syntax ,
</p>
<p>
  case Statement,,a compile-time error occurs
</p>
<p>
  Expression,case Statement,case Statement
</p>
<p>
  default Statement,default Statementdefault Statement,switch Block
</p>
<p>
  switch Statement,case Statementotherwise 
</p>
<p>
  default Statement
</p>
<p>
  switch Blockcase Statementdefault Statement
</p>
<p>
  casedefaultBlock 
</p>
<pre>
switch (Expression) {
  case 1:
  case 2:
  {
    break;
  }
  default:
}
</pre>
<p>
  break Statement,switch Block
</p>
<pre>
switch (Expression) {
  case 1: {
    break;
  }
  case 2: {
    break;
  }
  case n: {
    break;
  }
  default: {

  }
}
</pre>
<p>
  caseBlock ,Statementbreak Statement,returnl Statementotherwise 
</p>
<p>
  <b>switch StatementExample</b>
</p>
<p>
  switch StatementExample
</p>
<pre>
my $code = 2;
switch ($code) {
  case 1: {
  print "1\n";
    break;
  }
  case 2: {
  print "2\n";
    break;
  }
  case 3: {
  print "3\n";
    break;
  }
  case 4:
  case 5:
  {
  print "4 or 5\n"; {
    break;
  }
  default: {
    print "Other\n";
  }
}
</pre>
<h4 id="language-Statement-switch">case Statement</h4>
<p>
  case Statement,switch Block,Statementcase Statement,<a href="#language-Statement-switch">switch Statement</a>
</p>
<h4 id="language-Statement-switch">default Statement</h4>
<p>
  default Statement,switch Block,Statementdefault Statement,<a href="#language-Statement-switch">switch Statement</a>
</p>
<h4 id="language-Statement-while">while Statement</h4>
<p>
  while Statement,Statement
</p>
<pre>
while (Expression) {

}
</pre>
<p>
  Expression,<a href="#language-expresssion">Expression</a>Expression<a href="#language-type-convertion-bool">Bool Type Convertion</a>,0,Block otherwise Block 
</p>
<p>
  <b>while StatementExample</b>
</p>
<p>
  while StatementExample
</p>
<pre>
my $i = 0;
while ($i &lt; 5) {

  print "$i\n";

  $i++;
}
</pre>
<p>
  while Block,<a href="#language-Statement-last">last Statement</a>,while Block
</p>
<pre>
while (1) {
  last;
}
</pre>
<p>
  while Block,<a href="#language-Statement-next">next Statement</a>,Expression
</p>
<pre>
my $i = 0;
while ($i &lt; 5) {

  if ($i == 3) {
    $i++;
    next;
  }

  print "$i\n";
  $i++;
}
</pre>
<p>
  while Statement,,<a href="#language-scope-block-Statement-simple">Simple Block</a>
</p>
<pre>
{
  while (Expression) {

  }
}
</pre>
<p>
  while Statement,,<a href="#language-scope-block-Statement-simple">Simple Block</a>
</p>
<pre>
# 
my $num = 5;
while (my $num = 3) {

  $i++;
}

# 
my $num = 5;
{
  while (my $num = 3) {

    $i++;
  }
}
</pre>
<h4 id="language-Statement-for">for Statement</h4>
<p>
  for Statement,Statement
</p>
<pre>
for (Expression; Expression; Expression) {

}
</pre>
<p>
  Expression,<a href="#language-expression">Expression</a>,ExpressionExpression
</p>
<p>
  Expression,<a href="#language-expresssion">Expression</a>Expression<a href="#language-type-convertion-bool">Bool Type Convertion</a>,0,Block otherwise Block 
</p>
<p>
  Expression,<a href="#language-expression">Expression</a>,ExpressionExpression
</p>
<p>
  for Statementthe following while StatementExpression,Block Expression,<a href="#language-scope-block-Statement-simple">Simple Block</a>
</p>
<pre>
{
  Expression;
  while (Expression) {



    Expression;
  }
}
</pre>
<p>
  <b>for StatementExample</b>
</p>
<p>
  for StatementExample
</p>
<pre>
for (my $i = 0; $i &lt; 5; $i++) {

  print "$i\n";
}
</pre>
<p>
  for Block,<a href="#language-Statement-last">last Statement</a>,for Block
</p>
<pre>
for (Expression; Expression; Expression) {

}
</pre>
<p>
  for Block,<a href="#language-Statement-next">next Statement</a>,Expression
</p>
<pre>
for (my $i = 0; $i &lt; 5; $i++) {

  if ($i == 3) {
    next;
  }
}
</pre>
<h4 id="language-Statement-return">returnl Statement</h4>
<p>
  returnl Statement,Subroutine ,
</p>
<pre>
return;
</pre>
<p>
  Return Value,<a href="#language-expression">Expression</a>
</p>
<pre>
return Expression;
</pre>
<p>
  <a href="#language-sub-definition">Subroutine Definition</a>Return ValueType<a href="#language-type-void">void Type</a>,Expressionotherwise a compile-time error occurs.
</p>
<p>
  <a href="#language-sub-definition">Subroutine Definition</a>Return ValueType<a href="#language-type-void">void Type</a>,ExpressionTypeotherwise a compile-time error occurs.
</p>
<h4 id="language-Statement-die">die Statement </h4>
<p>
  die Statement ,Statement
</p>
<pre>
die Expression;
</pre>
<p>
  Expression,String Compatible Type
</p>
<p>
  die Statement ,<a href="#language-exception">Exception Handling</a>
</p>
<h4 id="language-Statement-weaken">weaken Statement </h4>
<p>
  weaken Statement ,Field,<a href="#language-weak-ref">Weaken Reference</a>Statement
</p>
<pre>
weaken -&gt;{Field Name};
</pre>
<p>
  ExpressionType,<a href="#language-type-class">Class Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Field Name,Field Nameotherwise a compile-time error occurs.
</p>
<p>
  FieldType,<a href="#language-type-object">Object Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Field,<a href="#language-undef">Undefined Value</a>,weaken Statement ,
</p>
<p>
  Field,<a href="#language-undef">Undefined Value</a>,
</p>
<p>
  1. FieldReference Count1
</p>
<p>
  2. Field,Weaken Reference
</p>
<p>
  3. FieldReference,Field
</p>
<p>
  Weaken Reference,Field,Field
</p>
<p>
  FieldReference Count,0,Weaken Reference,Field
</p>
<p>
  Reference,Field,Weaken ReferenceField,,
</p>
<pre>
# Reference,Example
my $foo = new Foo;
my $bar = new Bar;
my $baz = new Baz;

$foo-&gt;{bar} = $bar;
$foo-&gt;{baz} = $baz;

$bar-&gt;{foo} = $foo;
$baz-&gt;{foo} = $foo;

weaken $bar-&gt;{foo};
weaken $baz-&gt;{foo};
</pre>
<p>
  "$bar->{foo}""$baz->{foo}",Weaken Reference$foo,Reference"$bar->{foo}""$baz->{foo}"
</p>
<p>
  Reference,<a href="#language-garbage-collection">Garbage Collection</a>,ReferenceFieldUndefined Value
</p>
<h4 id="language-Statement-unweaken">unweaken Statement</h4>
<p>
  unweaken Statement,Field,<a href="#language-weak-ref">Weaken Reference</a>Statement
</p>
<pre>
unweaken -&gt;{Field Name};
</pre>
<p>
  ExpressionType,<a href="#language-type-class">Class Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Field Name,Field Nameotherwise a compile-time error occurs.
</p>
<p>
  FieldType,<a href="#language-type-object">Object Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Field,<a href="#language-undef">Undefined Value</a>,unweaken Statement,
</p>
<p>
  Field,<a href="#language-undef">Undefined Value</a>,
</p>
<p>
  1. FieldReference Count1
</p>
<p>
  2. FieldWeaken Reference
</p>
<p>
  3. FieldReference,Field
</p>
<h4 id="language-Statement-next">next Statement</h4>
<p>
  "next Statement",Statement<a href="#language-scope-block-Statement-while">while Block</a>,<a href="#language-scope-block-Statement-for">for Block</a>
</p>
<pre>
next;
</pre>
<p>
  <a href="#language-Statement-while">while Statement</a>,<a href="#language-Statement-for">for Statement</a>
</p>
<h4 id="language-Statement-last">last Statement</h4>
<p>
  "last Statement",Statement<a href="#language-scope-block-Statement-while">while Block</a>,<a href="#language-scope-block-Statement-for">for Block</a>
</p>
<p>
  <a href="#language-Statement-while">while Statement</a>,<a href="#language-Statement-for">for Statement</a>
</p>
<pre>
last;
</pre>
<h4 id="language-Statement-break">break Statement</h4>
<p>
  "break Statement",switch BlockStatement<a href="#language-scope-block-Statement-switch">switch Block</a>
</p>
<p>
  <a href="#language-Statement-switch">switch Statement</a>
</p>
<pre>
break;
</pre>
<h4 id="language-Statement-warn">warn Statement</h4>
<p>
  warnStatement
</p>
<pre>
warn Expression;
</pre>
<p>
  Expression,<a href="#language-type-string-compatible">String Compatible Type</a>
</p>
<p>
  Character"\n",ExpressionString
</p>
<p>
  Character,File Name,
</p>
<p>
  ExpressionString0,Undefined Value,"Warning: something's wrong"
</p>
<p>
  
</p>
<h4 id="language-Statement-print">print Statement</h4>
<p>
  Stringprint Statement
</p>
<pre>
print Expression;
</pre>
<p>
  Expression,<a href="#language-type-string-compatible">String Compatible Type</a>
</p>
<p>
  ExpressionUndefined Value,
</p>
<h4 id="language-Statement-expression">expression Statement</h4>
<p>
  expression Statement<a href="#language-expression">Expression</a>";"Statement
</p>
<pre>
Expression;
</pre>
<p>
  expression StatementExample
</p>
<pre>
1;
$var;
1 + 2;
foo();
my $num = 1 + 2;
</pre>
<h4 id="language-Statement-empty">empty Statement</h4>
<p>
  empty Statement";"Statement
</p>
<pre>
;
</pre>
<h3 id="language-type"><a href="#language-type">Type</a></h3>
<ul class="list">
  <li><a href="#language-type-summary">Type Summary</a></li>
  <li><a href="#language-type-initial-value">Type Initial Value</a></li>
  <li><a href="#language-type-void">void Type</a></li>
  <li><a href="#language-type-numeric">Numeric Type</a></li>
  <li><a href="#language-type-integral">Integral Type</a></li>
  <li><a href="#language-type-byte">byte Type</a></li>
  <li><a href="#language-type-short">short Type</a></li>
  <li><a href="#language-type-int"><a href="#language-type-int">int Type</a></a></li>
  <li><a href="#language-type-long">long Type</a></li>
  <li><a href="#language-type-floating-point">Floating Point Type</a></li>
  <li><a href="#language-type-float">float Type</a></li>
  <li><a href="#language-type-double">double Type</a></li>
  <li><a href="#language-type-package">Package Type</a></li>
  <li><a href="#language-type-object">Object Type</a></li>
  <li><a href="#language-type-numeric-object">Numeric Object Type</a></li>
  <li><a href="#language-type-undef">Undefined Type</a></li>
  <li><a href="#language-type-class">Class Type</a></li>
  <li><a href="#language-type-callback">Callback Type</a></li>
  <li><a href="#language-type-any-object">Any Object Type</a></li>
  <li><a href="#language-type-self">self Type</a></li>
  <li><a href="#language-type-array">Array Type</a></li>
  <li><a href="#language-type-array-numeric">Numeric Array Type</a></li>
  <li><a href="#language-type-array-byte">byte[] Type</a></li>
  <li><a href="#language-type-array-object">Object Array Type</a></li>
  <li><a href="#language-type-array-mulnum">Multi Numeric Array Type</a></li>
  <li><a href="#language-type-any-object-array">Any Object Array Type</a></li>
  <li><a href="#language-type-string">String Type</a></li>
  <li><a href="#language-type-string-compatible">String Compatible Type</a></li>
  <li><a href="#language-type-multi-numeric">Multi Numeric Type</a></li>
  <li><a href="#language-type-ref">Reference Type</a></li>
  <li><a href="#language-type-ref-numeric">Numeric Reference Type</a></li>
  <li><a href="#language-type-ref-multi-numeric">Multi Numeric Reference Type</a></li>
</ul>
<h4 id="language-type-summary">Type Summary</h4>
<p>
  SPVM is a static type language. All data has a static type.
</p>
<p>
  <a href="#language-lex-var-declaration">Lexical Variable Declaration</a>, <a href="#language-field-definition">Field Definition</a>, <a href="#language-package-var-definition">Package Variable Definition</a>, and <b>Arguments</b> and <b>Return Value</b> of <a href="#language-sub-definition">Subroutine Definition</a> must specify <b>Type</b>.
</p>
<p>
  In <a href="#language-lex-var-declaration">Lexical Variable Declaration</a>, <a href="#language-type-inference">Type Inference</a> can be used.
</p>
<h4 id="language-type-initial-value">Type Initial Value</h4>
<p>
  Lexical Variable Initial Value,<a href="#language-package-var-initial-value">Package Variable Initial Value</a>,Create ObjectField,Type Initial Value
</p>
<p>
  Type Initial ValueBit 0
</p>
</p>
<table>
  <tr>
    <th>
      <b>Type Name </b>
    </th>
    <th>
      
    </th>
  </tr>
  <tr>
    <td>
      <b>byte</b>
    </td>
    <td>
      0
    </td>
  </tr>
  <tr>
    <td>
      <b>short</b>
    </td>
    <td>
      0
    </td>
  </tr>
  <tr>
    <td>
      <b>int</b>
    </td>
    <td>
      0
    </td>
  </tr>
  <tr>
    <td>
      <b>long</b>
    </td>
    <td>
      0
    </td>
  </tr>
  <tr>
    <td>
      <b>float</b>
    </td>
    <td>
      0
    </td>
  </tr>
  <tr>
    <td>
      <b>double</b>
    </td>
    <td>
      0
    </td>
  </tr>
  <tr>
    <td>
      <b>Object Type </b>
    </td>
    <td>
      undef
    </td>
  </tr>
  <tr>
    <td>
      <b>Multi Numeric Type</b>
    </td>
    <td>
      Field0
    </td>
  </tr>
</table>
<h4 id="language-type-numeric">Numeric Type</h4>
<p>
  Numeric Type is <a href="#language-type-integral">Integral Type</a> or <a href="#language-type-floating-point">Floating Point Type</a>.
</p>
<h4 id="language-type-integral">Integral Type</h4>
<p>
  Integral Type are the following four types.
</p>
<table>
  <tr>
    <th>
      <b>Type</b>
    </th>
    <th>
      Description
    </th>
    <th>
      Size
    </th>
  </tr>
  <tr>
    <td>
      <b>byte</b>
    </td>
    <td>
      signed 8-bit integer type
    </td>
    <td>
      1 byte
    </td>
  </tr>
  <tr>
    <td>
      <b>short</b>
    </td>
    <td>
      signed 16-bit integer type
    </td>
    <td>
      2 bytes
    </td>
  </tr>
  <tr>
    <td>
      <b>int</b>
    </td>
    <td>
      signed 32-bit integer type
    </td>
    <td>
      4 bytes
    </td>
  </tr>
  <tr>
    <td>
      <b>long</b>
    </td>
    <td>
      signed 64-bit integer type
    </td>
    <td>
      8 bytes
    </td>
  </tr>
</table>
<p>
  See <a href="#language-expression-operator-arithmetic">Arithmetic Operator</a> for integer calculation rules.
</p>
<p>
  Note that SPVM has only <b>singed</b> Integral Type, and don't has <b>unsigned</b> Integral Type.
</p>
<h4 id="language-type-byte"><a href="#language-type-byte">byte Type</a></h4>
<p>
  <a href="#language-type-byte">byte Type</a>,8bit<a href="#language-type-integral">Integral Type</a>C99int8_tTypeType
</p>
<h4 id="language-type-short">short Type</h4>
<p>
  <a href="#language-type-byte">byte Type</a>,16bit<a href="#language-type-integral">Integral Type</a>C99int16_tTypeType
</p>
<h4 id="language-type-int">int Type</h4>
<p>
  <b>int Type</b> is a type that represents signed 32-bit integer.
</p>
<p>
  This is same as <b>C99 int32_t Type</b>.
</p>
<p>
  This is a <a href="#language-type-integral">Integral Type</a>.
</p>
<h4 id="language-type-long"><a href="#language-type-long">long Type</a></h4>
<p>
  <a href="#language-type-long">long Type</a>,64bit<a href="#language-type-integral">Integral Type</a>C99int64_tTypeType
</p>
<h4 id="language-type-floating-point">Floating Point Type</h4>
<p>
  <b>Floating Point Type</b> are the following two.
</p>
<table>
  <tr>
    <th>
      <b>Type</b>
    </th>
    <th>
      Description
    </th>
    <th>
      Size
    </th>
  </tr>
  <tr>
    <td>
      <b>float</b>
    </td>
    <td>
      Single precision(32bit) floating po<a href="#language-type-int">int Type</a>
    </td>
    <td>
      4 bytes
    </td>
  </tr>
  <tr>
    <td>
      <b>double</b>
    </td>
    <td>
      Double precision(64bit) floating po<a href="#language-type-int">int Type</a>
    </td>
    <td>
      8 bytes
    </td>
  </tr>
</table>
<p>
  See <a href="#language-expression-operator-arithmetic">Arithmetic Operator</a> for floating-point calculation rules.
</p>
<h4 id="language-type-float">float Type</h4>
<p>
  float Type,(32bit)<a href="#language-type-floating-point">Floating Point Type</a>C99float TypeType
</p>
<h4 id="language-type-double">double Type</h4>
<p>
  double Type,(64bit)<a href="#language-type-floating-point">Floating Point Type</a>C99double TypeType
</p>
<h4 id="language-type-package">Package Type</h4>
<p>
  Package Type<a href="#language-package-definition">Package Definition</a>DefinitionType
</p>
<pre>
package Foo {

}
</pre>
<p>
  Package Type<a href="#language-type-class">Class Type</a><a href="#language-type-callback">Callback Type</a><a href="#language-type-multi-numeric">Multi Numeric Type</a>
</p>
<pre>
# Class Type
package Foo {

}

# Callback Type
package Foo : callback_t {

}

# Multi Numeric Type
package Foo : mulnum_t {

}
</pre>
<p>
  <a href="#language-type-pointer">Pointer Type</a>,Class Type,Pointer TypePackage Type
</p>
<pre>
# Pointer Type
package Foo : pointer_t {

}
</pre>
<h4 id="language-type-object">Object Type </h4>
<p>
  Object Type <a href="#language-type-class">Class Type</a><a href="#language-type-callback">Callback Type</a><a href="#language-type-array">Array Type</a><a href="#language-type-string">String Type</a><a href="#language-type-any-object">Any Object Type</a>"Multi Numeric Type""Reference Type "
</p>
<p>
  Object Type "Any Object Type "
</p>
<pre>
my $object : object = new Foo;
my $object : object = new Foo[];
my $object : object = "abc";
</pre>
<p>
  Object Type SizeC99"sizeof(void*)"
</p>
<h4 id="language-type-numeric-object">Numeric Object Type </h4>
<p>
  <b>Numeric Object Type</b> are the following six.
</p>
<table>
  <tr>
    <th>
      <b>Type</b>
    </th>
    <th>
      Description
    </th>
  </tr>
  <tr>
    <td>
      SPVM::Byte
    </td>
    <td>
      Numeric Object Type with <a href="#language-type-byte">byte Type</a> data
    </td>
  </tr>
  <tr>
    <td>
      SPVM::Short
    </td>
    <td>
      Numeric Object Type with <a href="#language-type-short">short Type</a> data
    </td>
  </tr>
  <tr>
    <td>
      SPVM::Int
    </td>
    <td>
      Numeric Object Type with <a href="#language-type-int"><a href="#language-type-int">int Type</a></a> data
    </td>
  </tr>
  <tr>
    <td>
      SPVM::Long
    </td>
    <td>
      Numeric Object Type with <a href="#language-type-long">long Type</a> data
    </td>
  </tr>
  <tr>
    <td>
      SPVM::Float
    </td>
    <td>
      Numeric Object Type with <a href="#language-type-float">float Type</a> data
    </td>
  </tr>
  <tr>
    <td>
      SPVM::Double
    </td>
    <td>
      Numeric Object Type with <a href="#language-type-double">double Type</a> data
    </td>
  </tr>
</table>
<p>
  For the conversion between <a href="#language-type-numeric">Numeric Type</a> and <b>Numeric Object Type</b>, see <a href="#language-type-convertion">Type Conversion</a>.
</p>
<h4 id="language-type-undef">Undefined Type</h4>
<p>
  Undefined Type,<a href="#language-undef">Undefined Value</a>Type
</p>
<p>
  Undefined Type<a href="#language-undef">Undefined Value</a>
</p>
<p>
  Undefined Type,Object Type Type,a compile-time error occurs
</p>
<h4 id="language-type-class">Class Type</h4>
<p>
  Class Type<a href="#language-package-definition">Package Definition</a>DefinitionType"Multi Numeric Type""Callback Type"Type
</p>
<pre>
packag Foo {

}
</pre>
<p>
  Class Typenew Operator ,
</p>
<pre>
my $foo = new Foo;
</pre>
<p>
  Class Type<a href="#language-type-object">Object Type</a>
</p>
<p>
  Class Type<a href="#language-type-package">Package Type</a>
</p>
<p>
  <a href="#language-type-pointer">Pointer Type</a>Class Type
</p>
<h4 id="language-type-pointer">Pointer Type</h4>
<p>
  Pointer Type<a href="#language-package-definition">Package Definition</a>"pointer_t Descriptor"
</p>
<pre>
package Foo : pointer_t {

}
</pre>
<p>
  Pointer Type,Class Type
</p>
<p>
  Pointer Type,C
</p>
<p>
  Pointer Type,FieldDefinitionDefinition,a compile-time error occurs
</p>
<h4 id="language-type-callback">Callback Type</h4>
<p>
  Callback Type is a <a href="#language-type-package">Package Type</a> with <a href="#language-package-descriptor">Package Descriptor</a> "callback_t".
</p>
<pre>
package SPVM::Comparator : callback_t {
  sub : int ($self : self, $x1 : object, $x2 : object);
}
</pre>
<p>
  Callback Type is designed to provide a feature corresponding to Function Pointer in C language.
</p>
<p>
  Callback Type must have only one <a href="#language-sub-definition">Subroutine Definition</a>. Subroutine must be <a href="#language-sub-method">Method</a>.
</p>
<p>
  Subroutine Name of Callback Type must be anonymouse.
</p>
<p>
  Callback Type must not have any <a href="#language-field-definition">Field Definition</a> and <a href="#language-package-var-definition">Package Variable Definition</a>.
</p>
<p>
  Callback Type is a <a href="#language-type-object">Object Type</a>.
</p>
<p>
  Callback Type cannot be the operand of <a href="#language-expression-new">new Statement</a>.
</p>
<p>
  The variable of Callback Type can be assigned a <a href="#language-type-class">Class Type</a> object that matches the Callback Type. "matches the Callback Type" means the following two cases.
</p>
<p>
  1. Class Type object with anonimouse name and the <a href="#language-sub-signature">Signature</a> is same as Callback Type
</p>
<pre>
# Callback Type Definition
package SPVM::Comparator : callback_t {
  sub : int ($self : self, $x1 : object, $x2 : object);
}

# Class Definition
package SomeComparator {
  sub new : int () {
    return new SomeComparator;
  }

  sub : int ($self : self, $x1 : object, $x2 : object) {

  }
}

# The object can be assign to the variable of Callback Type
my $comparator : SPVM::Comparator = SomeComparator-&gt;new;
</pre>
<p>
  2. Class Type object which is created by <a href="#language-sub-new-callback-object">Create Callback Object</a> and the <a href="#language-sub-signature">Signature</a> is same as Callback Type.
</p>
<pre>
# Callback TypeDefinition
package SPVM::Comparator : callback_t {
  sub : int ($self : self, $x1 : object, $x2 : object);
}

# The object which is created by Create Callback Object can be assign to the variable of Callback Type
my $comparator : SPVM::Comparator = sub : int ($self : self, $x1 : object, $x2 : object) {

}
</pre>
<h4 id="language-type-any-object">Any Object Type </h4>
<p>
  Any Object Type "object"C"void*"Type
</p>
<pre>
my $object : object;
</pre>
<p>
  Any Object Type "Object Type "
</p>
<pre>
my $object : object = new Foo;
my $object : object = "abc";
my $object : object = new Foo[3];
</pre>
<h4 id="language-type-self">self Type</h4>
<p>
  self Type,Package Type,Invocant 
</p>
<p>
  <a href="#language-sub-definition">Subroutine Definition</a>Type
</p>
<h4 id="language-type-void"><a href="#language-type-void">void Type</a></h4>
<p>
  <b>void Type</b> is a special Type that can only be used in Return Type of <a href="#language-sub-definition">Subroutine Definition</a> and indicates the Subroutine has no Return Value.
</p>
<h4 id="language-type-basic">Basic Type</h4>
<p>
  TypeBasic Type<a href="#language-type-numeric">Numeric Type</a>,<a href="#language-type-package">Package Type</a>,<a href="#language-type-any-object">Any Object Type</a>,<a href="#language-type-string">String Type</a>,Basic Type
</p>
<h4 id="language-type-array">Array Type</h4>
<p>
  Array Type,<a href="#language-type-basic">Basic Type</a>,Array
</p>
<pre>
int[]
double[]
Point[]
object[]
string[]
</pre>
<p>
  Array255
</p>
<pre>
# 
int[][]

# 
int[][][]
</pre>
<p>
  Array Type,<a href="#language-type-object">Object Type</a>
</p>
<p>
  Array,new Operator the following ,3<a href="#language-type-int">int Type</a> Array
</p>
<p>
<p>
  my $nums = new int[3];
</p>
</p>
<p>
  Array,new Operator the following ,3int[]TypeArray
</p>
<p>
<p>
  my $nums = new int[][3];
</p>
</p>
<h4 id="language-type-array-numeric">Numeric Array Type</h4>
<p>
  Numeric Array Type,<a href="#language-type-numeric">Numeric Type</a><a href="#language-type-array">Array Type</a>
</p>
<p>
  <b>Numeric Array Type</b>
</p>
<ul class="list">
  <li>
    byte[]
  </li>
  <li>
    short[]
  </li>
  <li>
    int[]
  </li>
  <li>
    long[]
  </li>
  <li>
    float[]
  </li>
  <li>
    double[]
  </li>
</ul>
<p>
  Numeric Array Type,<a href="#language-type-numeric">Numeric Type</a>Size,Array Length
</p>
<p>
  Numeric Array Type,Create Array<a href="#language-type-initial-value">Type Initial Value</a>
</p>
<h4 id="language-type-array-byte">byte[] Type</h4>
<p>
  SPVM,byte[] Type<a href="#language-type-string-compatible">String Compatible Type</a>Type
</p>
<pre>
byte[]
</pre>
<p>
  <a href="#language-type-string">String Type</a>,String Type,byte[] Type
</p>
<h4 id="language-type-array-object">Object Array Type</h4>
<p>
  Object Array Type,<a href="#language-type-object">Object Type</a><a href="#language-type-array">Array Type</a>
</p>
<p>
  <b>Object Array TypeExample</b>
</p>
<ul class="list">
  <li>
    Foo[]
  </li>
  <li>
    Foo[][]
  </li>
  <li>
    Comparable[]
  </li>
  <li>
    object[]
  </li>
</ul>
<p>
  Object Array Type,<a href="#language-type-object">Object Type</a>Size,Array Length
</p>
<p>
  Object Array Type,Create Array<a href="#language-type-initial-value">Type Initial Value</a>
</p>
<h4 id="language-type-array-mulnum">Multi Numeric Array Type</h4>
<p>
  Multi Numeric Array Type,<a href="#language-type-multi-numeric">Multi Numeric Type</a><a href="#language-type-array">Array Type</a>
</p>
<p>
  <b>Multi Numeric Array TypeExample</b>
</p>
<ul class="list">
  <li>
    Complex_2d[]
  </li>
  <li>
    Complex_2f[]
  </li>
</ul>
<p>
  Multi Numeric Array Type,<a href="#language-type-numeric">Multi Numeric Type</a>Size,Array Length
</p>
<p>
  Multi Numeric Array Type,Create Array<a href="#language-type-initial-value">Type Initial Value</a>
</p>
<h4 id="language-type-any-object-array">Any Object Array Type</h4>
<p>
  Any Object Array Type,oarray,<a href="#language-type-object">Object Type</a><a href="#language-type-array">Array Type</a>TypeCqsort,Array Typevoid*Type,,Any Object Array Type
</p>
<pre>
my $array : oarray = new Point[3];
my $array : oarray = new object[3];
</pre>
<p>
  Object Type Type,a compile-time error occurs
</p>
<p>
  "oarrayType""object[]Type"TypeoarrayType,Object Type Array TypeType,"object[]Type","objectTypeArray"Type,Array Type
</p>
<p>
  Any Object Array Type,<a href="#language-type-array">Array Type</a><a href="#language-expression-operator-array-length">Array Length Operator</a>,<a href="#language-expression-set-array-element">Set Array Element Value</a>,<a href="#language-expression-get-array-element">Get Array Element Value</a>
</p>
<pre>
my $array : oarray = new SPVM::Int[3];

# Any Object Array Type
my $legnth = @$array;

# Any Object Array Type
my $num = (SPVM::Int)$array-&gt;[0];

# Any Object Array Type
$array-&gt;[0] = SPVM::Int-&gt;new(5);
</pre>
<p>
  Any Object Array Type,Type,ArrayType Dimension1,Any Object Array Type,Type
</p>
<h4 id="language-type-string">String Type</h4>
<p>
  String Type,StringTypestringC"const char*"
</p>
<pre>
my $str : string;
</pre>
<p>
  String Literal ,String
</p>
<pre>
my $str : string = "abc";
</pre>
<p>
  SPVMString,TypeArrayArray,Character
</p>
<pre>
# Character
my $ch = $str-&gt;[1];
</pre>
<p>
  ,a compile-time error occurs
</p>
<pre>
# 
$str-&gt;[1] = 'd';
</pre>
<p>
  String Type,,TypeArray,,
</p>
<pre>
# isa String Type
if ($str isa string) {

}

# isa TypeArray
if ($str isa byte[]) {

}
</pre>
<p>
  SPVMString,,,
</p>
<p>
  String Type,byte[] Type,,String
</p>
<pre>
my $bytes = (byte[])$str;
$bytes-&gt;[1] = 'd';
</pre>
<p>
  String,,
</p>
<h4 id="language-type-string-compatible">String Compatible Type</h4>
<p>
  String Compatible Type,<a href="#language-type-string">String Type</a><a href="#language-type-array-byte">byte[] Type</a>
</p>
<p>
  String Compatible Type,"\0"("abc""c""\0")SPVM,"\0",API,String Compatible Type,CString
</p>
<h4 id="language-type-multi-numeric">Multi Numeric Type</h4>
<p>
  Multi Numeric Type,Type
</p>
<p>
  <a href="#language-package-definition">Package Definition</a>"mulnum_t"Descriptor,Multi Numeric TypeDefinition
</p>
<pre>
package Point_3i : mulnum_t {
  has x : int;
  has y : int;
  has z : int;
}
</pre>
<p>
  Multi Numeric Type,<a href="#language-mulnum"></a>
</p>
<h4 id="language-type-ref">Reference Type </h4>
<p>
  Reference Type ,Type<a href="#language-type-numeric">Numeric Type</a><a href="#language-type-multi-numeric">Multi Numeric Type</a>"&"Definition
</p>
<pre>
my $num : int;
my $num_ref : int&amp; = \$num;

my $point : Point_3i;;
my $point_ref : Point_3i&amp; = \$point;
</pre>
<p>
  Reference Type ,<a href="#language-expression-operator-ref">Reference Operator</a>Lexical Variable 
</p>
<p>
  Reference Type Lexical Variable Declaration ,a compile-time error occurs
</p>
<p>
  Reference Type ,<a href="#language-lex-var-declaration">Lexical Variable Declaration</a>TypeReference Operator  ,Lexical Variable Lexical Variable Declaration ,a compile-time error occurs
</p>
<p>
  Reference Type ,<a href="#language-sub-definition">Subroutine Definition</a>Type
</p>
<p>
  Reference Type ,<a href="#language-sub-definition">Subroutine Definition</a>Return ValueType
</p>
<p>
  Reference Type ,<a href="#language-package-definition">Package Definition</a>FieldType
</p>
<p>
  Reference Type ,<a href="#language-package-definition">Package Definition</a>Package Variable Type
</p>
<p>
  Invalid ,Reference Type ,a compile-time error occurs
</p>
<p>
  Reference,<a href="#language-ref">Reference</a>
</p>
<h3 id="language-type-inference">Type Inference</h3>
<p>
  Type Inference,<a href="#language-lex-var-declaration">Lexical Variable Declaration</a>,<a href="#language-type">Type</a>Type Inference,Assignment Operator Type,
</p>
<pre>
# int
my $num = 1;

# double
my $num = 1.0;

# Foo
my $foo = new Foo;
</pre>
<h3 id="language-type-compatible">Type Compatibility</h3>
<p>
  Type,<a href="#language-expression-typecast">Type Cast</a>,Type
</p>
<p>
  Type
</p>
<p>
  <b>Type</b>
</p>
<p>
  Type,Type Compatibility
</p>
<pre>
my $num1 : int;
my $num2 : int;
$num1 = $num2;
</pre>
<p>
  <b>Typebyte[] Type,TypeString Type</b>
</p>
<p>
  Typebyte[] Type,TypeString Type,Type Compatibility
</p>
<pre>
my $bytes = new byte[3];
my $str : string;
$str = $bytes;
</pre>
<p>
  <b>TypeObject Type ,TypeAny Object Type </b>
</p>
<pre>
my $foo : Foo = new Foo;
my $object : object;
$object = $foo;
</pre>
<p>
  <b>TypeType,Any Object Type ,Any Object Type Array,Type Dimension,Type Dimension</b>
</p>
<pre>
my $objects_dim2_src : object[];
my $objects_dim1_dist : object;
$objects_dim1_dist = $objects_dim2_src;
</pre>
<p>
  ,ArrayBasic TypeArray
</p>
<pre>
# 
my $objets : object[] = new int[3];
</pre>
<p>
  Type,<a href="#language-type-convertion-implicite">Type Convertion</a>Type Convertion,a compile-time error occurs
</p>
<h3 id="language-type-convertion">Type Convertion</h3>
<ul class="list">
  <li><a href="#language-type-convertion-typecast">Type Cast</a></li>
  <li><a href="#language-type-convertion-typecast">Numeric Type Type Convertion</a></li>
  <li><a href="#language-type-convertion-implicite">Type Convertion</a></li>
  <li><a href="#language-type-convertion-numeric-type-order">Numeric Type Order</a></li>
  <li><a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a></li>
  <li><a href="#language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</a></li>
  <li><a href="#language-type-convertion-numeric-narrowing">Numeric Narrowing Type Convertion</a></li>
  <li><a href="#language-type-convertion-numeric-widening">Numeric Widening Type Convertion</a></li>
  <li><a href="#language-type-convertion-numeric-to-string">Numeric-to-String Type Convertion</a></li>
  <li><a href="#language-type-convertion-boxing">Boxing Type Convertion</a></li>
  <li><a href="#language-type-convertion-unboxing">Unboxing Type Convertion</a></li>
  <li><a href="#language-type-convertion-bool">Bool Type Convertion</a></li>
</ul>
<h4 id="language-type-convertion-typecast">Type Cast</h4>
<p>
  Type Cast,Type Convertion
</p>
<pre>
# Type Cast
(Type)Expression
</pre>
<p>
  <a href="#language-type-int">int Type</a> <a href="#language-type-long">long Type</a>Examplethe following 
</p>
<pre>
my $num = (long)3;
</pre>
<p>
  Type Cast,<a href="#language-expression">Expression</a>
</p>
<p>
  TypeType,
</p>
<pre>
my $num : int = (int)4;
</pre>
<p>
  <b>Type CastType Convertion</b>
</p>
<p>
  Type CastType ConvertionType Cast,a compile-time error occurs
</p>
<table>
  <tr>
    <th>
      <b>Type</b>
    </th>
    <th>
      <b>Type</b>
    </th>
    <th>
      
    </th>
  </tr>
  <tr>
    <td>
      <b>byte[]</b>
    </td>
    <td>
      <b>string</b>
    </td>
    <td>
      
    </td>
  </tr>
  <tr>
    <td>
      <b>string</b>
    </td>
    <td>
      <b>byte[]</b>
    </td>
    <td>
      
    </td>
  </tr>
  <tr>
    <td>
      <b>Numeric Type</b>
    </td>
    <td>
      <b>Numeric Type</b>
    </td>
    <td>
      <a href="#language-type-convertion-numeric-widening">Numeric Type Type Convertion</a>
    </td>
  </tr>
  <tr>
    <td>
      <b>Numeric Object Type </b>
    </td>
    <td>
      <b>Numeric Type</b>
    </td>
    <td>
      <a href="#language-type-convertion-boxing">Boxing Type Convertion</a>Numeric TypeNumeric Object Type Numeric Type,,Numeric Typeint,Numeric Object Type SPVM::Int Type 
    </td>
  </tr>
  <tr>
    <td>
      <b>Any Object Type </b>
    </td>
    <td>
      <b>Numeric Type</b>
    </td>
    <td>
      <a href="#language-type-convertion-boxing">Boxing Type Convertion</a>
    </td>
  </tr>
  <tr>
    <td>
      <b>Numeric Type</b>
    </td>
    <td>
      <b>Numeric Object Type </b>
    </td>
    <td>
      <a href="#language-type-convertion-unboxing">Unboxing Type Convertion</a>Numeric TypeNumeric Object Type Numeric Type,,Numeric Typeint,Numeric Object Type SPVM::Int Type 
    </td>
  </tr>
  <tr>
    <td>
      <b>Numeric Type</b>
    </td>
    <td>
      <b>Any Object Type </b>
    </td>
    <td>
      <a href="#language-type-convertion-unboxing">Unboxing Type Convertion</a>
    </td>
  </tr>
  <tr>
    <td>
      <b>String Type</b>
    </td>
    <td>
      <b>Numeric Type</b>
    </td>
    <td>
      ,Csprintf"%g",String
    </td>
  </tr>
</table>
<h4 id="language-type-convertion-numeric">Numeric Type Type Convertion</h4>
<p>
  Numeric Type Type Convertion,<a href="#language-type-numeric">Numeric Type</a><a href="#language-type-numeric">Numeric Type</a>
</p>
<p>
  Numeric Type Type Convertion,CNumeric TypeType Convertion,SPVMintlongType Convertion,Cint32_tTypeint64_tTypeType Convertion
</p>
<pre>
# SPVM
my $src : int = 5;
my $dist = (long)$src;

# C
int32_t src = 5;
int64_t dist = (int64_t)src;
</pre>
<p>
  Type,<a href="#language-c99-type">C99Type</a>
</p>
<p>
  TypeType,Integral Type,Valid SPVM,C99Type Convertion,Valid ,,C99
</p>
<h4 id="language-type-convertion-implicite">Type Convertion</h4>
<p>
  Type Convertion,SPVMType Convertion,Type Convertion
</p>
<ul class="list">
  <li>Type</li>
  <li>TypeSubroutine Arguments</li>
  <li>Return ValueType</li>
</ul>
<p>
  Type Convertion
</p>
<p>
  TypeNumeric Type,TypeType,<a href="#language-type-convertion-numeric-widening">Numeric Widening Type Convertion</a>
</p>
<pre>
# Type Convertion
my $num : long = 123;
my $num : double = 12.5f;
</pre>
<p>
  TypeNumeric Type,TypeType,,Integer Literal  Type,<a href="#language-type-convertion-numeric-narrowing">Numeric Narrowing Type Convertion</a>
</p>
<pre>
# Type Convertion
my $num : byte = 123;
my $num : short = 134;
</pre>
<p>
  TypeNumeric Type,TypeAny Object Type ,Numeric Object Type <a href="#language-type-convertion-boxing">Boxing Type Convertion</a>the following ,SPVM::Int Type ,
</p>
<pre>
# objectTypeBoxing Type Convertion
my $num = 123;
my $object : object = $num;
</pre>
<p>
  TypeNumeric Type,TypeNumeric Object Type ,Numeric Object Type <a href="#language-type-convertion-boxing">Boxing Type Convertion</a>
</p>
<pre>
# objectTypeBoxing Type Convertion
my $num = 123;
my $object : SPVM::Int = $num;
</pre>
<p>
  TypeAny Object Type ,TypeNumeric Type,Numeric Type<a href="#language-type-convertion-unboxing">Unboxing Type Convertion</a>the following ,SPVM::Int Type <a href="#language-type-int">int Type</a> 
</p>
<pre>
# objectTypeUnboxing Type Convertion - 
my $object : object;
my $num : int = $object;
</pre>
<p>
  TypeNumeric Object Type ,TypeNumeric Type,Numeric Type<a href="#language-type-convertion-unboxing">Unboxing Type Convertion</a>
</p>
<pre>
# Numeric Object Type Unboxing Type Convertion
my $num_obj = SPVM::Int-&gt;new(3);
my $num : int = $num_obj;
</pre>
  TypeNumeric Type,Type,String Type,<a href="#language-type-convertion-numeric-to-string">Numeric-to-String Type Convertion</a>the following ,"123"String""123""
</p>
<pre>
# String TypeBoxing Type Convertion
my $num = 123;
my $str : string = $num;
</pre>
<h4 id="language-type-convertion-numeric-type-order">Numeric Type Order</h4>
<p>
  <a href="#language-type-numeric">Numeric Type</a>,TypeType"byte""short""int""long""float""double"
</p>
<h4 id="language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</h4>
<p>
  Unary Numeric Widening Type Convertion,<a href="#language-expression">Expression</a><a href="#language-type-byte">byte Type</a>short Type,<a href="#language-type-int">int Type</a> <a href="#language-type-convertion-numeric-widening">Numeric Widening Type Convertion</a>
</p>
<p>
  Unary Numeric Widening Type Convertionthe following 
</p>
<ul class="list">
  <li>Array</li>
  <li>Array</li>
  <li>Unary Plus Operator </li>
  <li>Unary Minus Operator </li>
  <li>Shift Operator "<<"">>"">>>"</li>
</ul>
<h4 id="language-type-convertion-binary-numeric-widening">Binary Numeric Widening Type Convertion</h4>
<p>
  Binary Numeric Widening Type Convertion,Numeric TypeBinary Operator  ,Left ExpressionRight Expression<a href="#language-type-convertion-numeric-widening">Numeric Widening Type Convertion</a>
</p>
<p>
  
</p>
<p>
  1. Expression,double Type,Typedouble Type
</p>
<p>
  2. Expression,float Type,Typefloat Type
</p>
<p>
  3. Expression,<a href="#language-type-long">long Type</a>,Type<a href="#language-type-long">long Type</a>
</p>
<p>
  4. ,<a href="#language-type-int">int Type</a> 
</p>
<p>
  Binary Numeric Widening Type Convertionthe following 
</p>
<ul class="list">
  <li><a href="#language-expression-operator-add">Addition Operator</a></li>
  <li><a href="#language-expression-operator-subtract">Subtraction Operator</a></li>
  <li><a href="#language-expression-operator-multiply">Multiplication Operator</a></li>
  <li><a href="#language-expression-operator-divide">Division Operator</a></li>
  <li><a href="#language-expression-operator-remainder">Remainder Operator</a></li>
  <li><a href="#language-expression-operator-bit-and">Bit AND Operator</a></li>
  <li><a href="#language-expression-operator-bit-or">Bit OR Operator</a></li>
  <li><a href="#language-expression-operator-comparison-numeric">Operator</a></li>
</ul>
<h4 id="language-type-convertion-numeric-narrowing">Numeric Narrowing Type Convertion</h4>
<p>
  Numeric Narrowing Type Convertion,<a href="#language-type-numeric">Numeric Type</a>TypeType
</p>
<h4 id="language-type-convertion-numeric-widening">Numeric Widening Type Convertion</h4>
<p>
  Numeric Widening Type Convertion,<a href="#language-type-numeric">Numeric Type</a>TypeType
</p>
<h4 id="language-type-convertion-boxing">Boxing Type Convertion</h4>
<p>
  Boxing Type Convertion,Numeric Type,Numeric Object Type 
</p>
<h4 id="language-type-convertion-unboxing">Unboxing Type Convertion</h4>
<p>
  Unboxing Type Convertion,Numeric Object Type ,Numeric Type
</p>
<h4 id="language-type-convertion-bool">Bool Type Convertion</h4>
<p>
  Bool Type Convertion,if Statement,,
</p>
<p>
  <b>Bool Type Convertion</b>
</p>
<p>
  <b>if Statement</b>
</p>
<pre>
if () {

}
</pre>
<p>
  <b>unless Statement</b>
</p>
<pre>
unless () {

}
</pre>
<p>
  <b>for</b>
</p>
<pre>
for (;;;) {

}
</pre>
<p>
  <b>while</b>
</p>
<pre>
while () {

}
</pre>
<p>
  <b>Logical AND Operator </b>
</p>
<pre>
 &amp;&amp; 
</pre>
<p>
  <b>Logical OR Operator </b>
</p>
<pre>
 || 
</pre>
<p>
  <b>Logical NOT Operator </b>
</p>
<pre>
!
</pre>
<p>
  Bool Type ConvertionExpression,<a href="#language-type-numeric">Numeric Type</a><a href="#language-type-object">Object Type</a><a href="#language-type-undef">Undefined Type</a>otherwise a compile-time error occurs.
</p>
<p>
  Bool Type ConvertionReturn Value,<a href="#language-type-int">int Type</a> Expression
</p>
<p>
  Expression<a href="#language-undef">Undefined Value</a>,0
</p>
<p>
  Expression,<a href="#language-type-numeric">Numeric Type</a>,<a href="#language-type-convertion-unary-numeric-widening">Unary Numeric Widening Type Convertion</a>
</p>
<p>
  Expression<a href="#language-type-int">int Type</a> ,
</p>
<p>
  Expression<a href="#language-type-long">long Type</a>,float Type,double Type,Object Type ,C99the following ,
</p>
<pre>
!!x
</pre>
<p>
  ExpressionObject Type ,Undefined Value0,1
</p>
<h3 id="language-exception">Exception Handling </h3>
<ul class="list">
  <li><a href="#language-exception-summary">Exception Handling </a></li>
  <li><a href="#language-exception-occur"></a></li>
  <li><a href="#language-exception-catch"></a></li>
  <li><a href="#language-exception-var"></a></li>
</ul>
<h4 id="language-exception-summary">Exception Handling </h4>
<p>
  SPVMException Handling Exception Handling ,
</p>
<h4 id="language-exception-occur"></h4>
<p>
  ,die Statement 
</p>
<pre>
die Expression;
</pre>
<p>
  Expression,<a href="#language-type-string-compatible">String Compatible Type</a>
</p>
<p>
  die Statement ,ExpressionString,,Package Name,Subroutine Name,File Name,File Name,ModuleFile Name
</p>
<pre>
Error
from TestCase::Minimal-&gt;sum2 at TestCase/Minimal.spvm line 1640
from TestCase-&gt;main at TestCase.spvm line 1198
</pre>
<h4 id="language-exception-occur"></h4>
<p>
  ,,,
</p>
<p>
  ,eval BlockStatementeval BlockStatement,
</p>
<pre>
eval {
  # 
};
</pre>
<p>
  eval Block,,<a href="#language-exception-var"></a><a href="#language-exception-occur"></a>
</p>
<h4 id="language-exception-var"></h4>
<p>
  "$@"
</p>
<pre>
$@
</pre>
<p>
  ,,,,SPVM,,,
</p>
<p>
  Get Exception Variable Value,<a href="#language-expression-get-exception-var">Get Exception Variable Value</a>
</p>
<p>
  Set Exception Variable Value,<a href="#language-expression-set-exception-var">Set Exception Variable Value</a>
</p>
<h3 id="language-garbage-collection">Garbage Collection</h3>
<p>
  ,Reference Count0
</p>
<p>
  ,Object Type Array,Garbage Collection,Undefined ValueArrayReference Count1
</p>
<p>
  ,Class Type,Object Type Field,Garbage Collection,Undefined ValueObject Type FieldReference Count1FieldWeaken Reference,Reference Count1,Weaken Reference
</p>
<p>
  Back references of Weaken Reference,ReferenceField,Undefined Value,Reference
</p>
<p>
  ,
</p>
<h3 id="language-callback">Callback</h3>
<ul class="list">
  <li><a href="#language-sub-new-callback-object">Create Callback Object</a></li>
  <li><a href="#language-sub-capture">Capture</a></li>
</ul>
<p>
  SPVMCallback Type,MethodDefinitionPackage Type<a href="#language-package-definition">Package Definition</a>callback_tDescriptor,Callback Type
</p>
<p>
  Callback Type,,MethodDefinition,TypeCSPVM
</p>
<pre>
package Foo1 {
  sub new : Foo1 () {
    new Foo1;
  }
  sub : int ($self : self, $num : int) {
    return 1 + $num;
  }
}

package Foo2 {
  sub new : Foo2 () {
    new Foo2;
  }
  sub : int ($self : self, $num : int) {
    return 2 + $num;
  }
}

package FooCallback : callback_t {
sub : int ($self : self, $num : int);
}
</pre>
<p>
  Foo1Foo2MethodDefinition"sub : int ($self : self, $num : int)",Foo1Foo2Method
</p>
<p>
  ,MethodDefinitionCallback TypeFooCallbackDefinition,Type,,Method
</p>
<pre>
my $foo1 = Foo1-&gt;new;
my $foo2 = Foo2-&gt;new;

my $foo : FooCallback;

my $flag = 1;
if ($flag) {
  $foo = $foo1;
}
else {
  $foo = $foo2;
}

my $ret = $foo-&gt;(5);
</pre>
<p>
  $flag1,Foo1Method,Foo2Method
</p>
<p>
  Callback Type,<a href="#language-type-callback">Callback Type</a>
</p>
<h4 id="language-sub-new-callback-object">Create Callback Object</h4>
<p>
  Create Callback Object,Callback,syntax ,Callback TypeSyntax
</p>
<pre>
sub : Type Name  ($self : self, 1, 2, ..., n) {

}
</pre>
<p>
  Create Callback Object,,<a href="#language-package-definition">Package Definition</a>,Package ,<a href="#language-expression">Expression</a>the following 
</p>
<pre>
my $cb_obj = sub : Type Name  ($self : self, 1, 2, ..., n) {

};
</pre>
<p>
  Create Callback ObjectDefinitionSubroutine ,<a href="#language-sub-method">Method</a>Subroutine 
</p>
<p>
  <b>Create Callback ObjectExample</b>
</p>
<pre>
my $comparator = sub : int ($self : self, $x1 : object, $x2 : object) {

}
</pre>
<p>
  Create Callback Object,,MethodCreate Callback Object,<a href="language-expression-callsub">Subroutine Call</a>
<p>
<h4 id="language-sub-capture">Capture</h4>
<p>
  Create Callback Object,Capturesyntax ,Create Callback ObjectDefinitionSubroutine Definition,Create Callback ObjectDefinitionSubroutine 
</p>
<pre>
# Capture
[1 : Type1, 2 : Type2] sub Subroutine Name : int ($self : self, $x1 : object, $x2 : object) {

};
</pre>
<p>
  CaptureExample
</p>
<pre>
my $foo = 1;
my $bar = 5L;

my $comparator = [$foo : int, $bar : long] sub : int ($self : self, $x1 : object, $x2 : object) {

  print "$foo\n";
  print "$bar\n";
}
</pre>
<p>
  Capture,<a href="#language-lex-identifier-field-name">Field Name</a>"$"
</p>
<p>
  Capture,,ClassFieldDefinitionCapture,Field Definition
</p>
<p>
  Scope,Capture<a href="#language-lex-var">Lexical Variable</a>,Lexical Variable 
</p>
<p>
  Capture<a href="#language-package-var">Package Variable</a>,Capture
</p>
<p>
  Create Callback ObjectCapture
</p>
<pre>
package ComapartorImpl {
  has foo : int;
  has bar : long;

  sub : int ($self : self, $x1 : object, $x2 : object) {
    print $self-&gt;{foo} . "\n";
    print $self-&gt;{bar} . "\n";
  }
}
</pre>
<pre>
my $foo = 1;
my $bar = 5L;

my $comparator = new ComparatorImpl;

$comparator-&gt;{foo} = $foo;
$comparator-&gt;{bar} = $bar;
</pre>
<p>
  Capture,,Syntax
</p>
<h3 id="language-weak-ref">Weaken Reference</h3>
<p>
  Weaken Reference,Reference CountWeaken Reference,
</p>
<p>
  SPVM,Reference CountTypeGCReference CountTypeGC,Reference Count0,,,Reference Count0,
</p>
<p>
  Field,Example
</p>
<pre>
{
  my $foo = new Foo;
  my $bar = new Bar;

  $foo-&gt;{bar} = $bar;
  $bar-&gt;{foo} = $foo;
}
</pre>
<p>
  ,Scope,,,Reference Count0
</p>
<p>
  Weaken Reference,Reference CountGC,,
</p>
<p>
  ,Field,<a href="#language-Statement-weaken">weaken Statement</a>,Weaken Reference,
</p>
<pre>
{
  my $foo = new Foo;
  my $bar = new Bar;

  $foo-&gt;{bar} = $bar;
  $bar-&gt;{foo} = $foo;

  weaken $foo-&gt;{bar};
}
</pre>
<p>
  weaken Statement ,$fooReference Count2,$barReference Count2
</p>
<p>
  weaken Statement ,Scope,$fooReference Count,$barReference Count0,
</p>
<p>
  weaken Statement ,$fooReference Count2,$barReference Count1
</p>
<p>
  Scope,$barReference Count10,
</p>
<p>
  3,FieldWeaken Reference,
</p>
<pre>
{
  my $foo = new Foo;
  my $bar = new Bar;
  my $baz = new Baz;

  $foo-&gt;{bar} = $bar;
  $bar-&gt;{baz} = $baz;
  $baz-&gt;{foo} = $foo;

  weaken $foo-&gt;{bar};
}
</pre>
<p>
  Weaken ReferenceSyntax,Weaken Reference<a href="#language-Statement-weaken">weaken Statement</a>,FieldWeaken Reference<a href="#language-expression-operator-isweak">isweakOperator</a>
</p>
<h3 id="language-limitation">Limitation</h3>
<p>
  SPVMLimitation 
</p>
<h4 id="language-limitation-sub-arguments-count">Subroutine ArgumentsLimitation </h4>
<p>
  SPVMSubroutine Arguments256
</p>
<p>
  Multi Numeric Type,Field,SPVM::Complex_2dType,2
</p>
<p>
  Multi Numeric Reference Type ,Multi Numeric TypeField,SPVM::Complex_2d&Type,2
</p>
<p>
  ,,a compile-time error occurs
</p>
<h4 id="language-limitation-value-type-fileds-count">Multi Numeric TypeFieldLimitation </h4>
<p>
  Multi Numeric TypeField,256,Fieldotherwise a compile-time error occurs.
</p>

  </div>
  <div class="bottom">
    <!-- bottom -->

  </div>
</div>

        </div>
        <div class="side">
          <div class="side-list">
  <div class="side-list-title">
    Documents
  </div>
  <ul>
    <li><a href="/spvmdoc-public/tutorial.html">SPVM Tutorial</a></li>
    <li><a href="/spvmdoc-public/language.html">SPVM 1.0 Language Specification</a></li>
    <li><a href="/spvmdoc-public/exchange-api.html">SPVM 1.0 Exchange API</a></li>
    <li><a href="/spvmdoc-public/native-api.html">SPVM 1.0 Native API</a></li>
  </ul>
</div>

        </div>
      </div>
      <div class="footer">
        <!-- footer -->
<span style="color:white">Copyright  Yuki Kimoto</span>

      </div>
    </div>
  </body>
</html>
